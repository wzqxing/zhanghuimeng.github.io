<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>Tag: USACO | 张慕晖的博客</title>
  
  

  <link rel="alternate" href="/atom.xml" title="张慕晖的博客">

  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- meta -->
  
  <!-- link -->
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.6.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.1/katex.min.css">

  
  
  <link rel="undefined" href>
  
  

  


  
  <link rel="stylesheet" href="/style.css">
  

  



  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
    <!-- ga -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-119345306-1', 'https://zhanghuimeng.github.io/');
      ga('send', 'pageview');
    </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  
  
</head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="loading-bar-wrapper">
  <div id="loading-bar" class="pure"></div>
</div>

    <script>setLoadingBarProgress(20)</script>
    <header class="l_header pure">
	<div class="wrapper">
		<div class="nav-main container container--flex">
      <a class="logo flat-box" href="/">
        
          张慕晖的博客
        
      </a>
			<div class="menu">
				<ul class="h-list">
          
  					
  						<li>
								<a id="https:zhanghuimeng.github.io" class="nav flat-box" href="https://zhanghuimeng.github.io/">
									<i class="fas fa-home fa-fw"></i>&nbsp;主页
								</a>
							</li>
      			
  						<li>
								<a id="tags" class="nav flat-box" href="/tags/">
									<i class="fas fa-rss fa-fw"></i>&nbsp;标签
								</a>
							</li>
      			
  						<li>
								<a id="archives" class="nav flat-box" href="/archives/">
									<i class="fas fa-archive fa-fw"></i>&nbsp;归档
								</a>
							</li>
      			
  						<li>
								<a id="categories" class="nav flat-box" href="/categories/">
									<i class="fas fa-users fa-fw"></i>&nbsp;分类
								</a>
							</li>
      			
      		
				</ul>
			</div>

			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="搜索">
						<span class="icon"><i class="fas fa-search fa-fw"></i></span>
					</form>
				</div>
			
			<ul class="switcher h-list">
				
					<li class="s-search"><a class="fas fa-search fa-fw" href="javascript:void(0)"></a></li>
				
				<li class="s-menu"><a class="fas fa-bars fa-fw" href="javascript:void(0)"></a></li>
			</ul>
		</div>

		<div class="nav-sub container container--flex">
			<a class="logo flat-box"></a>
			<ul class="switcher h-list">
				<li class="s-comment"><a class="flat-btn fas fa-comments fa-fw" href="javascript:void(0)"></a></li>
				<li class="s-toc"><a class="flat-btn fas fa-list fa-fw" href="javascript:void(0)"></a></li>
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone">
    <header>
		<nav class="menu">
      <ul>
          
              
                  <li>
										<a id="https:zhanghuimeng.github.io" class="nav flat-box" href="https://zhanghuimeng.github.io/">
											<i class="fas fa-home fa-fw"></i>&nbsp;主页
										</a>
                  </li>
              
                  <li>
										<a id="tags" class="nav flat-box" href="/tags/">
											<i class="fas fa-rss fa-fw"></i>&nbsp;标签
										</a>
                  </li>
              
                  <li>
										<a id="archives" class="nav flat-box" href="/archives/">
											<i class="fas fa-archive fa-fw"></i>&nbsp;归档
										</a>
                  </li>
              
                  <li>
										<a id="categories" class="nav flat-box" href="/categories/">
											<i class="fas fa-users fa-fw"></i>&nbsp;分类
										</a>
                  </li>
              
       
      </ul>
		</nav>
    </header>
	</aside>

    <script>setLoadingBarProgress(40);</script>
    <div class="l_body">
    <div class='container clearfix'>
        <div class='l_main'>
            
    <script>
        window.subData= { title:'标签 : USACO'}
    </script>




  <section class="post-list">
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      



      

      

      
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/computational-geometry-usaco-translation/">
              
                  翻译：计算几何（USACO）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2019-02-10
          </a>
        </div>
      
      
        
          
          <div class="new-meta-item category">
            <a href="/categories/USACO/">
              <i class="fas fa-folder-open" aria-hidden="true"></i>
              USACO
            </a>
          </div>
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>这是几乎全部机翻的版本。几乎可以肯定的是，这个翻译需要改进。</p>
<!-- Prerequisites -->
<h2 id="先决条件"><a class="markdownIt-Anchor" href="#先决条件"></a> 先决条件</h2>
<!-- Graph Theory
Shortest Path -->
<blockquote>
<ul>
<li>图论</li>
<li>最短路</li>
</ul>
</blockquote>
<!-- Tools -->
<h2 id="工具"><a class="markdownIt-Anchor" href="#工具"></a> 工具</h2>
<!-- This module discusses several algorithms that calculate various geometric properties, mostly based on only two operations described below: cross product and arctangent. -->
<blockquote>
<p>本节讨论了几种用于计算各类几何属性的算法，主要基于下面描述的两种操作：叉积和反正切。</p>
</blockquote>
<!-- Cross Product -->
<h3 id="叉积"><a class="markdownIt-Anchor" href="#叉积"></a> 叉积</h3>
<!-- The cross product of u and v is written as u x v. Computationally, the cross product of two three-dimensional vectors u and v is the vector determinant of the following matrix (where i, j, and k are unit vectors in the x, y, and z directions respectively):  -->
<blockquote>
<p>u和v的叉积写作u x v。在计算中，两个三维向量u和v的叉积是下列矩阵的矢量行列式（其中i、j和k分别是x、y和z方向的单位向量）：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">| i  j  k  |</span><br><span class="line">| ux uy uz |</span><br><span class="line">| vx vy vz |</span><br></pre></td></tr></table></figure>
<!-- That equation works out to: -->
<blockquote>
<p>这个式子的值为：</p>
</blockquote>
<blockquote>
<p>(uyvz-vyuz)i + (uzvx-uxvz)j + (uxvy-uyvx)k</p>
</blockquote>
<p><img src="geom6.gif" alt></p>
<!-- This definition can be used for vectors in two dimensions by using three-dimensional vectors with a z component of 0. The resulting vector will only have a z value. -->
<blockquote>
<p>通过将三维向量的z分量置为0，这一定义可用于二维向量。得到的向量只有z分量有值。</p>
</blockquote>
<!-- The cross product has three properties: -->
<blockquote>
<p>叉积有三条性质：</p>
</blockquote>
<!-- The cross product of two vectors is perpendicular to both vectors.
The length of the cross product is equal to the product of:
the length of u,
the length of v, and
the sine of the angle between the vectors. -->
<blockquote><ul>
<li>两个向量的<em>叉积</em>垂直于这两个向量。</li>
<li>叉积的长度等于以下几项的乘积：
<ul>
<li>u的长度</li>
<li>v的长度</li>
<li>u和v夹角的正弦值</li>
</ul>
</li>
</ul>
</blockquote>
<!-- Of the two different directions that are perpendicular to both u and v, the direction the cross product points depends on whether u is ``to the right'' of v or ``to the left.''  -->
<blockquote>
<p>在与u和v垂直的两个不同方向中，叉积指向的方向取决于u是在v的“右边”还是“左边”。</p>
</blockquote>
<p><img src="geom7.gif" alt></p>
<p>这就是右手定则吧。</p>
<!-- Dot product -->
<h3 id="点积"><a class="markdownIt-Anchor" href="#点积"></a> 点积</h3>
<!-- The dot product of two vectors u and v is a scalar written as u · v. Computationally, it is defined in three dimensions as: uxvx + u yvy + uzv z -->
<blockquote>
<p>两个向量u和v的点积是写作u·v的标量。在计算中，它在三维向量中定义为： uxvx + uyvy + uzvz</p>
</blockquote>
<!-- The dot product is actually equal to the product of: -->
<blockquote>
<p>点积实际上等于以下几项的乘积：</p>
</blockquote>
<!-- the length of u
the length of v
the cosine of the angle between u and v. -->
<blockquote>
<ul>
<li>u的长度</li>
<li>v的长度</li>
<li>u和v之间夹角的余弦值。</li>
</ul>
</blockquote>
<!-- Presuming u and v are non-zero, if the dot product if negative, u and v make an angle greater than 90 degrees. If it is zero, then u and v are perpendicular. If u cdot v is positive, then the two vectors form an acute angle. -->
<blockquote>
<p>假定u和v不为零，如果点积为负，则u和v的夹角大于90度。如果它为零，则u和v垂直。如果点积为正，则两个向量的夹角为锐角。</p>
</blockquote>
<!-- Arctangent -->
<h3 id="反正切"><a class="markdownIt-Anchor" href="#反正切"></a> 反正切</h3>
<!-- The arctangentfunction calculates the (an) angle whose tangent is its argument and generally returns a real number between -pi/2 and pi/2. An additional function in C, atan2, takes two arguments: a DELTA y value and a DELTA x value (in that order!). It determines the angle between the given vector and the positive x axis and returns a value between -pi and pi. This has the advantage of removing concerns about dividing by zero or writing code to repair angles in order to handle the negative x cases. The atan2 function is almost always easier to use than the simpler atan function that takes only one argument. -->
<blockquote>
<p>反正切函数计算其正切值等于它的参数的角度，通常返回-pi/2和pi/2之间的一个实数。C中的函数<code>atan2</code>接收两个参数：y轴的差值和x轴的差值（按此顺序！）。它确定给定向量和x轴正半轴之间的角度，并返回一个-pi和pi之间的值。这可以解决除零或需要撰写代码处理x轴负半轴的问题。该<code>atan2</code>函数几乎总是比简单的只有一个参数的反正切函数容易使用。</p>
</blockquote>
<p>显然如果只接收一个参数，无法处理向量和x轴垂直的情况（因为会发生除0问题），而且只有正负也无法说明是和正半轴还是负半轴的夹角。</p>
<!-- Particular Debugging Problems -->
<h2 id="调试中的特殊问题"><a class="markdownIt-Anchor" href="#调试中的特殊问题"></a> 调试中的特殊问题</h2>
<!-- The main problem with geometric problems is that they spawn a lot of special cases. Be on the lookout for these special cases and make sure your program works for all of them. -->
<blockquote>
<p>计算几何题的主要问题是它们会产生<strong>许多</strong>特殊情况。请留意这些特殊情况，并<strong>确保你的程序适用于所有这些情况</strong>。</p>
</blockquote>
<!-- Floating point calculations also create a new set of problems. Floating point calculations are rarely precise, as the computer only maintains so many bits (digits) of accuracy: be aware of this. In particular, when checking if two values are equal, check to see if they are within some small tolerance of each other not precisely equal. -->
<blockquote>
<p>浮点数计算也会产生很多新问题。浮点计算很少是精确的，因为计算机只准确保留了若干比特（位）：要注意这一点。特别注意，在检查两个值是否相等时，不要检查它们是否精确相等，而是检查它们之间的差值是否小于某个范围。</p>
</blockquote>
<!-- Geometric Algorithms -->
<h2 id="计算几何算法"><a class="markdownIt-Anchor" href="#计算几何算法"></a> 计算几何算法</h2>
<!-- Here are some of snippets that can help you solve geometry problems. -->
<blockquote>
<p>下面是一些可以帮助你解决计算几何问题的代码片段。</p>
</blockquote>
<!-- Area of Triangle -->
<h3 id="三角形面积"><a class="markdownIt-Anchor" href="#三角形面积"></a> 三角形面积</h3>
<!-- To calculate the area of a triangle with vertices (a, b, c), pick a vertex (say a) and create a vector to the other two vertices (let u = b - a, and v = c - a). The area of the triangle (a, b, c) is one half the length of cross product u x v. -->
<blockquote>
<p>要计算顶点为(a，b，c)的三角形的面积，选择一个顶点（比如说a），并创建从a指向另外两个顶的向量（令u = b - a，v = c - a）。则三角形(a，b，c)的面积是u和v叉积长度的一半。</p>
</blockquote>
<p><img src="geom1.gif" alt></p>
<!-- An alternative method to find the area of triangle is to use Hero's formula. If the lengths of the sides of a triangle are a, b, and c, let s = (a+b+c)/2. The area of the triangle is then -->
<blockquote>
<p>另一种计算三角形面积的方法是海伦公式。如果三角形的三条边长度分别为a，b，c，令s = s = (a+b+c)/2，则三角形的面积为</p>
</blockquote>
<!-- sqrt(s* (s-a)*(s-b)*(s-c)) . -->
<blockquote>
<p>sqrt(s*(s-a)*(s-b)*(s-c))</p>
</blockquote>
<!-- Are Two Line Segments Parallel? -->
<h3 id="两条线段是否平行"><a class="markdownIt-Anchor" href="#两条线段是否平行"></a> 两条线段是否平行？</h3>
<!-- To check if two line segments are parallel, create vectors along each line segment and check to see if their cross product is (almost) zero. -->
<blockquote>
<p>为了检查两条线段是否平行，请沿每条线段创建向量，并检查它们的叉积是否（几乎）为零。</p>
</blockquote>
<!-- Area of polygon -->
<h3 id="多边形面积"><a class="markdownIt-Anchor" href="#多边形面积"></a> 多边形面积</h3>
<!-- The area of a polygon with vertices (x 1, y 1), ..., (x n, y n) is equal to the determinant:  -->
<blockquote>
<p>顶点为(x1, y1), …，(xn, yn)的多边形的面积等于行列式：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 1   | x1 x2 ... xn |</span><br><span class="line">---  |              |</span><br><span class="line"> 2   | y1 y2 ... yn |</span><br></pre></td></tr></table></figure>
<!-- where the determinate is defined to be similar to the 2 by 2 determinant: x1 y2 + x2y3 + ... + xn y1 - y1 x2 - y2x3 - ... - yn x1 -->
<blockquote>
<p>其中行列式的定义类似于2*2的行列式：x1y2 + x2y3 + … + xny1 - y1x2 - y2x3 - … - ynx1</p>
</blockquote>
<p>不过我觉得我一般只会把多边形分成若干个三角形来算……</p>
<!-- Distance from a point to a line -->
<h3 id="点到直线的距离"><a class="markdownIt-Anchor" href="#点到直线的距离"></a> 点到直线的距离</h3>
<!-- The distance from a point P to a line AB is given by the magnitude of the cross product. In particular, d(P,AB) = |(P - A) x (B - A)| / | B - A| . -->
<blockquote>
<p>从点P到线段AB的距离等于叉积的大小，即d(P，AB) = |(P-A）x (B-A)| / | B - A | 。</p>
</blockquote>
<!-- To determine the distance from a point P to the plane defined by A, B, and C, let n = (B - A) x (C - A). The distance is then give by the following equation: d(P,ABC) = (P-A) · n / |n|. -->
<blockquote>
<p>为了确定从点P到由点A、B和C定义的平面的距离，令n =(B-A) × (C-A)。下列等式即给出距离：d(P，ABC) = (P - A) · n / |n|。</p>
</blockquote>
<!-- Points on a line -->
<h3 id="点在直线上"><a class="markdownIt-Anchor" href="#点在直线上"></a> 点在直线上</h3>
<!-- A point is on a line if the distance from the point to the line is 0. -->
<blockquote>
<p>点在直线上当且仅当点到直线的距离为0。</p>
</blockquote>
<!-- Points on the same side of line -->
<h3 id="在直线同一侧的点"><a class="markdownIt-Anchor" href="#在直线同一侧的点"></a> 在直线同一侧的点</h3>
<!-- This notion only makes sense for two dimensions. To check if points C and D are on the same side of line AB, calculate the z component of (B - A) x (C - A) and (B - A) x (D - A). If the z components have the same sign (i.e., their product is positive), then C and D are on the same side of the line AB. -->
<p>这个概念只对二维平面有意义。要检查C点和D点是否在直线AB的同一侧，计算(B - A) x (C - A)和(B - A) x (D - A)的z分量。如果z分量具有相同的符号（即它们的乘积是正的），则C和D位于直线AB的同一侧。</p>
<!-- Point on line segment -->
<h3 id="点在线段上"><a class="markdownIt-Anchor" href="#点在线段上"></a> 点在线段上</h3>
<!-- To calculate if a point C is on the line segment AB, check if C is on the line AB. If it is, then check if the length of AB is equal to the sum of the lengths of AC and CB. -->
<blockquote>
<p>为了计算点C是否在线段AB上，检查C是否在直线AB上。如果是，则检查AB的长度是否等于AC和CB的长度之和。</p>
</blockquote>
<!-- Point in triangle -->
<h3 id="点在三角形中"><a class="markdownIt-Anchor" href="#点在三角形中"></a> 点在三角形中</h3>
<!-- To check if a point A is in a triangle, find another point B which is within the triangle (the average of the three vertices works well). Then, check if the point A is on the same side of the three lines defined by the edges of the triangle as B. -->
<blockquote>
<p>为了检查点A是否在三角形中，找到三角形内的另一个点B（三个顶点的平均值就可以）。然后，检查点A是否和点B在由三角形的边定义的三条直线的同一侧。</p>
</blockquote>
<p><img src="geom3.gif" alt></p>
<!-- Point in convex polygon -->
<h3 id="点在凸多边形中"><a class="markdownIt-Anchor" href="#点在凸多边形中"></a> 点在凸多边形中</h3>
<!-- The same trick works for a convex polygon:  -->
<blockquote>
<p>同样的技巧适用于凸多边形：</p>
</blockquote>
<p><img src="geom4.gif" alt></p>
<!-- Four (or more) points are coplanar -->
<h3 id="四或更多点共面"><a class="markdownIt-Anchor" href="#四或更多点共面"></a> 四（或更多）点共面</h3>
<!-- To determine if a collection of points is coplanar, select three points, A, B, and C. Now, if, for any other point D, (B - A) x (C - A)) · (D - A) = ~0, then the collection of points resides in some plane. -->
<blockquote>
<p>为了确定点集是否是共面的，选择三个点，A、B和C。如果对于任何其他点D，((B - A) x (C - A)) · (D - A) ≈ 0，则该点集共面。</p>
</blockquote>
<p>先算出三个点对应的平面的法向量……</p>
<!-- Two lines intersect -->
<h3 id="两条直线相交"><a class="markdownIt-Anchor" href="#两条直线相交"></a> 两条直线相交</h3>
<!-- Two lines intersect if and only if they are not parallel in two dimensions. -->
<blockquote>
<p>在二维平面中，两条线相交当且仅当它们不平行。</p>
</blockquote>
<!-- In three dimensions, two lines AB and CD intersect if they are not parallel and A, B, C, and D are coplanar. -->
<blockquote>
<p>在三维中，当直线AB和CD不平行且A、B、C、D共面时，AB和CD相交。</p>
</blockquote>
<!-- Two line segments intersect -->
<h3 id="两条线段相交"><a class="markdownIt-Anchor" href="#两条线段相交"></a> 两条线段相交</h3>
<!-- In two dimensions, two line segments AB and CD intersect if and only if A and B are on opposite sides of the line CD and C and D are on opposite sides of line AB. -->
<blockquote>
<p>在二维平面中，线段AB和CD相交，当且仅当A和B位于直线CD的不同侧且C和D位于直线AB的不同侧时。</p>
</blockquote>
<p><img src="geom5.gif" alt></p>
<!-- Note that both of the checks are necessary, as for the last case one of the checks returns true, while the other testifies to the fact that AB and CD do not intersect. In three dimensions, solve following system of equations, where i and j are the unknowns: -->
<p>请注意，两个检查都是必要的，因为在上图中最后一种情况中，一个检查返回true，而另一个检查才能证明AB和CD不相交。在三维情况中，求解下面的方程组，其中i和j是未知数：</p>
<!-- Ax + (Bx - Ax) i = Cx + (Dx - Cx) j 
Ay + (By - Ay) i = Cy + (Dy - Cy) j 
Az + (Bz - Az) i = Cz + (Dz - Cz) j  -->
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Ax + (Bx - Ax) i = Cx + (Dx - Cx) j</span><br><span class="line">Ay + (By - Ay) i = Cy + (Dy - Cy) j</span><br><span class="line">Az + (Bz - Az) i = Cz + (Dz - Cz) j</span><br></pre></td></tr></table></figure>
<!-- If this system has a solution (i, j), where 0 <= i <= 1 and 0 <= j <= 1, then the line segments intersect at: (Ax + (Bx - Ax)i, Ay + (By - Ay)i, Az + (Bz - Az) i . -->
<blockquote>
<p>如果该方程组具有解(i，j)，其中0 &lt;= i &lt;= 1且0 &lt;= j &lt;= 1，则线段相交于点(Ax + (Bx - Ax)i, Ay + (By - Ay)i, Az + (Bz - Az) i。</p>
</blockquote>
<!-- Point of Intersection of Two Lines -->
<h3 id="两条直线的交点"><a class="markdownIt-Anchor" href="#两条直线的交点"></a> 两条直线的交点</h3>
<!-- For the lines AB and CD in two dimensions, the most straight-forward way to calculate the intersection of them is to solve the system of two equations and two unknowns: -->
<blockquote>
<p>对于二维平面中的直线AB和CD，计算它们交点的最直接方法是求解以下两方程两未知数的方程组：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Ax + (Bx - Ax)i = Cx + (Dx - Cx) j</span><br><span class="line">Ay + (By - Ay)i = Cy + (Dy - Cy) j</span><br></pre></td></tr></table></figure>
<!-- The point of intersection is: -->
<blockquote>
<p>交点坐标为：<br>
(Ax + (Bx - Ax) i, Ay + (By - Ay) i)</p>
</blockquote>
<!-- In three dimensions, solve the same system of equations as was used to check line intersection, and the point of intersection is: -->
<blockquote>
<p>在三维情况下，求解与检查线段交叉时相同的方程组，则交点坐标为：<br>
(Ax + (Bx - Ax)i, Ay + (By - Ay)i, Az + (Bz - Az)i)</p>
</blockquote>
<!-- Checking convexity of 2-dimensional polygon -->
<h3 id="检查二维多边形的凸性"><a class="markdownIt-Anchor" href="#检查二维多边形的凸性"></a> 检查二维多边形的凸性</h3>
<!-- To check the convexity of a 2-dimensional polygon, walk the polygon in clock-wise order. For each triplet of consecutive points (A, B, C), calculate the cross product (B - A) x (C - A). If the z component of each of these vectors is positive, the polygon is convex. -->
<blockquote>
<p>为了检查二维多边形的凸性，按顺时针顺序遍历多边形的顶点。对于所有的连续三个顶点(A，B，C)，计算叉积(B - A) x (C - A)。如果 得到的所有向量的z分量都是正的，则多边形是凸的。</p>
</blockquote>
<!-- Point in non-convex polygon -->
<h3 id="点在非凸多边形中"><a class="markdownIt-Anchor" href="#点在非凸多边形中"></a> 点在非凸多边形中</h3>
<!-- To calculate if a point is within a nonconvex polygon, make a ray from that point in a random direction and count the number of times it intersects the polygon. If the ray intersects the polygon at a vertex or along an edge, pick a new direction. Otherwise, the point is within the polygon if and only if the ray intersects the polygon an odd number of times. -->
<blockquote>
<p>为了计算某点是否在非凸多边形内，从该点沿随机方向发出一条射线，并计算它与多边形相交的次数。如果射线在顶点或沿边缘与多边形相交，则选择一个新方向。否则，当且仅当射线与多边形相交奇数次时，该点才在多边形内。</p>
</blockquote>
<p><img src="geom8.gif" alt></p>
<!-- This method also extends to three dimensions (and higher), but the restriction on intersection is that it only intersects at faces and not at either a vertex or an edge. -->
<blockquote>
<p>此方法也适用于三维（和更高维度），但对相交的限制是只在面上相交，而不是在顶点或边上。</p>
</blockquote>
<!-- Geometry Methodologies -->
<h2 id="计算几何方法"><a class="markdownIt-Anchor" href="#计算几何方法"></a> 计算几何方法</h2>
<!-- Geometric problems introduce several different tricks that can be used to either reduce the run-time or approximate the solution. -->
<blockquote>
<p>计算几何题引入了几种不同的技巧，可用于减少运行时间或估计解。</p>
</blockquote>
<!-- Monte Carlo -->
<h3 id="蒙特卡洛方法"><a class="markdownIt-Anchor" href="#蒙特卡洛方法"></a> 蒙特卡洛方法</h3>
<!-- The first geometric trick is based on randomness. Instead of calculating the probability that something occurs, simulate a random event and calculate the fraction of times it occurs. If enough events are simulated, the difference between these two values becomes very small. -->
<blockquote>
<p>第一种计算几何技巧基于随机性。我们不是计算某事发生的概率，而是模拟随机事件并计算它发生的次数。如果模拟了足够多的事件，则这两个值之间的差异将变得非常小。</p>
</blockquote>
<!-- This can be helpful to determine something like the area of a figure. Instead of calculating the area directly, determine a bounding box, and throw ``darts'' at the box, and estimate what the probability of hitting the figure is. If this is calculated accurately enough, this can give a good estimate of the actual area. -->
<blockquote>
<p>这有助于确定图形面积大小之类内容。我们不是直接计算区域，而是确定一个边界框，然后向框中抛出“飞镖”，并估计击中图形的概率是多少。如果计算得足够准确，这可以很好地估计实际面积。</p>
</blockquote>
<!-- The problem with this method is to get a good relative error (error divided by the actual value) requires a large number of successful events. If the probability of the event occurring is very small, the method does not yield good results. -->
<blockquote>
<p>这种方法的问题是，获得良好的相对误差（误差除以实际值）需要大量成功的事件。如果事件发生的概率非常小，则该方法不会产生很好的结果。</p>
</blockquote>
<!-- Partitioning -->
<h3 id="分区"><a class="markdownIt-Anchor" href="#分区"></a> 分区</h3>
<!-- Partitioning is a method to improve the speed of a geometric algorithm. This entails dividing the plane up into sections (usually by a grid but sometimes into radial sections or some other method), and bucketing the objects into appropriate section(s). When looking for objects within some figure, only those sections which have a non-zero intersection with that figure need to be examined, thereby greatly reducing the cost of the algorithm. This is helpful to determine the set of objects within some distance of a given point (the figure is a circle) or to check for intersections (the figure is a line). -->
<blockquote>
<p>分区是一种提高计算几何算法速度的方法。这需要将平面分成多个部分（通常通过网格，但有时也会按辐射切开或其他方法），并将对象分到对应的区域中。当在某个图形中查找对象时，只需要检查与该图图形具有非零交点的那些部分，从而大大降低了算法的成本。这有助于确定到给定点的距离在某个范围内的对象集和（图形是圆）或检查交叉点（图形是一条直线）。</p>
</blockquote>
<p><img src="geom9.gif" alt></p>
<!-- Graph Problems -->
<h3 id="图论问题"><a class="markdownIt-Anchor" href="#图论问题"></a> 图论问题</h3>
<!-- Sometimes what may look like a geometric problem is really a graph problem. Just because the input is points in the plane does not mean it's a geometric algorithm. -->
<blockquote>
<p>有时看起来像计算几何问题的问题实际上是图论问题。仅仅因为输入是平面中的点并不意味着需要计算几何算法。</p>
</blockquote>
<!-- Example Problems -->
<h2 id="例题"><a class="markdownIt-Anchor" href="#例题"></a> 例题</h2>
<!-- Point Moving -->
<h3 id="移动点"><a class="markdownIt-Anchor" href="#移动点"></a> 移动点</h3>
<!-- Given a set of line segments in the plane, and two points A and B, is it possible to move from A to B without crossing any of the segments? -->
<blockquote>
<p>给定平面中的一组线段，以及两个点A和B，能否在不跨越任何线段的情况下从A移动到B？</p>
</blockquote>
<!-- The line segments partition the plane into regions. Determine these regions, and see if A and B reside in the same region. -->
<blockquote>
<p>分析：线段将平面划分为区域。确定这些区域，并检查A和B是否位于同一区域。</p>
</blockquote>
<p>问题是怎么确定这些区域，感觉有些麻烦……</p>
<!-- Bicycle Routing -->
<h3 id="自行车路线"><a class="markdownIt-Anchor" href="#自行车路线"></a> 自行车路线</h3>
<!-- Given a collection of non-intersecting buildings along with start and end locations, find the shortest path from A to B that doesn't go through any buildings. -->
<blockquote>
<p>给定一系列互不交叉建筑的以及它们的起点和终点位置，找到从A到B的不经过任何建筑物的最短路径。</p>
</blockquote>
<!-- Analysis: This is really a graph problem. The nodes are the start and end locations, along with the vertices of the buildings. There are edges between any two nodes such that the line segment between them does not intersect any buildings, with weight equal to the length of the length of the line segments. Once that graph has been calculated, the problem is shortest path. -->
<blockquote>
<p>分析：这实际上是一个图论问题。结点是起始位置和结束位置，以及建筑物的顶点。如果两个结点之间的线段不与任何建筑物相交，则它们之间有边，其权重等于线段的长度。构造完该图后，问题就变成了最短路。</p>
</blockquote>
<!-- Maximizing Line Intersections -->
<h3 id="最大化交叉点数量"><a class="markdownIt-Anchor" href="#最大化交叉点数量"></a> 最大化交叉点数量</h3>
<!-- Given a collection of segments in the plane, find the greatest number of segments which can by intersected by drawing a single line. -->
<blockquote>
<p>给定平面中的一组线段，找到可以与一条直线相交的线段的最大数量。</p>
</blockquote>
<!-- Analysis: With a little bit of thought, it is clear that the line segment must pass through two of the vertices of the collection of line segments. Thus, try all pairs of vertices, and calculate the crossing for each. Combining this with partitioning gives an algorithm that runs fairly quickly. -->
<blockquote>
<p>分析：经过一些思考，很显然直线必须通过线段集合中的两个顶点。因此，尝试所有顶点对，并计算每条直线的交叉点数量。将其与分区相结合，可以提供一种运行速度相当快的算法。</p>
</blockquote>
<p>或者说，一种最优解可以通过旋转变换成另一个一定至少通过两个顶点的最优解……</p>
<!-- Polygon Classification -->
<h3 id="多边形分类"><a class="markdownIt-Anchor" href="#多边形分类"></a> 多边形分类</h3>
<!-- Given a collection of segments defining a polygon, determine if it is simple (no two non-consecutive line segments intersect) and convex. -->
<blockquote>
<p>给定定义多边形的一组线段，确定它是否是简单多边形（没有两个非连续线段相交）和凸多边形。</p>
</blockquote>
<p>Q：凸多边形一定是简单的吗？</p>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/USACO/"><i class="fas fa-hashtag fa-fw"></i>USACO</a>
                
                    <a href="/tags/translation/"><i class="fas fa-hashtag fa-fw"></i>translation</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/eulerian-tour-usaco-translation/">
              
                  翻译：欧拉路（USACO）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2019-02-09
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>这是几乎全部机翻的版本。几乎可以肯定的是，这个翻译需要改进。</p>
<!-- Sample Problem: Riding The Fences -->
<h2 id="例题穿越栅栏"><a class="markdownIt-Anchor" href="#例题穿越栅栏"></a> 例题：穿越栅栏</h2>
<!-- Farmer John owns a large number of fences, which he must periodically check for integrity. Farmer John keeps track of his fences by maintaining a list of their intersection points, along with the fences which end at each point. Each fence has two end points, each at an intersection point, although the intersection point may be the end point of only a single fence. Of course, more than two fences might share an endpoint. -->
<blockquote>
<p>农夫约翰拥有大量围栏，他必须定期检查它们的完整性。农民约翰通过维护围栏的交叉点列表，以及在每个交叉点点结束的围栏来跟踪它们。每个围栏有两个端点，每个端点位于一个交叉点，交叉点可能只是单个围栏的终点。当然，两个以上的围栏也可能共享一个端点。</p>
</blockquote>
<!-- Given the fence layout, calculate if there is a way for Farmer John to ride his horse to all of his fences without riding along a fence more than once. Farmer John can start and end anywhere, but cannot cut across his fields (the only way he can travel between intersection points is along a fence). If there is a way, find one way. -->
<blockquote>
<p>给定围栏的布局，计算农夫约翰是否有办法骑马去他所有的围栏，且不需要不止一次地穿越围栏。约翰可以在任何地方开始和结束，但不能穿过他的田地（在交叉点之间穿行的唯一方法是沿着围栏）。如果有方法，找出一种方法。</p>
</blockquote>
<!-- The Abstraction -->
<h2 id="问题的抽象"><a class="markdownIt-Anchor" href="#问题的抽象"></a> 问题的抽象</h2>
<!-- Given: An undirected graph -->
<blockquote>
<p>给定：无向图</p>
</blockquote>
<!-- Find a path which uses every edge exactly once. This is called an Eulerian tour. If the path begins and ends at the same vertex, it is called a Eulerian circuit. -->
<blockquote>
<p>找到一条只使用每条边一次的路径。这样的路径称为欧拉路径。如果路径在同一顶点开始和结束，则称为欧拉回路。</p>
</blockquote>
<!-- The Algorithm -->
<h2 id="算法"><a class="markdownIt-Anchor" href="#算法"></a> 算法</h2>
<!-- Detecting whether a graph has an Eulerian tour or circuit is actually easy; two different rules apply. -->
<blockquote>
<p>检查图中是否有欧拉路径或回路实际上很容易; 使用下列两条规则。</p>
</blockquote>
<!-- A graph has an Eulerian circuit if and only if it is connected (once you throw out all nodes of degree 0) and every node has `even degree'. -->
<!-- A graph has an Eulerian path if and only if it is connected and every node except two has even degree. -->
<!-- In the second case, one of the two nodes which has odd degree must be the start node, while the other is the end node. -->
<blockquote>
<ul>
<li>图中有欧拉回路，当且仅当它是连通图（在去掉度数为0的所有结点之后），且每个结点具有“偶数度”。</li>
<li>图中有欧拉路径，当且仅当它是连通图，且除了两个结点之外的每个结点的度数均为偶数。</li>
<li>在第二种情况下，具有奇数度的两个结点中的一个必须是起始结点，而另一个是结束结点。</li>
</ul>
</blockquote>
<!-- The basic idea of the algorithm is to start at some node the graph and determine a circuit back to that same node. Now, as the circuit is added (in reverse order, as it turns out), the algorithm ensures that all the edges of all the nodes along that path have been used. If there is some node along that path which has an edge that has not been used, then the algorithm finds a circuit starting at that node which uses that edge and splices this new circuit into the current one. This continues until all the edges of every node in the original circuit have been used, which, since the graph is connected, implies that all the edges have been used, so the resulting circuit is Eulerian. -->
<blockquote>
<p>算法的基本思想是从图的某个结点开始，并确定回到同一结点的回路。现在，随着回路的添加（事实上是以逆序），算法确保从该路径上所有结点出发的所有边都已被使用。如果该路径上还存在一些具有未使用的边的结点，则算法找到从该结点开始的使用这条边的回路，并将该新回路拼接到当前回路中。这一直持续到原始回路中每个结点的所有边都被使用为止，由于图是连通的，这意味着已经使用了所有边，因此得到的回路是欧拉回路。</p>
</blockquote>
<!-- More formally, to determine a Eulerian circuit of a graph which has one, pick a starting node and recurse on it. At each recursive step: -->
<blockquote>
<p>更正式地说，要确定一个含有欧拉回路的图中的欧拉回路，选择一个起始结点并对其进行递归。在每个递归步骤中：</p>
</blockquote>
<!-- Pick a starting node and recurse on that node. At each step: -->
<!-- If the node has no neighbors, then append the node to the circuit and return -->
<!-- If the node has a neighbor, then make a list of the neighbors and process them (which includes deleting them from the list of nodes on which to work) until the node has no more neighbors -->
<!-- To process a node, delete the edge between the current node and its neighbor, recurse on the neighbor, and postpend the current node to the circuit. -->
<blockquote>
<ul>
<li>选择一个起始结点并对该结点进行递归。在每一步中：</li>
<li>如果结点没有邻居，则将结点加入到回路中并返回</li>
<li>如果结点具有邻居，则创建邻居列表并对其进行处理（包括从需要处理的结点列表中删除它们），直到该节点不再有邻居为止</li>
<li>为了处理结点，删除当前结点与其邻居之间的边，递归邻居，然后将当前结点加入到电路中。</li>
</ul>
</blockquote>
<!-- And here's the pseudocode: -->
<blockquote>
<p>这是伪代码：</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># circuit是一个全局数组</span></span><br><span class="line">find_euler_circuit</span><br><span class="line">    circuitpos = <span class="number">0</span></span><br><span class="line">    find_circuit(node <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># nextnode和visited是局部数组</span></span><br><span class="line"><span class="comment"># 将以逆序找到路径</span></span><br><span class="line">find_circuit(node i)</span><br><span class="line">    <span class="keyword">if</span> 结点i没有邻居 then</span><br><span class="line">      circuit(circuitpos) = 结点i</span><br><span class="line">      circuitpos = circuitpos + <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">while</span> (结点i有邻居)</span><br><span class="line">          随机选择结点i的邻居结点j</span><br><span class="line">          delete_edges (结点j, 结点i)</span><br><span class="line">          find_circuit (结点j)</span><br><span class="line">      circuit(circuitpos) = 结点i</span><br><span class="line">      circuitpos = circuitpos + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<!-- To find an Eulerian tour, simply find one of the nodes which has odd degree and call find_circuit with it. -->
<blockquote>
<p>为了找到欧拉路径，只需找到其中一个具有奇数度的结点，并对它调用<code>find_circuit</code>。</p>
</blockquote>
<!-- Both of these algorithms run in O(m + n) time, where m is the number of edges and n is the number of nodes, if you store the graph in adjacency list form. With larger graphs, there's a danger of overflowing the run-time stack, so you might have to use your own stack. -->
<blockquote>
<p>这两种算法的时间复杂度都是O(m + n)，其中m是边数，n是结点数，如果图是以邻接表形式存储的话。对于较大的图，存在运行时栈溢出的风险，因此你可能需要使用自己的栈。</p>
</blockquote>
<!-- Execution Example -->
<h2 id="执行示例"><a class="markdownIt-Anchor" href="#执行示例"></a> 执行示例</h2>
<!-- Consider the following graph:  -->
<blockquote>
<p>考虑下图：</p>
</blockquote>
<p><img src="euler1.gif" alt></p>
<!-- Assume that selecting a random neighbor yields the lowest numbered neighbor, the execution goes as follows: -->
<blockquote>
<p>假设选择随机邻居时选择的是编号最小的邻居，算法执行过程如下：</p>
</blockquote>
<p><img src="euler2a.gif" alt></p>
<!-- Stack: 
Location: 1 
Circuit: -->
<blockquote>
<p>栈：<br>
当前位置：1<br>
回路：</p>
</blockquote>
<p><img src="euler2b.gif" alt></p>
<!-- Stack: 1 
Location: 4 
Circuit: -->
<blockquote>
<p>栈：1<br>
当前位置：4<br>
回路：</p>
</blockquote>
<p><img src="euler2c.gif" alt></p>
<!-- Stack: 1 4 
Location: 2 
Circuit: -->
<blockquote>
<p>栈：1 4<br>
当前位置：2<br>
回路：</p>
</blockquote>
<p><img src="euler2d.gif" alt></p>
<!-- Stack: 1 4 2 
Location: 5 
Circuit: -->
<blockquote>
<p>栈：1 4 2<br>
当前位置：5<br>
回路：</p>
</blockquote>
<p><img src="euler2e.gif" alt></p>
<!-- Stack: 1 4 2 5 
Location: 1 
Circuit: -->
<blockquote>
<p>栈：1 4 2 5<br>
当前位置：1<br>
回路：</p>
</blockquote>
<p><img src="euler2e.gif" alt></p>
<!-- Stack: 1 4 2 
Location: 5 
Circuit: 1 -->
<blockquote>
<p>栈：1 4 2<br>
当前位置：5<br>
回路：1</p>
</blockquote>
<p><img src="euler2f.gif" alt></p>
<!-- Stack: 1 4 2 5 
Location: 6 
Circuit: 1 -->
<blockquote>
<p>栈：1 4 2 5<br>
当前位置：6<br>
回路：1</p>
</blockquote>
<p><img src="euler2g.gif" alt></p>
<!-- Stack: 1 4 2 5 6 
Location: 2 
Circuit: 1 -->
<blockquote>
<p>栈：1 4 2 5 6<br>
当前位置：2<br>
回路：1</p>
</blockquote>
<p><img src="euler2h.gif" alt></p>
<!-- Stack: 1 4 2 5 6 2 
Location: 7 
Circuit: 1 -->
<blockquote>
<p>栈：1 4 2 5 6 2<br>
当前位置：7<br>
回路：1</p>
</blockquote>
<p><img src="euler2i.gif" alt></p>
<!-- Stack: 1 4 2 5 6 2 7 
Location: 3 
Circuit: 1 -->
<blockquote>
<p>栈：1 4 2 5 6 2 7<br>
当前位置：3<br>
回路：1</p>
</blockquote>
<p><img src="euler2j.gif" alt></p>
<!-- Stack: 1 4 2 5 6 2 7 3 
Location: 4 
Circuit: 1 -->
<blockquote>
<p>栈：1 4 2 5 6 2 7 3<br>
当前位置：4<br>
回路：1</p>
</blockquote>
<p><img src="euler2k.gif" alt></p>
<!-- Stack: 1 4 2 5 6 2 7 3 4 
Location: 6 
Circuit: 1 -->
<blockquote>
<p>栈：1 4 2 5 6 2 7 3 4<br>
当前位置：6<br>
回路：1</p>
</blockquote>
<p><img src="euler2l.gif" alt></p>
<!-- Stack: 1 4 2 5 6 2 7 3 4 6 
Location: 7 
Circuit: 1 -->
<blockquote>
<p>栈：1 4 2 5 6 2 7 3 4 6<br>
当前位置：7<br>
回路：1</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 1 4 2 5 6 2 7 3 4 6 7 
Location: 5 
Circuit: 1 -->
<blockquote>
<p>栈：1 4 2 5 6 2 7 3 4 6 7<br>
当前位置：5<br>
回路：1</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 1 4 2 5 6 2 7 3 4 6 
Location: 7 
Circuit: 1 5 -->
<blockquote>
<p>栈：1 4 2 5 6 2 7 3 4 6<br>
当前位置：7<br>
回路：1 5</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 1 4 2 5 6 2 7 3 4 
Location: 6 
Circuit: 1 5 7 -->
<blockquote>
<p>栈：1 4 2 5 6 2 7 3 4<br>
当前位置：6<br>
回路：1 5 7</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 1 4 2 5 6 2 7 3 
Location: 4 
Circuit: 1 5 7 6 -->
<blockquote>
<p>栈：1 4 2 5 6 2 7 3<br>
当前位置：4<br>
回路：1 5 7 6</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 1 4 2 5 6 2 7 
Location: 3 
Circuit: 1 5 7 6 4 -->
<blockquote>
<p>栈：1 4 2 5 6 2 7<br>
当前位置：3<br>
回路：1 5 7 6 4</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 1 4 2 5 6 2 
Location: 7 
Circuit: 1 5 7 6 4 3 -->
<blockquote>
<p>栈：1 4 2 5 6 2<br>
当前位置：7<br>
回路：1 5 7 6 4 3</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 1 4 2 5 6 
Location: 2 
Circuit: 1 5 7 6 4 3 7 -->
<blockquote>
<p>栈：1 4 2 5 6<br>
当前位置：2<br>
回路：1 5 7 6 4 3 7</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 1 4 2 5 
Location: 6 
Circuit: 1 5 7 6 4 3 7 2 -->
<blockquote>
<p>栈：1 4 2 5<br>
当前位置：6<br>
回路：1 5 7 6 4 3 7 2</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 1 4 2 
Location: 5 
Circuit: 1 5 7 6 4 3 7 2 6 -->
<blockquote>
<p>栈：1 4 2<br>
当前位置：5<br>
回路：1 5 7 6 4 3 7 2 6</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 1 4 
Location: 2 
Circuit: 1 5 7 6 4 3 7 2 6 5 -->
<blockquote>
<p>栈：1 4<br>
当前位置：2<br>
回路：1 5 7 6 4 3 7 2 6 5</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 1 
Location: 4 
Circuit: 1 5 7 6 4 3 7 2 6 5 2 -->
<blockquote>
<p>栈：1<br>
当前位置：4<br>
回路：1 5 7 6 4 3 7 2 6 5 2</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 
Location: 1 
Circuit: 1 5 7 6 4 3 7 2 6 5 2 4 -->
<blockquote>
<p>栈：<br>
当前位置：1<br>
回路：1 5 7 6 4 3 7 2 6 5 2 4</p>
</blockquote>
<p><img src="euler2m.gif" alt></p>
<!-- Stack: 
Location: 
Circuit: 1 5 7 6 4 3 7 2 6 5 2 4 1 -->
<blockquote>
<p>栈：<br>
当前位置：<br>
回路：1 5 7 6 4 3 7 2 6 5 2 4 1</p>
</blockquote>
<!-- Extensions -->
<h2 id="扩展"><a class="markdownIt-Anchor" href="#扩展"></a> 扩展</h2>
<!-- Multiple edges between nodes can be handled by the exact same algorithm. -->
<blockquote>
<p>重边可以通过完全相同的算法来处理。</p>
</blockquote>
<!-- Self-loops can be handled by the exact same algorithm as well, if self-loops are considered to add 2 (one in and one out) to the degree of a node. -->
<blockquote>
<p>如果认为自环会为结点度数增加2（一进一出），则自环也可以通过完全相同的算法来处理。</p>
</blockquote>
<!-- A directed graph has a Eulerian circuit if it is strongly connected (except for nodes with both in-degree and out-degree of 0) and the indegree of each node equals its outdegree. The algorithm is exactly the same, except that because of the way this code finds the cycle, you must traverse arcs in reverse order. -->
<blockquote>
<p>有向图仅当强连通且每个结点的入度等于出度时才有欧拉回路（除了入度和出度均为0的节点）。算法完全相同，只是由于此代码找到环路的方式，您必须以相反的顺序遍历边。</p>
</blockquote>
<!-- Finding a Eulerian path in a directed graph is harder. Consult Sedgewick if you are interested. -->
<blockquote>
<p>在有向图中找到欧拉路径更难。如果您有兴趣，请阅读Sedgewick的书。</p>
</blockquote>
<!-- Example problems -->
<h2 id="例题"><a class="markdownIt-Anchor" href="#例题"></a> 例题</h2>
<!-- Airplane Hopping -->
<h3 id="飞机跳跃"><a class="markdownIt-Anchor" href="#飞机跳跃"></a> 飞机跳跃</h3>
<!-- Given a collection of cities, along with the flights between those cities, determine if there is a sequence of flights such that you take every flight exactly once, and end up at the place you started. -->
<blockquote>
<p>给定一系列城市，以及这些城市之间的航班，确定是否存在一个航班序列，使得你顺序搭乘每个航班一次，最后回到开始的地方。</p>
</blockquote>
<!-- Analysis: This is equivalent to finding a Eulerian circuit in a directed graph. -->
<blockquote>
<p>分析：这相当于在有向图中找到欧拉回路。</p>
</blockquote>
<!-- Cows on Parade -->
<h3 id="行进中的奶牛"><a class="markdownIt-Anchor" href="#行进中的奶牛"></a> 行进中的奶牛</h3>
<!-- Farmer John has two types of cows: black Angus and white Jerseys. While marching 19 of their cows to market the other day, John's wife Farmeress Joanne, noticed that all 16 possibilities of four successive black and white cows (e.g., bbbb, bbbw, bbwb, bbww, ..., wwww) were present. Of course, some of the combinations overlapped others. -->
<p>农夫约翰有两种类型的奶牛：黑色安格斯奶牛和白色泽西奶牛。前几天约翰的妻子琼安将19头奶牛赶到市场上时，注意到四只连续黑白奶牛的所有16种可能性（例如，bbbb，bbbw，bbwb，bbww，…，wwww）都存在。当然，有些组合与其他组合重叠。</p>
<!-- Given N (2 <= N <= 15), find the minimum length sequence of cows such that every combination of N successive black and white cows occurs in that sequence. -->
<blockquote>
<p>给定N（2 &lt;= N &lt;= 15），找到最小的奶牛长度序列，使得N个连续的黑色和白色奶牛的每个组合都出现在该序列中。</p>
</blockquote>
<!-- Analysis: The vertices of the graph are the possibilities of N-1 cows. Being at a node corresponds to the last N-1 cows matching the node in color. That is, for N = 4, if the last 3 cows were wbw, then you are at the wbw node. Each node has out-degree of 2, corresponding to adding a black or white cow to the end of the sequence. In addition, each node has in-degree of 2, corresponding to whether the cow just before the last N-1 cows is black or white. -->
<blockquote>
<p>分析：图的顶点是N-1头奶牛的可能颜色。位于一个结点处表示最后N-1头奶牛与该结点的颜色匹配。也就是说，对于N = 4，如果最后3头奶牛颜色是wbw，那么你就在wbw节点。每个节点的出度为2，对应于在序列末尾添加黑色或白色奶牛。另外，每个节点的入度为2，对应于最后N-1头奶牛之前的奶牛是黑色还是白色。</p>
</blockquote>
<p>嗯……为啥图的顶点是N-1头奶牛的可能颜色，而不是N头呢？</p>
<!-- The graph is strongly connected, and the in-degree of each node equals its out-degree, so the graph has a Eulerian circuit. -->
<blockquote>
<p>图是强连通的，并且每个结点的入度等于出度，因此图中有欧拉回路。</p>
</blockquote>
<!-- The sequence corresponding to the Eulerian circuit is the sequence of N-1 cows of the first node in the circuit, followed by cows corresponding to the color of the edge. -->
<blockquote>
<p>和欧拉回路相对应的序列是回路中第一个结点对应的N-1头母牛的序列，之后再加上每条边对应的颜色。</p>
</blockquote>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Translation/"><i class="fas fa-hashtag fa-fw"></i>Translation</a>
                
                    <a href="/tags/USACO/"><i class="fas fa-hashtag fa-fw"></i>USACO</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/usaco-2-3-2-cow-pedigrees/">
              
                  USACO 2.3.2: Cow Pedigrees（DP）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2019-01-31
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>见<a href="https://www.luogu.org/problemnew/show/P1472" target="_blank" rel="noopener">洛谷 P1472 奶牛家谱 Cow Pedigrees</a>。</p>
<p>求所有高度为<code>K</code>，结点数量为<code>N</code>的二叉树个数。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>我在这道题上花了好久！之前Leetcode上有道类似的题（<a href="/post/leetcode-894-all-possible-full-binary-trees">Leetcode 894. All Possible Full Binary Trees</a>），不过那道题是要生成所有完全二叉树，而不是计数。</p>
<p>一个很简单的思路是这样的：</p>
<ul>
<li>用<code>f[n][k]</code>记录高度为<code>k</code>，结点数量为<code>n</code>的二叉树数量</li>
<li>固定左子树高度为<code>k-1</code>，枚举左子树结点个数和右子树高度（显然左子树结点数量确定后，右子树结点数量也确定了）</li>
<li>（适当地）乘2（因为只固定了左子树的高度，差不多只考虑了一半情况；但是去重还需要仔细考虑……）</li>
</ul>
<p>但是去重就出了一点问题。最开始我直接把所有结果都乘2，结果发现显然乘多了。比如说，左右两侧高度和结点数都相同的情况就不需要乘2。但是这样仍然不对。经过了比较漫长的手算和debug过程，我发现，左右两侧高度相同的情况都不需要乘2——因为它们都会出现在枚举中。举个例子：</p>
<p><img src="btree.jpg" alt="四个二叉树"></p>
<p><code>f[5][3]</code>和<code>f[7][3]</code>都会作为左边的二叉树出现在枚举中。</p>
<hr>
<p>题解里的思路就稍微好（不容易出错）一点：分别枚举左边比右边深，右边比左边深和左右一样深的三种情况。这个时候如果还需要明确地按子树的不同高度进行枚举未免太麻烦，所以就用一个辅助数组<code>g[n][k]</code>存所有高度<code>&lt;= k</code>且结点数量为<code>n</code>的二叉树的数量。</p>
<p>不过整体复杂度仍然都是<code>O(N^3)</code>的。</p>
<p>吐槽1：我之前的确很少（如果不是没有）见到要求结果模9901的。</p>
<p>吐槽2：这道题的文件名是<code>nocows</code>，听起来和NOCOW很像啊……</p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<h3 id="我的dp"><a class="markdownIt-Anchor" href="#我的dp"></a> 我的DP</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ID: zhanghu15</span></span><br><span class="line"><span class="comment">TASK: nocows</span></span><br><span class="line"><span class="comment">LANG: C++14</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">"nocows.out"</span>)</span></span>;</span><br><span class="line"><span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">"nocows.in"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LL P = <span class="number">9901</span>;</span><br><span class="line">LL f[<span class="number">201</span>][<span class="number">101</span>];  <span class="comment">// f[i][j]：i个结点的高度为j的二叉树的数量</span></span><br><span class="line"><span class="keyword">int</span> N, K;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">calc</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (f[num][height] != <span class="number">-1</span>) <span class="keyword">return</span> f[num][height];</span><br><span class="line">    <span class="keyword">if</span> (num == <span class="number">1</span> &amp;&amp; height == <span class="number">1</span>) &#123;</span><br><span class="line">        f[num][height] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (num &lt; <span class="number">2</span>*height - <span class="number">1</span>) &#123;</span><br><span class="line">        f[num][height] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (height &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        f[num][height] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    f[num][height] = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 一侧结点数为s，高度为height-1</span></span><br><span class="line">    <span class="comment">// 另一侧结点数为num-s-1，高度&lt;=height-1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">1</span>; s &lt;= num - <span class="number">2</span>; s += <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (calc(s, height<span class="number">-1</span>) == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> h = <span class="number">1</span>; h &lt;= height - <span class="number">1</span>; h++) &#123;</span><br><span class="line">            f[num][height] += calc(s, height<span class="number">-1</span>) * calc(num-s<span class="number">-1</span>, h);</span><br><span class="line">            <span class="comment">// 去重的正确姿势好难……</span></span><br><span class="line">            <span class="keyword">if</span> (h != height<span class="number">-1</span>)</span><br><span class="line">                 f[num][height] += calc(s, height<span class="number">-1</span>) * calc(num-s<span class="number">-1</span>, h);</span><br><span class="line">            f[num][height] %= P;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f[num][height];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fin &gt;&gt; N &gt;&gt; K;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    fout &lt;&lt; calc(N, K) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="题解的dp"><a class="markdownIt-Anchor" href="#题解的dp"></a> 题解的DP</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ID: zhanghu15</span></span><br><span class="line"><span class="comment">TASK: nocows</span></span><br><span class="line"><span class="comment">LANG: C++14</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">"nocows.out"</span>)</span></span>;</span><br><span class="line"><span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">"nocows.in"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LL P = <span class="number">9901</span>;</span><br><span class="line">LL f[<span class="number">201</span>][<span class="number">101</span>];  <span class="comment">// f[i][j]：i个结点的高度为j的二叉树的数量</span></span><br><span class="line">LL g[<span class="number">201</span>][<span class="number">101</span>];  <span class="comment">// g[i][j]：i个结点的高度&lt;=j的二叉树的数量</span></span><br><span class="line"><span class="keyword">int</span> N, K;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fin &gt;&gt; N &gt;&gt; K;</span><br><span class="line">    f[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// 像这样要用到辅助数组的时候，就不如写bottom-up的迭代形式了</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i += <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= K; j++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= i - <span class="number">2</span>; k++) &#123;</span><br><span class="line">                <span class="comment">// 左边深度为j-1，右边深度&lt;=j-2</span></span><br><span class="line">                f[i][j] += f[k][j - <span class="number">1</span>] * g[i - k - <span class="number">1</span>][j - <span class="number">2</span>];</span><br><span class="line">                <span class="comment">// 左边深度&lt;=j-2，右边深度为j-1</span></span><br><span class="line">                f[i][j] += g[k][j - <span class="number">2</span>] * f[i - k - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                <span class="comment">// 两边深度都是j-1</span></span><br><span class="line">                f[i][j] += f[k][j - <span class="number">1</span>] * f[i - k - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                f[i][j] %= P;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> h = j; h &lt;= K; h++)</span><br><span class="line">                g[i][h] = (g[i][h] + f[i][j]) % P;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fout &lt;&lt; f[N][K] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/alg-Dynamic-Programming/"><i class="fas fa-hashtag fa-fw"></i>alg:Dynamic Programming</a>
                
                    <a href="/tags/USACO/"><i class="fas fa-hashtag fa-fw"></i>USACO</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/usaco-2-3-1-longest-prefix/">
              
                  USACO 2.3.1: Longest Prefix（DP）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2019-01-30
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>见<a href="https://www.luogu.org/problemnew/show/P1470" target="_blank" rel="noopener">洛谷 P1470 最长前缀 Longest Prefix</a>。</p>
<p>给定若干个字符串和另一个字符串<code>S</code>，问<code>S</code>的能由上述字符串组成的最长的前缀的长度。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>普通的动态规划。刚才好像刚刚在Leetcode上做了一道很相似的题：<a href="https://leetcode.com/problems/word-break/description/" target="_blank" rel="noopener">139. Word Break</a></p>
<p>一种转移方法是从前转移：对于当前的字符串结尾，枚举所有前缀，找到能够和它匹配的，判断减去匹配部分之后的字符串能否被构成。</p>
<p>另一种转移方法则是向后转移：对于当前（可行的）字符串末尾，枚举所有前缀，找到能够和后面的字符串匹配的，然后记减去前缀后的字符串为可行。这种方法可以利用Trie来进行优化，比前一种更快。</p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<h3 id="普通的dp"><a class="markdownIt-Anchor" href="#普通的dp"></a> 普通的DP</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ID: zhanghu15</span></span><br><span class="line"><span class="comment">TASK: prefix</span></span><br><span class="line"><span class="comment">LANG: C++14</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; prefix;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> ok[<span class="number">200000</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">"prefix.out"</span>)</span></span>;</span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">"prefix.in"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> p;</span><br><span class="line">    <span class="keyword">while</span> (fin &gt;&gt; p) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p == <span class="string">"."</span>) <span class="keyword">break</span>;</span><br><span class="line">        prefix.push_back(p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="keyword">while</span> (fin &gt;&gt; p)</span><br><span class="line">        s += p;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> n = s.length(), m = prefix.size();</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// ok[i]：以i为结尾的字符串是否可行</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (prefix[j].size() - <span class="number">1</span> &gt; i) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (s.substr(i - prefix[j].size() + <span class="number">1</span>, prefix[j].size()) != prefix[j])</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (i == prefix[j].size() - <span class="number">1</span> || ok[i - prefix[j].size()]) &#123;</span><br><span class="line">                ok[i] = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ans = ok[i] ? i + <span class="number">1</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">    fout &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="普通的trie"><a class="markdownIt-Anchor" href="#普通的trie"></a> 普通的Trie</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ID: zhanghu15</span></span><br><span class="line"><span class="comment">TASK: prefix</span></span><br><span class="line"><span class="comment">LANG: C++14</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; prefix;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> f[<span class="number">200005</span>];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span> &#123;</span></span><br><span class="line">    TrieNode* ch[<span class="number">26</span>];</span><br><span class="line">    <span class="keyword">bool</span> isEnd;</span><br><span class="line">    TrieNode() &#123;</span><br><span class="line">        <span class="built_in">memset</span>(ch, <span class="number">0</span>, <span class="keyword">sizeof</span>(ch));</span><br><span class="line">        isEnd = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">"prefix.out"</span>)</span></span>;</span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">"prefix.in"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> pre;</span><br><span class="line">    TrieNode* root = <span class="keyword">new</span> TrieNode();</span><br><span class="line">    <span class="keyword">while</span> (fin &gt;&gt; pre) &#123;</span><br><span class="line">        <span class="keyword">if</span> (pre == <span class="string">"."</span>) <span class="keyword">break</span>;</span><br><span class="line">        prefix.push_back(pre);</span><br><span class="line">        TrieNode* p = root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c: pre) &#123;</span><br><span class="line">            <span class="keyword">if</span> (p-&gt;ch[c - <span class="string">'A'</span>] == <span class="literal">NULL</span>)</span><br><span class="line">                p-&gt;ch[c - <span class="string">'A'</span>] = <span class="keyword">new</span> TrieNode();</span><br><span class="line">            p = p-&gt;ch[c - <span class="string">'A'</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        p-&gt;isEnd = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> s, t;</span><br><span class="line">    <span class="keyword">while</span> (fin &gt;&gt; t)</span><br><span class="line">        s += t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n = s.length();</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// f[i]：以i结尾的字符串是否可行</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i != <span class="number">0</span> &amp;&amp; !f[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">        TrieNode* p = root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; n; j++) &#123;</span><br><span class="line">            p = p-&gt;ch[s[j] - <span class="string">'A'</span>];</span><br><span class="line">            <span class="keyword">if</span> (p == <span class="literal">NULL</span>) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span> (p-&gt;isEnd) f[j] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        <span class="keyword">if</span> (f[i])</span><br><span class="line">            ans = max(ans, i + <span class="number">1</span>);</span><br><span class="line">    fout &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/alg-Dynamic-Programming/"><i class="fas fa-hashtag fa-fw"></i>alg:Dynamic Programming</a>
                
                    <a href="/tags/USACO/"><i class="fas fa-hashtag fa-fw"></i>USACO</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/usaco-2-2-4-party-lamps/">
              
                  USACO 2.2.4: Party Lamps（枚举）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2019-01-30
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>见<a href="https://www.luogu.org/problemnew/show/P1468" target="_blank" rel="noopener">洛谷 P1468 派对灯 Party Lamps</a>。</p>
<p>有<code>N</code>盏灯和4个按钮：</p>
<ul>
<li>按钮1：按下后所有灯的状态都会改变</li>
<li>按钮2：按下后奇数编号的灯的状态会改变</li>
<li>按钮3：按下后偶数编号的灯的状态会改变</li>
<li>按钮4：按下后编号模3余1的灯的状态会改变</li>
</ul>
<p>所有灯起初都是打开的，给定一些灯的终止状态和总共按下按钮的次数，问是否存在对应的终态？如果可能，输出所有可能的终态。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>显然一个直觉是，同一个按钮只能按0或1次，按多了就和按的次数模2次效果是一样的。所以一共只有<code>2^4=16</code>种可能，枚举所有的可能，判断次数模2的取值是否相符以及各个灯的终态是否相符即可。</p>
<p>看了题解，发现这个直觉还不够厉害。事实上每6盏灯的状态都是重复的（6是2和3的公倍数）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">press 1: oooooooooooo -&gt; xxxxxxxxxxxx</span><br><span class="line">press 2: oooooooooooo -&gt; xoxoxoxoxoxo</span><br><span class="line">press 3: oooooooooooo -&gt; oxoxoxoxoxox</span><br><span class="line">press 4: oooooooooooo -&gt; xooxooxooxoo</span><br></pre></td></tr></table></figure>
<p>所以直接枚举6盏灯的状态就行了。同时可以得到一个推论，编号模6相等的灯的终态必定相同。</p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ID: zhanghu15</span></span><br><span class="line"><span class="comment">TASK: lamps</span></span><br><span class="line"><span class="comment">LANG: C++14</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> N, C;</span><br><span class="line"><span class="keyword">int</span> finalState[<span class="number">101</span>];</span><br><span class="line"><span class="keyword">bool</span> state[<span class="number">101</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; output;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">"lamps.out"</span>)</span></span>;</span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">"lamps.in"</span>)</span></span>;</span><br><span class="line">    fin &gt;&gt; N &gt;&gt; C;</span><br><span class="line">    <span class="built_in">memset</span>(finalState, <span class="number">-1</span>, <span class="keyword">sizeof</span>(finalState));</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">while</span> (fin &gt;&gt; x) &#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="number">-1</span>) <span class="keyword">break</span>;</span><br><span class="line">        finalState[x] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (fin &gt;&gt; x) &#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="number">-1</span>) <span class="keyword">break</span>;</span><br><span class="line">        finalState[x] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(state, <span class="number">1</span>, <span class="keyword">sizeof</span>(state));</span><br><span class="line">    <span class="comment">// 这里直接写了一个四层循环……</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> b1 = <span class="number">0</span>; b1 &lt; <span class="number">2</span>; b1++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (b1 == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line">                state[i] = !state[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> b2 = <span class="number">0</span>; b2 &lt; <span class="number">2</span>; b2++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (b2 == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i += <span class="number">2</span>)</span><br><span class="line">                    state[i] = !state[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> b3 = <span class="number">0</span>; b3 &lt; <span class="number">2</span>; b3++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (b3 == <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= N; i += <span class="number">2</span>)</span><br><span class="line">                        state[i] = !state[i];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> b4 = <span class="number">0</span>; b4 &lt; <span class="number">2</span>; b4++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (b4 == <span class="number">1</span>) &#123;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i += <span class="number">3</span>)</span><br><span class="line">                            state[i] = !state[i];</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (b1 + b2 + b3 + b4 &lt;= C &amp;&amp; (C - b1 - b2 - b3 - b4) % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="keyword">bool</span> ok = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (finalState[i] != <span class="number">-1</span> &amp;&amp; state[i] != finalState[i]) &#123;</span><br><span class="line">                                ok = <span class="literal">false</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (ok) &#123;</span><br><span class="line">                            <span class="built_in">string</span> s;</span><br><span class="line">                            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line">                                s += (<span class="keyword">char</span>)(state[i] + <span class="string">'0'</span>);</span><br><span class="line">                            output.push_back(s);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (b4 == <span class="number">1</span>) &#123;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i += <span class="number">3</span>)</span><br><span class="line">                            state[i] = !state[i];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (b3 == <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= N; i += <span class="number">2</span>)</span><br><span class="line">                        state[i] = !state[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (b2 == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i += <span class="number">2</span>)</span><br><span class="line">                    state[i] = !state[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (b1 == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line">                state[i] = !state[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 忘了这回事，于是错了一次……</span></span><br><span class="line">    <span class="keyword">if</span> (output.size() == <span class="number">0</span>) &#123;</span><br><span class="line">        fout &lt;&lt; <span class="string">"IMPOSSIBLE"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(output.begin(), output.end());</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; output.size(); i++)</span><br><span class="line">        fout &lt;&lt; output[i] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/USACO/"><i class="fas fa-hashtag fa-fw"></i>USACO</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/usaco-2-2-3-runaround-numbers/">
              
                  USACO 2.2.3: Runaround Numbers（数学）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2019-01-30
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>见<a href="https://www.luogu.org/problemnew/show/P1467" target="_blank" rel="noopener">洛谷 P1467 循环数 Runaround Numbers</a>。</p>
<p>定义循环数为满足以下条件的整数：</p>
<ul>
<li>各个数位都不重复</li>
<li>从最左边的数位开始进行如下操作：
<ul>
<li>向右循环数该数位对应的数字个数</li>
<li>然后从得到的数位开始继续数</li>
<li>在各个数位都（不重不漏地）开始数了一遍之后，会回到最开始的数</li>
</ul>
</li>
</ul>
<p>给定正整数<code>M</code>，问大于<code>M</code>的下一个循环数是多少？</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>按我惯常的习惯，肯定是先去<a href="https://oeis.org/" target="_blank" rel="noopener">OEIS</a>上查一查，不过结果是并没有。</p>
<p>做题的时候，我首先写了一个暴力判断某个数是否为循环数的代码。本来应该想想怎么优化（毕竟<code>M</code>据说最多9位，如果直接暴力挨个判断比<code>M</code>大的数会超时的吧），但是那天不知道哪根神经出了毛病，直接把暴力给交上去了。结果居然就过了，还挺快……？？</p>
<p>看了一眼测试数据，发现这范围跟说好的不一样啊，不是说<code>M</code>最多有9位吗，怎么这里最多只有7位？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">------- test 1 [length 3 bytes] ----</span><br><span class="line">99</span><br><span class="line">------- test 2 [length 7 bytes] ----</span><br><span class="line">111110</span><br><span class="line">------- test 3 [length 7 bytes] ----</span><br><span class="line">134259</span><br><span class="line">------- test 4 [length 7 bytes] ----</span><br><span class="line">348761</span><br><span class="line">------- test 5 [length 8 bytes] ----</span><br><span class="line">1000000</span><br><span class="line">------- test 6 [length 8 bytes] ----</span><br><span class="line">5000000</span><br><span class="line">------- test 7 [length 8 bytes] ----</span><br><span class="line">9000000</span><br></pre></td></tr></table></figure>
<p>仔细一想，我意识到，9位的循环数是不存在的：假设这样的循环数是存在的，因为要求各个数位不同，那么必须有一个数位为9；但是这个数位数了9位之后只会回到自己，没办法构成循环。由此还可以得到一个推论，<code>n</code>位的循环数中必然不存在数位<code>n</code>。所以，暴力代码能过这件事看起来就正常一点了。</p>
<p>但是为什么测试数据只有7位呢？我尝试把所有长度&lt;=9位的循环数都打印出来，结果得到的最大的数是9682415。所以，为什么8位的循环数也不存在呢？</p>
<p>我又仔细想了一下，发现8位的循环数确实不应该存在（而不是我的暴力写错了之类的）。由上面的推论可以得到，8位的循环数中没有8，因此只能是1-7和9这8个数字。假设有这样一个8位的循环数，我们从左侧的第<code>i</code>位出发，遍历了所有数位各一次后，当前的数位应该是<code>(i + 1 + 2 + .. + 7 + 9) % 8</code>，且这个数位应该还是第<code>i</code>位。问题是，<code>1 + 2 + .. + 7 + 9 = 37</code>，这样根本没办法回到原来的位的！所以8位的循环数必然是不存在的。由此还可以得出另一个推论，就是<code>n</code>位的循环数的数位之和必然模<code>n</code>余0。</p>
<hr>
<p>当然，比较正确（而不依靠随便乱交……）的做法是，枚举出所有长度为<code>n</code>且各个数位不相等的数，然后再判断它们是否为循环数——因为9!=362880，所以不会超时。</p>
<p>题解里还有一种比较神奇的做法——从<code>M</code>直接生成下一个各个数位都不相等的数，然后再判断它们是否为循环数。不过他到底是怎么生成下一个数的我就没细看了……</p>
<h2 id="分析-2"><a class="markdownIt-Anchor" href="#分析-2"></a> 分析</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ID: zhanghu15</span></span><br><span class="line"><span class="comment">TASK: runround</span></span><br><span class="line"><span class="comment">LANG: C++14</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">test</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> digits[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> cnt[<span class="number">10</span>];</span><br><span class="line">    <span class="built_in">memset</span>(cnt, <span class="number">0</span>, <span class="keyword">sizeof</span>(cnt));</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        digits[n++] = x % <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">if</span> (cnt[x % <span class="number">10</span>]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        cnt[x % <span class="number">10</span>]++;</span><br><span class="line">        x /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">bool</span> visited[<span class="number">10</span>];</span><br><span class="line">    <span class="built_in">memset</span>(visited, <span class="number">0</span>, <span class="keyword">sizeof</span>(visited));</span><br><span class="line">    <span class="keyword">int</span> cur = n - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        visited[cur] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">int</span> next = ((cur - digits[cur]) % n + n) % n;</span><br><span class="line">        <span class="keyword">if</span> (visited[next] &amp;&amp; i != n - <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        cur = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cur == n - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">"runround.out"</span>)</span></span>;</span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">"runround.in"</span>)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> M;</span><br><span class="line">    fin &gt;&gt; M;</span><br><span class="line">    <span class="keyword">for</span> (LL i = M + <span class="number">1</span>; i &lt;= (LL) <span class="number">1e10</span>; i++)</span><br><span class="line">        <span class="keyword">if</span> (test(i)) &#123;</span><br><span class="line">            fout &lt;&lt; i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/alg-Math/"><i class="fas fa-hashtag fa-fw"></i>alg:Math</a>
                
                    <a href="/tags/USACO/"><i class="fas fa-hashtag fa-fw"></i>USACO</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/usaco-2-2-2-subset-sums/">
              
                  USACO 2.2.2: Subset Sums（DP）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2019-01-30
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>见<a href="https://www.luogu.org/problemnew/show/P1466" target="_blank" rel="noopener">洛谷 P1466 集合 Subset Sums</a>。</p>
<p>将1到<code>N</code>的整数分成两个和相同的集合，问有多少种分法？</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>这道题其实是一道标准的经典DP（只要正确建模）。结果我一看数据范围只有39，第一反应是写了一个Meet-in-the-Middle出来。当然也不是不行……</p>
<p>DP的做法是这样的：把原问题换成，用1到<code>N</code>的整数之和表示某个数字，最多有多少种表示方法？然后思路就很简单了，用<code>f[i][j]</code>表示用前<code>i</code>个整数表示<code>j</code>的方法，<code>f[i][j] = f[i-1][j] + f[i-1][j-i]</code>。</p>
<p>然后我才意识到对<code>N</code>大小的限制主要是为了动态规划的其中一维不要太大……</p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<h3 id="dp"><a class="markdownIt-Anchor" href="#dp"></a> DP</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ID: zhanghu15</span></span><br><span class="line"><span class="comment">TASK: subset</span></span><br><span class="line"><span class="comment">LANG: C++14</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> N;</span><br><span class="line">LL f[<span class="number">40</span>][<span class="number">8000</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">"subset.out"</span>)</span></span>;</span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">"subset.in"</span>)</span></span>;</span><br><span class="line">    fin &gt;&gt; N;</span><br><span class="line">    <span class="keyword">int</span> sum = N * (N + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (sum % <span class="number">2</span> != <span class="number">0</span>) &#123;</span><br><span class="line">        fout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">8000</span>; j++) &#123;</span><br><span class="line">            f[i][j] = f[i<span class="number">-1</span>][j];</span><br><span class="line">            <span class="keyword">if</span> (j &gt;= i)</span><br><span class="line">                f[i][j] += f[i<span class="number">-1</span>][j-i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fout &lt;&lt; f[N][sum / <span class="number">2</span>] / <span class="number">2</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="meet-in-the-middle"><a class="markdownIt-Anchor" href="#meet-in-the-middle"></a> Meet-in-the-Middle</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ID: zhanghu15</span></span><br><span class="line"><span class="comment">TASK: subset</span></span><br><span class="line"><span class="comment">LANG: C++14</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">"subset.out"</span>)</span></span>;</span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">"subset.in"</span>)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    fin &gt;&gt; N;</span><br><span class="line">    <span class="keyword">int</span> sum = N * (N + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (sum % <span class="number">2</span> != <span class="number">0</span>) &#123;</span><br><span class="line">        fout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> halfSum = sum / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> halfN = N / <span class="number">2</span>;</span><br><span class="line">    <span class="comment">// Meet-in-the-Middle</span></span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; cntMap;</span><br><span class="line">    <span class="comment">// gather [1, halfN] sums</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="number">1</span> &lt;&lt; halfN); i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; halfN; j++)</span><br><span class="line">            <span class="keyword">if</span> (i &amp; (<span class="number">1</span> &lt;&lt; j))</span><br><span class="line">                sum += j + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; i &lt;&lt; ' ' &lt;&lt; sum &lt;&lt; endl;</span></span><br><span class="line">        cntMap[sum]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// gather [halfN+1, N] sums</span></span><br><span class="line">    LL ans = <span class="number">0</span>;  <span class="comment">// 注意数据范围……</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="number">1</span> &lt;&lt; (N - halfN)); i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; N - halfN; j++)</span><br><span class="line">            <span class="keyword">if</span> (i &amp; (<span class="number">1</span> &lt;&lt; j))</span><br><span class="line">                sum += j + halfN + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (cntMap.find(halfSum - sum) != cntMap.end()) &#123;</span><br><span class="line">            ans += cntMap[halfSum - sum];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fout &lt;&lt; ans / <span class="number">2</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/alg-Dynamic-Programming/"><i class="fas fa-hashtag fa-fw"></i>alg:Dynamic Programming</a>
                
                    <a href="/tags/USACO/"><i class="fas fa-hashtag fa-fw"></i>USACO</a>
                
                    <a href="/tags/alg-Meet-in-the-Middle/"><i class="fas fa-hashtag fa-fw"></i>alg:Meet in the Middle</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/usaco-2-2-1-preface-numbering/">
              
                  USACO 2.2.1: Preface Numbering
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2019-01-30
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>见<a href="https://www.luogu.org/problemnew/show/P1465" target="_blank" rel="noopener">洛谷 P1465 序言页码 Preface Numbering</a>。</p>
<p>求1到<code>N</code>的罗马数字表示中每个字母出现的次数。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>这道题出得有点令人无言以对（的简单）的感觉……总之做就是了。</p>
<p>罗马数字表示法和普通的十进制其实很类似，都是用单个数字来表示某个位，而且各个位的规律是差不多的。比如说，我们可以把一个四位的十进制数字这样分解：</p>
<ul>
<li>个位：<code>1 -&gt; I, 2 -&gt; II, 3 -&gt; III, 4 -&gt; IV, 5 -&gt; V, 6 -&gt; VI, 7 -&gt; VII, 8 -&gt; VIII, 9 -&gt; IX</code></li>
<li>十位：<code>1 -&gt; X, 2 -&gt; XX, 3 -&gt; XXX, 4 -&gt; XL, 5 -&gt; L, 6 -&gt; LX, 7 -&gt; LXX, 8 -&gt; LXXX, 9 -&gt; XC</code></li>
<li>百位：<code>1 -&gt; C, 2 -&gt; CC, 3 -&gt; CCC, 4 -&gt; CD, 5 -&gt; D, 6 -&gt; DC, 7 -&gt; DCC, 8 -&gt; DCCC, 9 -&gt; CM</code></li>
<li>千位：<code>1 -&gt; M, 2 -&gt; MM, 3 -&gt; MMM</code>（题目里没有更大的数字了）</li>
</ul>
<p>所以直接按照这个方法去分解就可以啦！</p>
<p>我写得非常暴力，考虑到各个位之间的规律性，可以写得稍微更简单一点。不过因为数组清零时写成了<code>sizeof(0)</code>WA了一次……</p>
<p>题解里有各种花式简化方法。</p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ID: zhanghu15</span></span><br><span class="line"><span class="comment">TASK: preface</span></span><br><span class="line"><span class="comment">LANG: C++14</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">"preface.out"</span>)</span></span>;</span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">"preface.in"</span>)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    fin &gt;&gt; N;</span><br><span class="line">    <span class="keyword">int</span> d[<span class="number">4</span>], n;</span><br><span class="line">    <span class="keyword">int</span> ci = <span class="number">0</span>, cv = <span class="number">0</span>, cx = <span class="number">0</span>, cl = <span class="number">0</span>, cc = <span class="number">0</span>, cd = <span class="number">0</span>, cm = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = i;</span><br><span class="line">        n = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(d, <span class="number">0</span>, <span class="keyword">sizeof</span>(d));</span><br><span class="line">        <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            d[n++] = x % <span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cm += d[<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (d[<span class="number">2</span>] == <span class="number">9</span>)  <span class="comment">// 900 = CM</span></span><br><span class="line">            cc++, cm++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">5</span> &lt; d[<span class="number">2</span>] &amp;&amp; d[<span class="number">2</span>] &lt; <span class="number">9</span>)  <span class="comment">// 800 = DCCC</span></span><br><span class="line">            cd++, cc += d[<span class="number">2</span>] - <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (d[<span class="number">2</span>] == <span class="number">5</span>)  <span class="comment">// 500 = D</span></span><br><span class="line">            cd++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (d[<span class="number">2</span>] == <span class="number">4</span>)  <span class="comment">// 400 = CD</span></span><br><span class="line">            cc++, cd++;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">// 300 = CCC</span></span><br><span class="line">            cc += d[<span class="number">2</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (d[<span class="number">1</span>] == <span class="number">9</span>)  <span class="comment">// 90 = XC</span></span><br><span class="line">            cx++, cc++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">5</span> &lt; d[<span class="number">1</span>] &amp;&amp; d[<span class="number">1</span>] &lt; <span class="number">9</span>)  <span class="comment">// 80 = LXXX</span></span><br><span class="line">            cl++, cx += d[<span class="number">1</span>] - <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (d[<span class="number">1</span>] == <span class="number">5</span>)  <span class="comment">// 50 = L</span></span><br><span class="line">            cl++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (d[<span class="number">1</span>] == <span class="number">4</span>)  <span class="comment">// 40 = XL</span></span><br><span class="line">            cx++, cl++;</span><br><span class="line">        <span class="keyword">else</span>  <span class="comment">// 30 = XXX</span></span><br><span class="line">            cx += d[<span class="number">1</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (d[<span class="number">0</span>] == <span class="number">9</span>)  <span class="comment">// 9 = IX</span></span><br><span class="line">            ci++, cx++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">5</span> &lt; d[<span class="number">0</span>] &amp;&amp; d[<span class="number">0</span>] &lt; <span class="number">9</span>)  <span class="comment">// 8 = VIII</span></span><br><span class="line">            cv++, ci += d[<span class="number">0</span>] - <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (d[<span class="number">0</span>] == <span class="number">5</span>)  <span class="comment">// 5 = V</span></span><br><span class="line">            cv++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (d[<span class="number">0</span>] == <span class="number">4</span>)  <span class="comment">// 4 = IV</span></span><br><span class="line">            ci++, cv++;</span><br><span class="line">        <span class="keyword">else</span>  <span class="comment">// 3 = III</span></span><br><span class="line">            ci += d[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ci &gt; <span class="number">0</span>) fout &lt;&lt; <span class="string">"I "</span> &lt;&lt; ci &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">if</span> (cv &gt; <span class="number">0</span>) fout &lt;&lt; <span class="string">"V "</span> &lt;&lt; cv &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">if</span> (cx &gt; <span class="number">0</span>) fout &lt;&lt; <span class="string">"X "</span> &lt;&lt; cx &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">if</span> (cl &gt; <span class="number">0</span>) fout &lt;&lt; <span class="string">"L "</span> &lt;&lt; cl &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">if</span> (cc &gt; <span class="number">0</span>) fout &lt;&lt; <span class="string">"C "</span> &lt;&lt; cc &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">if</span> (cd &gt; <span class="number">0</span>) fout &lt;&lt; <span class="string">"D "</span> &lt;&lt; cd &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">if</span> (cm &gt; <span class="number">0</span>) fout &lt;&lt; <span class="string">"M "</span> &lt;&lt; cm &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/USACO/"><i class="fas fa-hashtag fa-fw"></i>USACO</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/usaco-2-1-5-hamming-codes/">
              
                  USACO 2.1.5: Hamming Codes（枚举？）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2019-01-29
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>见<a href="https://www.luogu.org/problemnew/show/P1461" target="_blank" rel="noopener">P1461 海明码 Hamming Codes</a>。</p>
<p>找出<code>N</code>个数字，每个数字的长度均为<code>B</code>位，且每两个数之间的海明距离都至少为<code>D</code>。如果有多个解，则输出排序后值最小的解。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>当然，我可以直接写个<code>O(2^(2^B))</code>的枚举加剪枝，而且的确能过。不过这是因为数据太弱了，而且刻意出的这么弱。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">------- test 1 [length 7 bytes] ----</span><br><span class="line">16 7 3</span><br><span class="line">------- test 2 [length 6 bytes] ----</span><br><span class="line">2 7 7</span><br><span class="line">------- test 3 [length 6 bytes] ----</span><br><span class="line">3 6 4</span><br><span class="line">------- test 4 [length 6 bytes] ----</span><br><span class="line">5 5 1</span><br><span class="line">------- test 5 [length 7 bytes] ----</span><br><span class="line">10 8 4</span><br><span class="line">------- test 6 [length 7 bytes] ----</span><br><span class="line">20 6 2</span><br><span class="line">------- test 7 [length 7 bytes] ----</span><br><span class="line">32 5 1</span><br><span class="line">------- test 8 [length 7 bytes] ----</span><br><span class="line">50 8 2</span><br><span class="line">------- test 9 [length 7 bytes] ----</span><br><span class="line">60 7 2</span><br><span class="line">------- test 10 [length 7 bytes] ----</span><br><span class="line">16 8 3</span><br><span class="line">------- test 11 [length 7 bytes] ----</span><br><span class="line">15 8 4</span><br></pre></td></tr></table></figure>
<p>在上述测试数据下，暴力方法的运行时间为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Compiling...</span><br><span class="line">Compile: OK</span><br><span class="line"></span><br><span class="line">Executing...</span><br><span class="line">   Test 1: TEST OK [0.004 secs, 1388 KB]</span><br><span class="line">   Test 2: TEST OK [0.004 secs, 1308 KB]</span><br><span class="line">   Test 3: TEST OK [0.004 secs, 1328 KB]</span><br><span class="line">   Test 4: TEST OK [0.004 secs, 1392 KB]</span><br><span class="line">   Test 5: TEST OK [0.000 secs, 1312 KB]</span><br><span class="line">   Test 6: TEST OK [0.000 secs, 1292 KB]</span><br><span class="line">   Test 7: TEST OK [0.000 secs, 1304 KB]</span><br><span class="line">   Test 8: TEST OK [0.000 secs, 1292 KB]</span><br><span class="line">   Test 9: TEST OK [0.000 secs, 1304 KB]</span><br><span class="line">   Test 10: TEST OK [0.000 secs, 1392 KB]</span><br><span class="line">   Test 11: TEST OK [0.000 secs, 1308 KB]</span><br><span class="line"></span><br><span class="line">All tests OK.</span><br></pre></td></tr></table></figure>
<p>来个<code>N=64, B=8, D=4</code>这样的数据，暴力解法得跑到天荒地老。</p>
<p>我的一种想法是，把这<code>2^B</code>个数字当做图的结点，数字之间的海明距离当做边权来建图，然后这个问题就变成了类似于找最大团。但是问题是我们需要找的不只是一个最大团，而是一个排序后数字最小的最大团，好像就不符合一般的问题范畴了。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<p>总之今天也是不想学习最大团算法的一天……</p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<p>如果把每次的判断<code>__builtin_popcount(code[i] ^ next)</code>都换成查表，常数应该能减少一点，但是并不能改变这个算法复杂度实在太高的事实……</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ID: zhanghu15</span></span><br><span class="line"><span class="comment">TASK: hamming</span></span><br><span class="line"><span class="comment">LANG: C++14</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> N, B, D;</span><br><span class="line"><span class="keyword">int</span> code[<span class="number">64</span>];</span><br><span class="line"><span class="keyword">int</span> MAX;</span><br><span class="line"><span class="keyword">bool</span> found;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n == N) &#123;</span><br><span class="line">        found = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> next;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) next = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> next = code[n - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (; next &lt;= MAX; next++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (found) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">bool</span> ok = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (__builtin_popcount(code[i] ^ next) &lt; D) &#123;</span><br><span class="line">                ok = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!ok) <span class="keyword">continue</span>;</span><br><span class="line">        code[n] = next;</span><br><span class="line">        dfs(n + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">"hamming.out"</span>)</span></span>;</span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">"hamming.in"</span>)</span></span>;</span><br><span class="line">    fin &gt;&gt; N &gt;&gt; B &gt;&gt; D;</span><br><span class="line">    MAX = (<span class="number">1</span> &lt;&lt; B) - <span class="number">1</span>;</span><br><span class="line">    dfs(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        fout &lt;&lt; code[i];</span><br><span class="line">        <span class="keyword">if</span> (i % <span class="number">10</span> == <span class="number">9</span> || i == N - <span class="number">1</span>)</span><br><span class="line">            fout &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            fout &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://en.wikipedia.org/wiki/Clique_problem" target="_blank" rel="noopener">wikipedia - Clique problem</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/alg-Brute-Force/"><i class="fas fa-hashtag fa-fw"></i>alg:Brute Force</a>
                
                    <a href="/tags/USACO/"><i class="fas fa-hashtag fa-fw"></i>USACO</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/usaco-2-1-4-healthy-holsteins/">
              
                  USACO 2.1.4: Healthy Holsteins（枚举）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2019-01-29
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>见<a href="https://www.luogu.org/problemnew/show/P1460" target="_blank" rel="noopener">P1460 健康的荷斯坦奶牛 Healthy Holsteins</a>。</p>
<p>给定一些稻草（种类数量&lt;=15），每种稻草可以为奶牛提供若干数量的若干种维他命，问最少需要多少种稻草才能为奶牛提供足够的维他命？</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>我最开始以为这是一道01背包题，然后发现维他命有25种，25维的01背包可还行？最后发现原来稻草最多只有15种，那就直接<code>2^G</code>枚举好了。</p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<p>这次的枚举是用循环写的（而不是DFS之类）。但仔细想想，这个写法（专指这道题的写法）不怎么样，外面还加了一层处理稻草个数的循环。虽然这道题里可以把这个循环去掉然后手动判断稻草个数，但在其他很多状态DP里不如写成递归的……</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ID: zhanghu15</span></span><br><span class="line"><span class="comment">TASK: holstein</span></span><br><span class="line"><span class="comment">LANG: C++14</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> V;</span><br><span class="line"><span class="keyword">int</span> need[<span class="number">25</span>];</span><br><span class="line"><span class="keyword">int</span> sum[<span class="number">25</span>];</span><br><span class="line"><span class="keyword">int</span> G;</span><br><span class="line"><span class="keyword">int</span> scoop[<span class="number">15</span>][<span class="number">25</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">"holstein.out"</span>)</span></span>;</span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">"holstein.in"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    fin &gt;&gt; V;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; V; i++)</span><br><span class="line">        fin &gt;&gt; need[i];</span><br><span class="line">    fin &gt;&gt; G;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; V; j++)</span><br><span class="line">            fin &gt;&gt; scoop[i][j];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> num = <span class="number">1</span>; num &lt;= G; num++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; (<span class="number">1</span> &lt;&lt; G); x++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (__builtin_popcount(x) != num) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="built_in">memset</span>(sum, <span class="number">0</span>, <span class="keyword">sizeof</span>(sum));</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((x &amp; (<span class="number">1</span> &lt;&lt; i)) == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; V; j++)</span><br><span class="line">                    sum[j] += scoop[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">bool</span> ok = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; V; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (sum[i] &lt; need[i]) &#123;</span><br><span class="line">                    ok = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (ok) &#123;</span><br><span class="line">                fout &lt;&lt; num;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G; i++)</span><br><span class="line">                    <span class="keyword">if</span> (x &amp; (<span class="number">1</span> &lt;&lt; i))</span><br><span class="line">                        fout &lt;&lt; <span class="string">' '</span> &lt;&lt; i + <span class="number">1</span>;</span><br><span class="line">                fout &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/alg-Brute-Force/"><i class="fas fa-hashtag fa-fw"></i>alg:Brute Force</a>
                
                    <a href="/tags/USACO/"><i class="fas fa-hashtag fa-fw"></i>USACO</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
      

  </section>






  
      <br>
      <div class="prev-next">
          <div class="prev-next">
              
              <p class="current">
                  1 / 4
              </p>
              
                  <a class="next" rel="next" href="/tags/USACO/page/2/">
                      <section class="post next">
                          &nbsp;下一页&nbsp;<i class="fas fa-chevron-right" aria-hidden="true"></i>
                      </section>
                  </a>
              

          </div>
      </div>

  

  <!-- 根据主题中的设置决定是否在archive中针对摘要部分的MathJax公式加载mathjax.js文件 -->
  

  



        </div>
        <aside class='l_side'>
            
  
  
    
      
      
        <section class="author">
  <div class="content pure">
    
    
    
      <div class="social-wrapper">
        
          
            <a href="mailto:zhanghuimeng1997@gmail.com" class="social flat-btn" target="_blank" rel="external"><i class="social fas fa-envelope" aria-hidden="true"></i></a>
          
        
          
            <a href="https://github.com/zhanghuimeng" class="social flat-btn" target="_blank" rel="external"><i class="social fab fa-github" aria-hidden="true"></i></a>
          
        
          
            <a href="https://music.163.com/#/user/home?id=261028414" class="social flat-btn" target="_blank" rel="external"><i class="social fas fa-music" aria-hidden="true"></i></a>
          
        
      </div>
    
  </div>
</section>

      
    
  
    
      
      
        

      
    
  
    
      
      
        
  <section class="category">
    
<header class="pure">
  <div><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;所有分类</div>
  
</header>

    <div class="content pure">
      <ul class="entry">
        
          <li><a class="flat-box" title="/categories/Codeforces/" href="/categories/Codeforces/"><div class="name">Codeforces</div><div class="badge">(3)</div></a></li>
        
          <li><a class="flat-box" title="/categories/Leetcode/" href="/categories/Leetcode/"><div class="name">Leetcode</div><div class="badge">(9)</div></a></li>
        
          <li><a class="flat-box" title="/categories/USACO/" href="/categories/USACO/"><div class="name">USACO</div><div class="badge">(1)</div></a></li>
        
      </ul>
    </div>
  </section>


      
    
  
    
      
      
        
  <section class="tagcloud">
    
<header class="pure">
  <div><i class="fas fa-fire fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;热门标签</div>
  
</header>

    <div class="content pure">
      <a href="/tags/A-Munday/" style="font-size: 14px; color: #999">A.Munday</a> <a href="/tags/Blogging/" style="font-size: 14px; color: #999">Blogging</a> <a href="/tags/C-Marlowe/" style="font-size: 14px; color: #999">C.Marlowe</a> <a href="/tags/CSP/" style="font-size: 15.11px; color: #919191">CSP</a> <a href="/tags/Codeforces/" style="font-size: 19.56px; color: #737373">Codeforces</a> <a href="/tags/Codeforces-Contest/" style="font-size: 19.19px; color: #767676">Codeforces Contest</a> <a href="/tags/Counseling/" style="font-size: 14px; color: #999">Counseling</a> <a href="/tags/Cryptography/" style="font-size: 14px; color: #999">Cryptography</a> <a href="/tags/D-Drayton/" style="font-size: 14px; color: #999">D.Drayton</a> <a href="/tags/Deep-Learning/" style="font-size: 14px; color: #999">Deep Learning</a> <a href="/tags/Depth-first-Search/" style="font-size: 14px; color: #999">Depth-first Search</a> <a href="/tags/DigitCircuit/" style="font-size: 14px; color: #999">DigitCircuit</a> <a href="/tags/E-Vere/" style="font-size: 14px; color: #999">E. Vere</a> <a href="/tags/E-Spencer/" style="font-size: 14px; color: #999">E.Spencer</a> <a href="/tags/Essay/" style="font-size: 14.37px; color: #969696">Essay</a> <a href="/tags/Github/" style="font-size: 14.74px; color: #949494">Github</a> <a href="/tags/GoldenTreasury/" style="font-size: 23.26px; color: #5a5a5a">GoldenTreasury</a> <a href="/tags/H-Constable/" style="font-size: 14px; color: #999">H.Constable</a> <a href="/tags/J-Donne/" style="font-size: 14px; color: #999">J.Donne</a> <a href="/tags/J-Lyly/" style="font-size: 14px; color: #999">J.Lyly</a> <a href="/tags/J-Sylvester/" style="font-size: 14px; color: #999">J.Sylvester</a> <a href="/tags/J-Webster/" style="font-size: 14px; color: #999">J.Webster</a> <a href="/tags/Leetcode/" style="font-size: 24px; color: #555">Leetcode</a> <a href="/tags/Leetcode-Contest/" style="font-size: 23.63px; color: #585858">Leetcode Contest</a> <a href="/tags/Lyric/" style="font-size: 17.33px; color: #828282">Lyric</a> <a href="/tags/Machine-Learning/" style="font-size: 15.11px; color: #919191">Machine Learning</a> <a href="/tags/Machine-Translation/" style="font-size: 16.59px; color: #878787">Machine Translation</a> <a href="/tags/Natural-Language-Processing/" style="font-size: 17.33px; color: #828282">Natural Language Processing</a> <a href="/tags/OS/" style="font-size: 21.78px; color: #646464">OS</a> <a href="/tags/OSTEP/" style="font-size: 18.07px; color: #7d7d7d">OSTEP</a> <a href="/tags/OldBlog/" style="font-size: 15.11px; color: #919191">OldBlog</a> <a href="/tags/P-Sidney/" style="font-size: 14px; color: #999">P.Sidney</a> <a href="/tags/Paper/" style="font-size: 16.59px; color: #878787">Paper</a> <a href="/tags/Paul-Simon/" style="font-size: 14px; color: #999">Paul Simon</a> <a href="/tags/PhysicsExperiment/" style="font-size: 14.37px; color: #969696">PhysicsExperiment</a> <a href="/tags/Psychology/" style="font-size: 14px; color: #999">Psychology</a> <a href="/tags/Quality-Estimation/" style="font-size: 15.48px; color: #8f8f8f">Quality Estimation</a> <a href="/tags/R-Barnfield/" style="font-size: 14px; color: #999">R.Barnfield</a> <a href="/tags/Raspberry-Pi/" style="font-size: 14px; color: #999">Raspberry Pi</a> <a href="/tags/Reading-Report/" style="font-size: 17.7px; color: #808080">Reading Report</a> <a href="/tags/S-Daniel/" style="font-size: 14px; color: #999">S.Daniel</a> <a href="/tags/SGU/" style="font-size: 14.37px; color: #969696">SGU</a> <a href="/tags/Sonnet/" style="font-size: 20.67px; color: #6c6c6c">Sonnet</a> <a href="/tags/Spokes/" style="font-size: 14.74px; color: #949494">Spokes</a> <a href="/tags/SystemAnalysis-Control/" style="font-size: 14px; color: #999">SystemAnalysis&Control</a> <a href="/tags/T-Dekker/" style="font-size: 14px; color: #999">T.Dekker</a> <a href="/tags/T-Heywood/" style="font-size: 14px; color: #999">T.Heywood</a> <a href="/tags/T-Lodge/" style="font-size: 14px; color: #999">T.Lodge</a> <a href="/tags/T-Nashe/" style="font-size: 14px; color: #999">T.Nashe</a> <a href="/tags/T-Wyatt/" style="font-size: 14px; color: #999">T.Wyatt</a> <a href="/tags/THUMT/" style="font-size: 14.37px; color: #969696">THUMT</a> <a href="/tags/TensorFlow/" style="font-size: 15.11px; color: #919191">TensorFlow</a> <a href="/tags/Translation/" style="font-size: 18.44px; color: #7b7b7b">Translation</a> <a href="/tags/Tree/" style="font-size: 14px; color: #999">Tree</a> <a href="/tags/USACO/" style="font-size: 22.52px; color: #5f5f5f">USACO</a> <a href="/tags/W-Alexander/" style="font-size: 14px; color: #999">W.Alexander</a> <a href="/tags/W-Drummond/" style="font-size: 15.11px; color: #919191">W.Drummond</a> <a href="/tags/W-Shakespeare/" style="font-size: 22.15px; color: #626262">W.Shakespeare</a> <a href="/tags/object-Object/" style="font-size: 14px; color: #999">[object Object]</a> <a href="/tags/alg-Array/" style="font-size: 21.04px; color: #696969">alg:Array</a> <a href="/tags/alg-Automata/" style="font-size: 14px; color: #999">alg:Automata</a> <a href="/tags/alg-Backtracking/" style="font-size: 15.85px; color: #8c8c8c">alg:Backtracking</a> <a href="/tags/alg-Binary-Indexed-Tree/" style="font-size: 14px; color: #999">alg:Binary Indexed Tree</a> <a href="/tags/alg-Binary-Search/" style="font-size: 15.48px; color: #8f8f8f">alg:Binary Search</a> <a href="/tags/alg-Binary-Search-Tree/" style="font-size: 16.59px; color: #878787">alg:Binary Search Tree</a> <a href="/tags/alg-Binray-Search/" style="font-size: 14px; color: #999">alg:Binray Search</a> <a href="/tags/alg-Bit-Manipulation/" style="font-size: 15.48px; color: #8f8f8f">alg:Bit Manipulation</a> <a href="/tags/alg-Bitmasks/" style="font-size: 14px; color: #999">alg:Bitmasks</a> <a href="/tags/alg-Breadth-first-Search/" style="font-size: 17.33px; color: #828282">alg:Breadth-first Search</a> <a href="/tags/alg-Breadth-firth-Search/" style="font-size: 14.37px; color: #969696">alg:Breadth-firth Search</a> <a href="/tags/alg-Brute-Force/" style="font-size: 16.96px; color: #858585">alg:Brute Force</a> <a href="/tags/alg-Centroid-Decomposition/" style="font-size: 14px; color: #999">alg:Centroid Decomposition</a> <a href="/tags/alg-Depth-first-Search/" style="font-size: 20.3px; color: #6e6e6e">alg:Depth-first Search</a> <a href="/tags/alg-Divide-and-Conquer/" style="font-size: 14px; color: #999">alg:Divide and Conquer</a> <a href="/tags/alg-Dynamic-Porgramming/" style="font-size: 14px; color: #999">alg:Dynamic Porgramming</a> <a href="/tags/alg-Dynamic-Programming/" style="font-size: 21.04px; color: #696969">alg:Dynamic Programming</a> <a href="/tags/alg-Games/" style="font-size: 14px; color: #999">alg:Games</a> <a href="/tags/alg-Geometry/" style="font-size: 14px; color: #999">alg:Geometry</a> <a href="/tags/alg-Graph/" style="font-size: 15.48px; color: #8f8f8f">alg:Graph</a> <a href="/tags/alg-Greedy/" style="font-size: 21.41px; color: #676767">alg:Greedy</a> <a href="/tags/alg-Hash-Table/" style="font-size: 20.67px; color: #6c6c6c">alg:Hash Table</a> <a href="/tags/alg-Heap/" style="font-size: 15.11px; color: #919191">alg:Heap</a> <a href="/tags/alg-In-Order-Traversal/" style="font-size: 14.37px; color: #969696">alg:In-Order Traversal</a> <a href="/tags/alg-Linked-List/" style="font-size: 15.48px; color: #8f8f8f">alg:Linked List</a> <a href="/tags/alg-Math/" style="font-size: 22.89px; color: #5d5d5d">alg:Math</a> <a href="/tags/alg-Matrix/" style="font-size: 14px; color: #999">alg:Matrix</a> <a href="/tags/alg-Meet-in-the-Middle/" style="font-size: 14.37px; color: #969696">alg:Meet in the Middle</a> <a href="/tags/alg-Minimax/" style="font-size: 14px; color: #999">alg:Minimax</a> <a href="/tags/alg-Monotonic-Stack/" style="font-size: 15.48px; color: #8f8f8f">alg:Monotonic Stack</a> <a href="/tags/alg-Priority-Queue/" style="font-size: 14px; color: #999">alg:Priority Queue</a> <a href="/tags/alg-Queue/" style="font-size: 14.74px; color: #949494">alg:Queue</a> <a href="/tags/alg-Random/" style="font-size: 14.74px; color: #949494">alg:Random</a> <a href="/tags/alg-Recursion/" style="font-size: 15.48px; color: #8f8f8f">alg:Recursion</a> <a href="/tags/alg-Recursive/" style="font-size: 14.37px; color: #969696">alg:Recursive</a> <a href="/tags/alg-Rejection-Sampling/" style="font-size: 14px; color: #999">alg:Rejection Sampling</a> <a href="/tags/alg-Reservoir-Sampling/" style="font-size: 14px; color: #999">alg:Reservoir Sampling</a> <a href="/tags/alg-Segmentation-Tree/" style="font-size: 14px; color: #999">alg:Segmentation Tree</a> <a href="/tags/alg-Set/" style="font-size: 14px; color: #999">alg:Set</a> <a href="/tags/alg-Sort/" style="font-size: 14.74px; color: #949494">alg:Sort</a> <a href="/tags/alg-Stack/" style="font-size: 18.44px; color: #7b7b7b">alg:Stack</a> <a href="/tags/alg-String/" style="font-size: 18.81px; color: #787878">alg:String</a> <a href="/tags/alg-Topological-Sort/" style="font-size: 14px; color: #999">alg:Topological Sort</a> <a href="/tags/alg-Tree/" style="font-size: 19.93px; color: #717171">alg:Tree</a> <a href="/tags/alg-Trie/" style="font-size: 14px; color: #999">alg:Trie</a> <a href="/tags/alg-Two-Pointers/" style="font-size: 18.07px; color: #7d7d7d">alg:Two Pointers</a> <a href="/tags/alg-Union-find-Forest/" style="font-size: 15.48px; color: #8f8f8f">alg:Union-find Forest</a> <a href="/tags/artist-Ceremony/" style="font-size: 14px; color: #999">artist:Ceremony</a> <a href="/tags/artist-Cruel-Hand/" style="font-size: 14.37px; color: #969696">artist:Cruel Hand</a> <a href="/tags/artist-Have-Heart/" style="font-size: 14px; color: #999">artist:Have Heart</a> <a href="/tags/artist-Johnny-Cash/" style="font-size: 14px; color: #999">artist:Johnny Cash</a> <a href="/tags/artist-Touche-Amore/" style="font-size: 14px; color: #999">artist:Touche Amore</a> <a href="/tags/artist-Wir-Sind-Helden/" style="font-size: 14.74px; color: #949494">artist:Wir Sind Helden</a> <a href="/tags/translation/" style="font-size: 14px; color: #999">translation</a> <a href="/tags/ucore/" style="font-size: 14px; color: #999">ucore</a> <a href="/tags/付勇林/" style="font-size: 15.85px; color: #8c8c8c">付勇林</a> <a href="/tags/卞之琳/" style="font-size: 14px; color: #999">卞之琳</a> <a href="/tags/屠岸/" style="font-size: 16.22px; color: #8a8a8a">屠岸</a> <a href="/tags/戴镏龄/" style="font-size: 15.85px; color: #8c8c8c">戴镏龄</a> <a href="/tags/曹明伦/" style="font-size: 15.48px; color: #8f8f8f">曹明伦</a> <a href="/tags/朱生豪/" style="font-size: 17.7px; color: #808080">朱生豪</a> <a href="/tags/李霁野/" style="font-size: 15.11px; color: #919191">李霁野</a> <a href="/tags/杨熙龄/" style="font-size: 14px; color: #999">杨熙龄</a> <a href="/tags/林天斗/" style="font-size: 14px; color: #999">林天斗</a> <a href="/tags/梁宗岱/" style="font-size: 16.96px; color: #858585">梁宗岱</a> <a href="/tags/梁葆成/" style="font-size: 14px; color: #999">梁葆成</a> <a href="/tags/袁广达/" style="font-size: 14px; color: #999">袁广达</a> <a href="/tags/郭沫若/" style="font-size: 14px; color: #999">郭沫若</a> <a href="/tags/黄新渠/" style="font-size: 14px; color: #999">黄新渠</a>
    </div>
  </section>


      
    
  
    
      
      
        <section class="list">
  
<header class="pure">
  <div><i class="fas fa-link fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;特别链接</div>
  
</header>

  <div class="content pure">
    <ul class="entry">
      
        <li><a class="flat-box" title="https://wenj.github.io/" href="https://wenj.github.io/">
          <div class="name">
            
              <i class="fas fa-comment-dots fa-fw" aria-hidden="true"></i>
            
            &nbsp;&nbsp;wenj
          </div>
          
        </a></li>
      
        <li><a class="flat-box" title="http://bellasong.site/" href="http://bellasong.site/">
          <div class="name">
            
              <i class="fas fa-comment-dots fa-fw" aria-hidden="true"></i>
            
            &nbsp;&nbsp;ssh
          </div>
          
        </a></li>
      
    </ul>
  </div>
</section>

      
    
  


        </aside>
        <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
    </div>
    <footer id="footer" class="clearfix">
  
  
    <div class="social-wrapper">
      
        
          <a href="mailto:zhanghuimeng1997@gmail.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external"></a>
        
      
        
          <a href="https://github.com/zhanghuimeng" class="social fab fa-github flat-btn" target="_blank" rel="external"></a>
        
      
        
          <a href="https://music.163.com/#/user/home?id=261028414" class="social fas fa-music flat-btn" target="_blank" rel="external"></a>
        
      
    </div>
  
  <br>
  <div><p>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
  <div>本站使用 <a href="https://xaoxuu.com/wiki/material-x/" target="_blank" class="codename">Material X</a> 作为主题，总访问量为 <span id="busuanzi_value_site_pv"><i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span> 次。
  </div>
</footer>

    <script>setLoadingBarProgress(80);</script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>

  <script>
    var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
    var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
    var ALGOLIA_API_KEY = "";
    var ALGOLIA_APP_ID = "";
    var ALGOLIA_INDEX_NAME = "";
    var AZURE_SERVICE_NAME = "";
    var AZURE_INDEX_NAME = "";
    var AZURE_QUERY_KEY = "";
    var BAIDU_API_ID = "";
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/"||"/";
    if(!ROOT.endsWith('/'))ROOT += '/';
  </script>


  
    <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.5/dist/scrollreveal.min.js"></script>
    <script type="text/javascript">
      $(function() {
        const $reveal = $('.reveal');
    		if ($reveal.length === 0) return;
    		const sr = ScrollReveal({ distance: 0 });
    		sr.reveal('.reveal');
      });
    </script>
  
  
    <script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>
    <script type="text/javascript">
      $(function() {
        Waves.attach('.flat-btn', ['waves-button']);
        Waves.attach('.float-btn', ['waves-button', 'waves-float']);
        Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
        Waves.attach('.flat-box', ['waves-block']);
        Waves.attach('.float-box', ['waves-block', 'waves-float']);
        Waves.attach('.waves-image');
        Waves.init();
      });
    </script>
  
  
    <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>
  
  
  


  
  
  
    
  
  
    <script src="/js/app.js"></script>
<script src="/js/search.js"></script>
  








    <script>setLoadingBarProgress(100);</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>

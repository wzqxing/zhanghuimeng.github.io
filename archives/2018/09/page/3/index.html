<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>Archives: 2018/9 | 张慕晖的博客</title>
  
  

  <link rel="alternate" href="/atom.xml" title="张慕晖的博客">

  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- meta -->
  
  <!-- link -->
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.6.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.1/katex.min.css">

  
  
  <link rel="undefined" href>
  
  

  


  
  <link rel="stylesheet" href="/style.css">
  

  



  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
    <!-- ga -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-119345306-1', 'https://zhanghuimeng.github.io/');
      ga('send', 'pageview');
    </script><!-- hexo-inject:begin --><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css'><!-- hexo-inject:end -->
  
  
</head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="loading-bar-wrapper">
  <div id="loading-bar" class="pure"></div>
</div>

    <script>setLoadingBarProgress(20)</script>
    <header class="l_header pure">
	<div class="wrapper">
		<div class="nav-main container container--flex">
      <a class="logo flat-box" href="/">
        
          张慕晖的博客
        
      </a>
			<div class="menu">
				<ul class="h-list">
          
  					
  						<li>
								<a id="https:zhanghuimeng.github.io" class="nav flat-box" href="https://zhanghuimeng.github.io/">
									<i class="fas fa-home fa-fw"></i>&nbsp;主页
								</a>
							</li>
      			
  						<li>
								<a id="tags" class="nav flat-box" href="/tags/">
									<i class="fas fa-rss fa-fw"></i>&nbsp;标签
								</a>
							</li>
      			
  						<li>
								<a id="archives" class="nav flat-box" href="/archives/">
									<i class="fas fa-archive fa-fw"></i>&nbsp;归档
								</a>
							</li>
      			
  						<li>
								<a id="categories" class="nav flat-box" href="/categories/">
									<i class="fas fa-users fa-fw"></i>&nbsp;分类
								</a>
							</li>
      			
      		
				</ul>
			</div>

			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="搜索">
						<span class="icon"><i class="fas fa-search fa-fw"></i></span>
					</form>
				</div>
			
			<ul class="switcher h-list">
				
					<li class="s-search"><a class="fas fa-search fa-fw" href="javascript:void(0)"></a></li>
				
				<li class="s-menu"><a class="fas fa-bars fa-fw" href="javascript:void(0)"></a></li>
			</ul>
		</div>

		<div class="nav-sub container container--flex">
			<a class="logo flat-box"></a>
			<ul class="switcher h-list">
				<li class="s-comment"><a class="flat-btn fas fa-comments fa-fw" href="javascript:void(0)"></a></li>
				<li class="s-toc"><a class="flat-btn fas fa-list fa-fw" href="javascript:void(0)"></a></li>
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone">
    <header>
		<nav class="menu">
      <ul>
          
              
                  <li>
										<a id="https:zhanghuimeng.github.io" class="nav flat-box" href="https://zhanghuimeng.github.io/">
											<i class="fas fa-home fa-fw"></i>&nbsp;主页
										</a>
                  </li>
              
                  <li>
										<a id="tags" class="nav flat-box" href="/tags/">
											<i class="fas fa-rss fa-fw"></i>&nbsp;标签
										</a>
                  </li>
              
                  <li>
										<a id="archives" class="nav flat-box" href="/archives/">
											<i class="fas fa-archive fa-fw"></i>&nbsp;归档
										</a>
                  </li>
              
                  <li>
										<a id="categories" class="nav flat-box" href="/categories/">
											<i class="fas fa-users fa-fw"></i>&nbsp;分类
										</a>
                  </li>
              
       
      </ul>
		</nav>
    </header>
	</aside>

    <script>setLoadingBarProgress(40);</script>
    <div class="l_body">
    <div class='container clearfix'>
        <div class='l_main'>
            
	
    <script>
        window.subData= { title:'year : 2018.9'}
    </script>




  <section class="post-list">
      



      

      

      
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/leetcode-901-online-stock-span/">
              
                  Leetcode 901. Online Stock Span（栈）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-15
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="https://leetcode.com/problems/online-stock-span/description/" target="_blank" rel="noopener">https://leetcode.com/problems/online-stock-span/description/</a></p>
<p>标记难度：Medium</p>
<p>提交次数：1/1</p>
<p>代码效率：19.81%</p>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>给定一个整数数组，为每一个数求出以它为结尾的满足这一条件的连续子数组的最大长度：其余的数都比它更小。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>比赛的时候显然我没有做出来这道题，心态崩了。我大概是想出了一个合理的离线方法，但这道题强制要求在线。我当时只能想出<code>O(n^2)</code>的暴力在线方法，没看出来什么递推的方法简化时间复杂度。或者说我就没见过这个类型的题目……</p>
<hr>
<h3 id="离线算法1排序"><a class="markdownIt-Anchor" href="#离线算法1排序"></a> 离线算法1：排序</h3>
<p>如果这道题是离线的话，我想出了这样一种做法：</p>
<ul>
<li>首先把所有数和它们原来的<code>index</code>进行排序</li>
<li>然后按数值大小遍历所有数，并维护一棵存放<code>index</code>的BST；对于每个数，在该BST中查找自己的<code>index</code>的前驱，前驱和自己的<code>index</code>之间的距离（有相同数值时需要特殊处理）；最后把自己的<code>index</code>插入树中</li>
</ul>
<p>时间复杂度是<code>O(n * log(n))</code>。</p>
<h3 id="离线算法2递归"><a class="markdownIt-Anchor" href="#离线算法2递归"></a> 离线算法2：递归</h3>
<p>事实上通过仔细观察是可以进行一定程度的递推的。这一点我觉得题解就写得不错。假定当前的数组是这样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array = [11, 3, 9, 5, 6, 4]</span><br><span class="line">len   = [ 1, 1, 2, 1, 2, 1]</span><br></pre></td></tr></table></figure>
<p>对于下一个元素<code>x</code>：</p>
<ul>
<li>如果<code>x &lt; last</code>，则<code>len[x] = 1</code></li>
<li>如果<code>x == last</code>，则<code>len[x] = len[last] + 1</code></li>
<li>如果<code>x &gt; last</code>，则需要在前面的元素中找到比<code>x</code>大的最后一个元素。不过，因为<code>x &gt; last</code>，所以需要找到的元素必然也比<code>last</code>更大。所以对于每一个元素，只有前面比它更大的元素在递推中才有意义。</li>
</ul>
<p>但是这么想还不够好，因为显然元素的大小可能是随机的，对于不同的元素，“前面比它更大的元素”这个集合在动态变化，并不能直接进行递推。</p>
<p>再重新观察一下上面的例子，查看一下每个元素覆盖的具体子序列：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array =     [ 11, 3 , 9 , 5 , 6 , 4 ]</span><br><span class="line">Element 11    +</span><br><span class="line">Element 3         +</span><br><span class="line">Element 9         +   +</span><br><span class="line">Element 5                 +</span><br><span class="line">Element 6                 +   +</span><br><span class="line">Element 4                         +</span><br></pre></td></tr></table></figure>
<p>一个有趣的问题是，可以试图从这些元素中选择出一部分，使得它们各自的子序列恰好可以拼成这个完整的数组。选择的方法是，先选出数组中最大的数，再选出数组中在这个数之后最大的数，再选出在这个数之后最大的数……直到选到最后一个数。在这个例子中，选出的就是<code>11, 9, 6, 4</code>。它们对应的子序列的长度就是到前一个数的距离。</p>
<p>那么在选出来的数中间的那些数怎么办呢？事实上，这个时候我们已经得到了一个子问题的结构。通过上述选择过程可以看出，夹在选出来的数中间的数必然比两边的数小，也就是说它们的子序列长度和周围的数没有任何关系。</p>
<p>但这仍然是一个离线算法，而且时间复杂度也很成问题。</p>
<h3 id="在线算法栈"><a class="markdownIt-Anchor" href="#在线算法栈"></a> 在线算法：栈</h3>
<p>事实上我刚才写了那么多字，主要是为了试图解释这个算法为何是合理的——因为我看到题解的时候，实在是不知道为什么能这么做。不过现在我觉得我已经可以给出一个合理的答案了。刚才已经得到了一个子问题的结构。虽然看起来好像一次选择可能会把数组划分成好几个子问题（事实上也是这样），但实际上并没有把这个问题递归化的必要——因为分割前的元素的结果不依赖于子问题的结果，对吧。所以只要能合理地划分子问题，就可以用任意合理的顺序来解决子问题——比如顺序解决。</p>
<p>我想，栈的作用就是这样的。在加入每个元素之前，把比它小的元素都弹出来。此时栈中实际上顺序保存了一些子问题的元素。（我发现很难描述到底保存了哪些元素……）弹出的过程相当于解决了当前层次的所有子问题。题解中只说“关注递增的元素”，但并没有解释怎么关注递增的元素这个问题。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<p>PS. 这道题和<a href="/post/leetcode-739-daily-temperatures">Leetcode 739</a>基本上是一样的，看来我还是见得少了。</p>
<p>2018.9.16 UPDATE：通过今天的比赛题<a href="/post/leetcode-907-sum-of-subarray-minimums">Leetcode 907</a>，我意识到了一个问题，这个算法比我想象得要更强一些。对于被某个数从栈中弹出的数而言，它右侧第一个比它大的数就是这个数。所以一个方向的一次使用栈的操作可以同时解决两侧的问题。</p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<p>只实现了在线算法（显然只能这样）。</p>
<h3 id="在线算法栈-2"><a class="markdownIt-Anchor" href="#在线算法栈-2"></a> 在线算法：栈</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StockSpanner</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">stack</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; s;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    StockSpanner() &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">next</span><span class="params">(<span class="keyword">int</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (!s.empty() &amp;&amp; s.top().first &lt;= price) &#123;</span><br><span class="line">            sum += s.top().second;</span><br><span class="line">            s.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        s.emplace(price, sum);</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://leetcode.com/problems/online-stock-span/solution/" target="_blank" rel="noopener">Leetcode 901 Solution</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Leetcode/"><i class="fas fa-hashtag fa-fw"></i>Leetcode</a>
                
                    <a href="/tags/alg-Stack/"><i class="fas fa-hashtag fa-fw"></i>alg:Stack</a>
                
                    <a href="/tags/Leetcode-Contest/"><i class="fas fa-hashtag fa-fw"></i>Leetcode Contest</a>
                
                    <a href="/tags/alg-Monotonic-Stack/"><i class="fas fa-hashtag fa-fw"></i>alg:Monotonic Stack</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/about-translating-paul-simon-s-lyrics/">
              
                  About Translating Paul Simon&#39;s Lyrics
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-13
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>It seems that English is the universal language for Business, Science, Entertainment and (to some extent) even Literature now. Maybe it is not immediately obvious to many native English speakers that, how big the advantage they have over other language speakers - especially the languages not belonging to the Indo-European Family (that means their monther tongues are less similar to English). As far as I am concerned, it is still quite hard for an average Chinese undergraduate to understand serious English content (I mean, things like <em>The Economist</em> or <em>The New Yorker</em>…), let alone literature works or modern poems. (Yeah, I am camparing Simon’s lyrics to modern poems. And I know there are simpler works like <em>Charlotte’s Web</em>, but here I mean books like <em>Pride and Prejudice</em>.) What’s more, only less than ten percent of Chinese polulation has gone to university. (According to a recent statistic)</p>
<p>So, as a result, translation has been thriving here in China, especially after the Internet came into being. All kinds of fun materials - films, news, songs, jokes, twitters, reddits, quoras, and so on - are in English. And the GFW makes the segregating situation worse. (Sorry to tell you that, your whole blog is blocked in China. That’s because blogspot is a google service. Or I think more Chinese fans would come here and try to grab some song meanings.) So some people with good English skills (and good “wall-climbing” skills shh…) would translate the things they are interested in and “carry these materials back inside the walls”. (Here by “the wall”, I mean the GFW, or the language barrier, or both.)</p>
<p>So it goes with song lyrics translation. The most popular music software here, <a href="https://music.163.com/" target="_blank" rel="noopener">Netease Cloud Music</a> (this software is quite like Spotify, but I think it cannot be accessed out of China…), has special settings for “Foreign Language Songs”: users can upload the Chinese translation of the original lyrics. If an English song has no Chinese translation, then very few people would bother to listen to it, because they won’t be able to know what the song is talking about. So, if you like a song very much, but it has no translation, the best thing you can do for it is to <strong>translate</strong> the lyrics.</p>
<p>Well, I think I’ve said quite enough for the general “translation”. Now let’s talk about translations for Paul Simon’s lyrics.</p>
<hr>
<p>In China, Simon’s most famous songs are <em>Scarborough Fair</em> and <em>The Sound of Silence</em>. Everyone knows about these two songs (while most of them having no idea about S &amp; G, or Simon’s other works). So there are many versions of lyric translation for these two songs. One of the most creative ones is <a href="http://www.overseaswindow.com/node/7424" target="_blank" rel="noopener">this Scarborough Fair translation</a>, paraphrasing the ballad into an very old Chinese poetry style, <a href="https://en.wikipedia.org/wiki/Classic_of_Poetry" target="_blank" rel="noopener">The Classic of Poetry</a> style:</p>
<table>
<thead>
<tr>
<th>Lyric</th>
<th>Translation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Are you going to Scarborough Fair</td>
<td>問爾所之，是否如適</td>
</tr>
<tr>
<td>Parsely sage rosemary and thyme</td>
<td>蕙蘭芫荽，郁郁香芷</td>
</tr>
<tr>
<td>Remember me to one who lives there</td>
<td>彼方淑女，憑君寄辭</td>
</tr>
<tr>
<td>She once was a true love of mine</td>
<td>伊人曾在，與我相知</td>
</tr>
</tbody>
</table>
<p>However I prefer a more literal translation than this free one. One of the problems is that, I think the original words are modern English (or something very close), but the translation is in <a href="https://en.wikipedia.org/wiki/Classical_Chinese" target="_blank" rel="noopener">Classic Chinese</a>.</p>
<p>As of other songs, I’ll give some translations that I quite like as an example. However, they might not be perfect.</p>
<p>Here is a translation of <em>April Come She Will</em> by <a href="https://music.163.com/#/user/home?id=82899050" target="_blank" rel="noopener">灾难艺术家小魏</a> (It seems that he makes music himself!):</p>
<table>
<thead>
<tr>
<th>Lyric</th>
<th>Translation</th>
</tr>
</thead>
<tbody>
<tr>
<td>April come she will</td>
<td>四月，她将到来</td>
</tr>
<tr>
<td>When streams are ripe and swelled with rain;</td>
<td>溪流如同佳酿，雨水融入其中</td>
</tr>
<tr>
<td>May, she will stay</td>
<td>五月，她将停歇</td>
</tr>
<tr>
<td>Resting in my arms again</td>
<td>于我怀中休憩</td>
</tr>
<tr>
<td>June, she′ll change her tune,</td>
<td>六月，她将唱起新的歌谣</td>
</tr>
<tr>
<td>In restless walks she′ll prowl the night;</td>
<td>在无眠的夜里隐匿行踪</td>
</tr>
<tr>
<td>July, she will fly</td>
<td>七月，她将翱翔</td>
</tr>
<tr>
<td>And give no warning to her flight.</td>
<td>展翅高飞毫无顾虑</td>
</tr>
<tr>
<td>August, die she must,</td>
<td>八月，她必须消逝</td>
</tr>
<tr>
<td>The autumn winds blow chilly and cold;</td>
<td>秋风飕飕寒冷刺骨</td>
</tr>
<tr>
<td>September I′ll remember.</td>
<td>九月，我将怀念</td>
</tr>
<tr>
<td>A love once new has now grown old.</td>
<td>曾经鲜活如今苍白的爱情</td>
</tr>
</tbody>
</table>
<p>And here is a translation of <em>Bookends Theme (Reprise)</em> by <a href="https://music.163.com/#/user/home?id=7591069" target="_blank" rel="noopener">无为世界</a>:</p>
<table>
<thead>
<tr>
<th>Lyric</th>
<th>Translation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time it was</td>
<td>(No translation provided for this line)</td>
</tr>
<tr>
<td>And what a time it was</td>
<td>多么易逝的时光</td>
</tr>
<tr>
<td>It was a time of innocence</td>
<td>那是一段天真无邪的时光</td>
</tr>
<tr>
<td>A time of confidences</td>
<td>也是自信满满的时光</td>
</tr>
<tr>
<td>Long ago, it must be</td>
<td>一定发生在很久以前</td>
</tr>
<tr>
<td>I have a photograph</td>
<td>我保留着一张照片</td>
</tr>
<tr>
<td>Preserve your memories</td>
<td>封存了你的所有记忆</td>
</tr>
<tr>
<td>They’re all that’s left you</td>
<td>这些记忆只为你而留</td>
</tr>
</tbody>
</table>
<p>However, till now, most of Simon’s songs still lack translation. And I have to admit that some of the translation online now are not so good, maybe mine included… but I’ll do my best. Yes, I have been translating the rest songs - but my time is limited, and sometimes translating his lyrics is really a headache. Take <em>Diamonds On the Soles of Her Shoes</em> as an example - it has all the problems, foreign words, vague meanings… As for the non-English words, I just translate them out to plain Chinese and put a footnote down there saying “the original text of that line is in Zulu”, something like that. But the vagueness and wordplays are the real problem. Should I take “diamonds” as real diamonds, or just diamonds shapes on soles? Although I think Simon means “real” dimonds, I can’t just deny the latter interpretion. I want to convey the multiple ways of understanding through my translation, but sometimes it is quite beyond my ability.</p>
<p>Another problem is cultural barrier. For example, in <em>The Teacher</em>, however I translate the line “Whose words were like the tablets of stone”, almost no Chinese reader can relate that to the Bible story. They might have never heard about Moses, at least not familiar with him. And I feel that directly pointing out the similarity of “The Teacher” and Moses in the translation is not a good idea.</p>
<p>Recently I have got some new ideas. I might have expected too much from the translations… Some of the work should belong to comments, reviews or analysises. So maybe now on I’ll continue to translate these lyrics, and write some thing about the song as well as translating.</p>
<hr>
<p>And it would be easy to conclude from above that, most of my (and almost all the other) English lyric translations are never intended for singing along. They are intended for the listener to read while listening to the song so they can understand what the song is singing about.</p>
<p>Yeah, I have considered that kind of thing. It would be great if I can sing my own Chinese version of lyrics. But It’s really, really hard. I had composed more “singable” versions, but every time after thinking about the nature of these translations, I always choose the more “readable” and “faithful” versions.</p>
<p>Well, I am not a professional translator, at least not yet. I think the best solutions I have seen so far are translations for Schubert’s lieder, like <a href="https://baike.baidu.com/item/%E9%87%8E%E7%8E%AB%E7%91%B0/6589883" target="_blank" rel="noopener">this translation</a> for <em>Heidenröslein</em>. But since the original language is German, I won’t discuss these songs further now.</p>
<p>But most musicians are not professional translators either. So they choose a different way: using the original song’s music arrangement (of course buying the rights first), and singing their own Chinese lyric. These Chinese lyrics can be completely unrelated to the original lyrics. Some of the most popular songs of this kind are:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=LeWRqBsm0zY" target="_blank" rel="noopener">彩虹的微笑</a>, adapted from <a href="https://en.wikipedia.org/wiki/It%27s_So_Easy!_%28The_Crickets_song%29" target="_blank" rel="noopener">It’s So Easy!</a></li>
<li><a href="https://www.youtube.com/watch?v=jL6D7rqk4SQ" target="_blank" rel="noopener">恋人未满</a>, adapted from <a href="https://www.youtube.com/watch?v=Mktlac3D7H0" target="_blank" rel="noopener">Brown Eyes</a></li>
<li><a href="https://www.youtube.com/watch?v=vh_5qoarxzA" target="_blank" rel="noopener">独领风骚</a>, adapted from <a href="https://en.wikipedia.org/wiki/Who_Let_the_Dogs_Out%3F" target="_blank" rel="noopener">Who Let the Dogs Out</a></li>
<li>…</li>
</ul>
<p>And yes, there exists a similar arrangement for Simon’s song <em>Mother and Child Reunion</em>. It’s called <a href="https://www.youtube.com/watch?v=1dfqrS0gaCI" target="_blank" rel="noopener">制水歌</a> (“The Song of Water Restriction” in English) by <a href="https://en.wikipedia.org/wiki/Sam_Hui" target="_blank" rel="noopener">許冠傑</a>. He sings in Cantonese (a dialect of Chinese), not Mandarin (the standard Chinese), a dialect that I am not really familiar with. In case you should be interested in his lyric, I have made up a loose English version of that.</p>
<table>
<thead>
<tr>
<th>Cantonese lyric</th>
<th>English Lyric</th>
</tr>
</thead>
<tbody>
<tr>
<td>又制水真正受气</td>
<td>The authorities are restricting the use of water again, and I feel like a doormat</td>
</tr>
<tr>
<td>又制水的确系无谓</td>
<td>The authorities are restricting the use of water again, but I can do nothing about that</td>
</tr>
<tr>
<td>又制水今晚点冲凉</td>
<td>The authorities are restricting the use of water again, I can’t take a shower tonight</td>
</tr>
<tr>
<td>成晚要干煎真撞鬼</td>
<td>Ah heck, I’m gonna feel sizzling all night</td>
</tr>
<tr>
<td>OH!真苦透呀老友 听朝早Ｄ起身</td>
<td>Oh! Life’s so hard, my dear friend. I shall get up earlier next morning</td>
</tr>
<tr>
<td>搵定水桶半打 装多Ｄ水乜都假</td>
<td>And snatch half a dozen water buckets. Though I can get more water in this way, it’s still not enough</td>
</tr>
<tr>
<td>水紧真真冇修</td>
<td>I really realy can do nothing about the water shortage</td>
</tr>
<tr>
<td>快搵多Ｄ水啦老友</td>
<td>My dear friend, don’t hesitate to grab more water</td>
</tr>
<tr>
<td>莫水真阴功 请保重</td>
<td>We are so pitiful without water, please take care</td>
</tr>
<tr>
<td>又制水 夜街你都无谓去</td>
<td>The authorities are restricting the use of water again, I don’t feel like going to the night market now</td>
</tr>
<tr>
<td>又制水 拍拖都冇话厘味</td>
<td>The authorities are restricting the use of water again, even the dating couples are stinking</td>
</tr>
<tr>
<td>又制水 妹佢怕我周身一阵除</td>
<td>The authorities are restricting the use of water again, my girlfriend thinks that I lack hygiene</td>
</tr>
<tr>
<td>成晚要干煎真正悲</td>
<td>It feels so sad that I’m gonna sizzle all night</td>
</tr>
<tr>
<td>又制水真正真冇乐趣</td>
<td>The authorities are restricting the use of water again, it ain’t no fun living</td>
</tr>
<tr>
<td>又制水的确系无谓</td>
<td>The authorities are restricting the use of water again, but I can do nothing about that</td>
</tr>
<tr>
<td>又制水今晚点冲凉</td>
<td>The authorities are restricting the use of water again, I can’t take a shower tonight</td>
</tr>
<tr>
<td>成晚要干煎真撞鬼</td>
<td>Ah heck,  I’m gonna feel sizzling all night</td>
</tr>
</tbody>
</table>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Translation/"><i class="fas fa-hashtag fa-fw"></i>Translation</a>
                
                    <a href="/tags/Lyric/"><i class="fas fa-hashtag fa-fw"></i>Lyric</a>
                
                    <a href="/tags/Paul-Simon/"><i class="fas fa-hashtag fa-fw"></i>Paul Simon</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/leetcode-900-rle-iterator-and-weekly-contest-101/">
              
                  Leetcode 900. RLE Iterator，及周赛（101）总结
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-10
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="https://leetcode.com/problems/rle-iterator/description/" target="_blank" rel="noopener">https://leetcode.com/problems/rle-iterator/description/</a></p>
<p>标记难度：Easy</p>
<p>提交次数：2/4</p>
<p>代码效率：</p>
<ul>
<li>复杂的做法：4ms</li>
<li>简单的做法：4ms</li>
</ul>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>给定一个数组的游程编码（run-length encoding），写一个它的迭代器，支持操作：</p>
<ul>
<li><code>int next(int n)</code>：删除数组中的前<code>n</code>个元素，返回最后一个被删除的元素；如果数组已经被删光了，则返回<code>-1</code>。</li>
</ul>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>这次比赛出了一点incident，开始时Leetcode自己崩了，进不了比赛，看不了题。所以比赛最后延长了15分钟。而且比赛期间我的心态不是很好，所以一共只做出来一道Easy，剩下的两道Medium都没做出来。不过说实话我觉得这次的题难度稍微高了一点啊……</p>
<p>总之排名是1331 / 4937。（这次第一又是<a href="https://leetcode.com/uwi/" target="_blank" rel="noopener">uwi</a>。）</p>
<hr>
<p>我自己的思路倒是很简单：把原来的游程编码拆成两个数组（<code>len</code>和<code>val</code>），然后再开一个新的数组<code>acum</code>，<code>acum[i] = len[0] + len[1] + ... + len[i]</code>；用<code>m</code>记录当前已经删除了多少个数。对于每一次<code>next(n)</code>的操作，令<code>m += n</code>，然后找到这样的<code>i</code>，使得<code>len[i-1] &lt; m &lt;= len[i]</code>，如果找到则返回<code>val[i]</code>，否则返回<code>-1</code>。</p>
<p>听起来不是很难，结果我WA了两次。第一次是因为<code>m</code>爆<code>int</code>了。第二次居然是因为之前都忘了把<code>curIdx</code>的初值置零了……</p>
<p>但一个事实是，其实不需要额外的<code>O(N)</code>空间。只需用变量<code>i</code>记录当前还没被删光的第一个元素的位置，以及<code>q</code>记录这个元素已经被消耗了多少个。对于每一次<code>next(n)</code>的操作，若<code>q + n &lt;= A[i+1]</code>，说明应返回当前元素，且<code>q += n</code>；否则消耗所有当前元素（<code>n -= A[i+1] - q; q = 0; i += 2;</code>）并继续寻找。这个做法有一个好处，不会爆<code>int</code>。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<h3 id="复杂的做法"><a class="markdownIt-Anchor" href="#复杂的做法"></a> 复杂的做法</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RLEIterator</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span>&gt; len;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span>&gt; val;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span>&gt; acum;</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> m;</span><br><span class="line">    <span class="keyword">int</span> curIdx;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    RLEIterator(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; A) &#123;</span><br><span class="line">        <span class="keyword">if</span> (A.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.size(); i += <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (A[i] == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                len.push_back(A[i]);</span><br><span class="line">                val.push_back(A[i+<span class="number">1</span>]);</span><br><span class="line">                <span class="keyword">if</span> (acum.size() &gt; <span class="number">0</span>) acum.push_back(acum.back() + A[i]);</span><br><span class="line">                <span class="keyword">else</span> acum.push_back(A[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            N = len.size();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            N = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        m = <span class="number">0</span>;</span><br><span class="line">        curIdx = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">next</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        m += n;</span><br><span class="line">        <span class="keyword">if</span> (curIdx &gt;= N) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span> (curIdx &lt; N &amp;&amp; acum[curIdx] &lt; m) curIdx++;</span><br><span class="line">        <span class="keyword">if</span> (curIdx &gt;= N) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">return</span> val[curIdx];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="简单的做法"><a class="markdownIt-Anchor" href="#简单的做法"></a> 简单的做法</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RLEIterator</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; A;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    RLEIterator(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; A) &#123;</span><br><span class="line">        i = q = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;A = A;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">next</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= A.size()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; A.size() &amp;&amp; A[i] - q &lt; n) &#123;</span><br><span class="line">            n -= A[i] - q;</span><br><span class="line">            q = <span class="number">0</span>;</span><br><span class="line">            i += <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= A.size()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        q += n;</span><br><span class="line">        <span class="keyword">return</span> A[i + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://leetcode.com/problems/rle-iterator/solution/" target="_blank" rel="noopener">Leetcode 900 Solution</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Leetcode/"><i class="fas fa-hashtag fa-fw"></i>Leetcode</a>
                
                    <a href="/tags/Leetcode-Contest/"><i class="fas fa-hashtag fa-fw"></i>Leetcode Contest</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/thuss-2016-postgraduate-entrance-exam-simulation-c-contest/">
              
                  软院2016考研机试模拟赛C. 软小宣的比赛
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-10
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="http://ac.ssast.org/contest/2/problem/7" target="_blank" rel="noopener">http://ac.ssast.org/contest/2/problem/7</a>（需要清华内网）</p>
<p>提交次数：1/1</p>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>将<code>[1, N]</code>范围内的数字以某种随机的方式排列并形成一个字符串，从中删除一个字符。给定删除后的字符串和<code>N</code>，请输出被删除的字符。（<code>1 &lt;= N &lt;= 100000</code>）</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>很简单的一道题。输入<code>N</code>之后把<code>[1, N]</code>范围内的数字的字符数量都统计一下，然后和字符串里各字符的数量比较一下就可以了。但是，这里的问题是，字符串大概会有多长。因为<code>N</code>的最大长度是6，所以字符串长度的上界应该是<code>600000</code>。虽然这个界可能比较大，但肯定不应该是<code>100000</code>……比赛的时候因此丢掉了若干分。</p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">char</span> str[<span class="number">600005</span>];</span><br><span class="line"><span class="keyword">int</span> h[<span class="number">10</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>); <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>); <span class="built_in">cout</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; str;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = i;</span><br><span class="line">        <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            h[x % <span class="number">10</span>]++;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="built_in">strlen</span>(str);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        h[str[i] - <span class="string">'0'</span>]--;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (h[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        

        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/thuss-2016-postgraduate-entrance-exam-simulation-b-prime/">
              
                  软院2016考研机试模拟赛B. XDD找素数（数学）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-10
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="http://ac.ssast.org/contest/2/problem/6" target="_blank" rel="noopener">http://ac.ssast.org/contest/2/problem/6</a>（需要清华内网）</p>
<p>提交次数：1/2</p>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>输入<code>n</code>，输出<code>[2, n]</code>区间内的素数总数。（<code>2 &lt;= n &lt;= 2 * 10^7</code>）</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>比赛的时候我心想，这不是很简单的暴力题么……我相信肯定可以开一个<code>10^7</code>左右的<code>bool</code>数组的。于是我就写完了，写过之后测了一下最大的数据（<code>20000000</code>），发现也没有超过1秒，于是就这样了。</p>
<hr>
<p>这道题至少有两个正解，埃式筛法（Sieve of Eratosthenes）和欧拉筛法（Euler’s Sieve）。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<h3 id="埃式筛法"><a class="markdownIt-Anchor" href="#埃式筛法"></a> 埃式筛法</h3>
<p>最简单的筛法之一，思路非常简单。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">define <span class="built_in">array</span> isPrime[n + <span class="number">1</span>]  <span class="comment">// 令数组isPrime表示一个数是否为素数</span></span><br><span class="line"><span class="keyword">for</span> i from <span class="number">1</span> to n</span><br><span class="line">    isPrime[i] = <span class="literal">true</span>  <span class="comment">// 起始时假定所有数都是素数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i from <span class="number">2</span> to n  <span class="comment">// 如果不需要打印所有素数，此处结束条件可以是n / i（或者说sqrt(n)）</span></span><br><span class="line">    <span class="keyword">if</span> (isPrime[i])  <span class="comment">// 找到了一个素数；筛除所有这个素数的倍数</span></span><br><span class="line">        <span class="keyword">for</span> j from <span class="number">2</span> to n / i  <span class="comment">// 从i开始可以降低复杂度</span></span><br><span class="line">            isPrime[i * j] = <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>算法空间复杂度是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>，时间复杂度是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mrow><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n\log{\log{n}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span></span></span><span class="mclose">)</span></span></span></span>，接近于线性。当然，一个问题是，这个时间复杂度是怎么算出来的。显然，对于每个素数<code>p</code>，内层的<code>for</code>循环至多运行了<code>n / p</code>次。由于<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munder><mo>∑</mo><mrow><mi>p</mi><mo>≤</mo><mi>n</mi></mrow></munder><mfrac><mn>1</mn><mi>p</mi></mfrac><mo>=</mo><mi>O</mi><mo>(</mo><mi>log</mi><mo>⁡</mo><mrow><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow><mo>)</mo></mrow><annotation encoding="application/x-tex">\sum_{p \leq n} \frac{1}{p} = O(\log{\log{n}})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.718732em;vertical-align:-1.397292em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0500050000000003em;"><span style="top:-1.8888159999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span><span class="mrel mtight">≤</span><span class="mord mathdefault mtight">n</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.397292em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>因此总的时间复杂度是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mrow><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n\log{\log{n}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span></span></span><span class="mclose">)</span></span></span></span>。</p>
<p>下一个问题是，如果外层循环的结束条件改成<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.23972em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault">n</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span></span></span></span>，并不会改变这个界。虽然此时我们只访问了比<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.23972em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault">n</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span></span></span></span>小的素数，但是对于每个素数<code>p</code>，内层的<code>for</code>循环仍然至多运行了<code>n / p</code>次。此时</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munder><mo>∑</mo><mrow><mi>p</mi><mo>≤</mo><msqrt><mi>n</mi></msqrt></mrow></munder><mfrac><mi>n</mi><mi>p</mi></mfrac><mo>=</mo><mi>n</mi><mo>⋅</mo><mi>O</mi><mo>(</mo><mi>log</mi><mo>⁡</mo><mrow><mi>log</mi><mo>⁡</mo><msqrt><mi>n</mi></msqrt></mrow><mo>)</mo><mo>=</mo><mi>n</mi><mo>⋅</mo><mi>O</mi><mo>(</mo><mi>log</mi><mo>⁡</mo><mrow><mo>(</mo><mn>0.5</mn><mi>log</mi><mo>⁡</mo><mi>n</mi><mo>)</mo></mrow><mo>)</mo><mo>=</mo><mi>n</mi><mo>⋅</mo><mi>O</mi><mo>(</mo><mi>log</mi><mo>⁡</mo><mn>0.5</mn><mo>+</mo><mi>log</mi><mo>⁡</mo><mrow><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow><mo>)</mo><mo>=</mo><mi>n</mi><mo>⋅</mo><mi>O</mi><mo>(</mo><mi>log</mi><mo>⁡</mo><mrow><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow><mo>)</mo></mrow><annotation encoding="application/x-tex">\sum_{p \leq \sqrt{n}} \frac{n}{p} = n \cdot O(\log{\log{\sqrt{n}}}) = n \cdot O(\log{(0.5 \log{n})}) = n \cdot O(\log{0.5} + \log{\log{n}}) = n \cdot O(\log{\log{n}})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.651565em;vertical-align:-1.544005em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0500050000000003em;"><span style="top:-1.7698614999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span><span class="mrel mtight">≤</span><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8059050000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-2.765905em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.234095em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.544005em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.099155em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8491550000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault">n</span></span></span><span style="top:-2.809155em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.190845em;"><span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span></span><span class="mclose">)</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>最后一个问题是，如果再把内层循环的起始条件改成<code>i</code>，这个算法的时间复杂度上界能否更紧一些。此时和式变成了</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munder><mo>∑</mo><mrow><mi>p</mi><mo>≤</mo><msqrt><mi>n</mi></msqrt></mrow></munder><mo>(</mo><mfrac><mi>n</mi><mi>p</mi></mfrac><mo>−</mo><mi>p</mi><mo>)</mo><mo>=</mo><mi>n</mi><mo>⋅</mo><munder><mo>∑</mo><mrow><mi>p</mi><mo>≤</mo><msqrt><mi>n</mi></msqrt></mrow></munder><mfrac><mn>1</mn><mi>p</mi></mfrac><mo>−</mo><munder><mo>∑</mo><mrow><mi>p</mi><mo>≤</mo><msqrt><mi>n</mi></msqrt></mrow></munder><mi>p</mi></mrow><annotation encoding="application/x-tex">\sum_{p \leq \sqrt{n}} ( \frac{n}{p} - p) = n \cdot \sum_{p \leq \sqrt{n}} \frac{1}{p} - \sum_{p \leq \sqrt{n}} p
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.651565em;vertical-align:-1.544005em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0500050000000003em;"><span style="top:-1.7698614999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span><span class="mrel mtight">≤</span><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8059050000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-2.765905em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.234095em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.544005em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.8654450000000002em;vertical-align:-1.544005em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0500050000000003em;"><span style="top:-1.7698614999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span><span class="mrel mtight">≤</span><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8059050000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-2.765905em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.234095em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.544005em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.5940100000000004em;vertical-align:-1.544005em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0500050000000003em;"><span style="top:-1.7698614999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span><span class="mrel mtight">≤</span><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8059050000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-2.765905em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.234095em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.544005em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span></span></span></span></span></p>
<h3 id="欧拉筛法"><a class="markdownIt-Anchor" href="#欧拉筛法"></a> 欧拉筛法</h3>
<p>从上面的例子可以看出，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>log</mi><mo>⁡</mo><mrow><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow></mrow><annotation encoding="application/x-tex">\log{\log{n}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span></span></span></span></span></span>这个函数已经相当接近于线性了，不过我们仍然可以把埃式筛法改得更好一些，使它的时间复杂度变成<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>。对于埃式筛法，显然一个合数可能被不止一个素数筛掉，如12，可能会被2和3筛掉两遍，这就增加了复杂度。如果我们通过某些方法，使得每个合数只会被它最小的质因子筛掉一遍，复杂度就可以降低到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>了。</p>
<p>我们考查任何一个数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>，假设其最小质因子为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>，那么小于等于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>的质数与<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>相乘，会得到一个更大的合数，且其最小质因数为与<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>相乘的那个素数。此时该合数可以直接从表中删除，因为其刚好满足之前的合数删除的定义。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">define <span class="built_in">array</span> isPrime[n + <span class="number">1</span>]  <span class="comment">// 令数组isPrime表示一个数是否为素数</span></span><br><span class="line">define <span class="built_in">array</span> prime[n + <span class="number">1</span>]  <span class="comment">// 存储已经找到的素数</span></span><br><span class="line"><span class="keyword">int</span> m = <span class="number">0</span>  <span class="comment">// 找到的素数个数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i from <span class="number">1</span> to n</span><br><span class="line">    isPrime[i] = <span class="literal">true</span>  <span class="comment">// 起始时假定所有数都是素数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i from <span class="number">2</span> to n</span><br><span class="line">    <span class="keyword">if</span> (isPrime[i])</span><br><span class="line">        prime[m] = i</span><br><span class="line">        m += <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> j from <span class="number">0</span> to m<span class="number">-1</span></span><br><span class="line">        <span class="keyword">if</span> (i * prime[j] &gt; n)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        isPrime[i * prime[j]] = <span class="literal">false</span>  <span class="comment">// prime[j]是&lt;=i的最小素因子的素数</span></span><br><span class="line">        <span class="keyword">if</span> (i % prime[j] == <span class="number">0</span>) <span class="keyword">break</span>  <span class="comment">// 如果prime[j]已经是i的最小素因子了，结束</span></span><br></pre></td></tr></table></figure>
<p>上述代码里有一个我起初没有注意到的问题。我们需要允许与<code>i</code>的最小素因子相等的素数与<code>i</code>相乘的结果被筛掉，否则我们就无法筛掉任何含有素数的比1更高的次幂的数了。<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<h3 id="埃式筛法-2"><a class="markdownIt-Anchor" href="#埃式筛法-2"></a> 埃式筛法</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">bool</span> isPrime[<span class="number">20000005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">memset</span>(isPrime, <span class="number">1</span>, <span class="keyword">sizeof</span>(isPrime));</span><br><span class="line">    isPrime[<span class="number">1</span>] = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isPrime[i]) &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">            <span class="comment">// 注意溢出</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> k = i; k * i &lt;= n; k++)</span><br><span class="line">                isPrime[k * i] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; cnt &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="欧拉筛法-2"><a class="markdownIt-Anchor" href="#欧拉筛法-2"></a> 欧拉筛法</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"><span class="keyword">bool</span> isPrime[<span class="number">20000005</span>];</span><br><span class="line">LL prime[<span class="number">2000005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    LL n, m;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    m = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(isPrime, <span class="number">1</span>, <span class="keyword">sizeof</span>(isPrime));</span><br><span class="line">    <span class="keyword">for</span> (LL i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isPrime[i]) prime[m++] = i;</span><br><span class="line">        <span class="keyword">for</span> (LL j = <span class="number">0</span>; j &lt; m &amp;&amp; i * prime[j] &lt;= n; j++) &#123;</span><br><span class="line">            isPrime[i * prime[j]] = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (i % prime[j] == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; m &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes" target="_blank" rel="noopener">Sieve of Eratosthenes</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://math.stackexchange.com/questions/674877/what-is-the-sum-of-the-reciprocal-of-primes-yes-it-diverges" target="_blank" rel="noopener">What is the sum of the reciprocal of primes? (Yes, it diverges)</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p>上述描述参考了<a href="http://ac.ssast.org/blogof/wonderfulnx/blog/16" target="_blank" rel="noopener">XDD找素数——题解</a>（仍然需要内网） <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/alg-Math/"><i class="fas fa-hashtag fa-fw"></i>alg:Math</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/thuss-2016-postgraduate-entrance-exam-simulation-a-earphone/">
              
                  软院2016考研机试模拟赛A. 小w的耳机（DP）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-09
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="http://ac.ssast.org/contest/2/problem/5" target="_blank" rel="noopener">http://ac.ssast.org/contest/2/problem/5</a>（需要清华内网）</p>
<p>提交次数：1/2</p>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>有一个<code>n * n</code>的网格，定义一条合法路径是从左上角到右下角且只向右和向下走的路径。每个格子有一定的权值。问从左上到右下的三条路径所覆盖的格子的总权值最大是多少？（权值不重复计算）</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>比赛的时候我看到这是第一题，就很慌张。后来发现这是三道题里最难的一道。我开始时想到了复杂度较高的DP方法，后来简化了一下，就交上去了。结果比赛之后发现只得了70分，因为我看错数据范围了，应该开<code>2 * n</code>的数组，我只开了<code>n</code>。</p>
<hr>
<p>我想出来的第一种DP做法是这样的：令<code>f[x1][y1][x2][y2][x3][y3]</code>表示第一条路径到达<code>(x1, y1)</code>，第二条路径到达<code>(x2, y2)</code>，第三条路径到达<code>(x3, y3)</code>时的最大权值和。此时的问题是怎么写状态转移方程。很显然，每次只选择若干条路径前进是一种不太合理的做法，既然三条路径的长度是相同的，不妨令每次每条路径都要前进。此时可以这样进行状态转移：</p>
<ul>
<li>初始条件：<code>f[0][0][0][0][0][0] = a[0][0]</code>（这是显然的）</li>
<li>转移：<code>f[x1][y1][x2][y2][x3][y3] = max(f[x1 - dx[i1]][y1 - dy[i1]][x2 - dx[i2]][y2 - dx[i2]][x3 - dx[i3]][y3 - dy[i3]]) + value</code>，其中<code>dx[2] = {0, 1}</code>，<code>dy[2] = {1, 0}</code>，<code>i = 0</code>表示该路径上一步是向右走的，<code>i = 1</code>表示该路径上一步是向下走的，<code>value</code>表示<code>(x1, y1), (x2, y2), (x3, y3)</code>覆盖的格子的总权值和。</li>
<li>答案：<code>f[n-1][n-1][n-1]</code></li>
</ul>
<p>这个方法的问题是空间复杂度太高（<code>O(n^6)</code>）。</p>
<p>通过之前的观察，我们可以发现，这个方法里的状态是比较冗余的：既然每条路径当前走过的总长度都是相同的，不妨这样设计状态：令<code>f[m][x1][x2][x3]</code>表示三条路径都走了<code>m</code>，第一条路径到达<code>(x1, m - x1)</code>，第二条路径到达<code>(x2, m - x2)</code>，第三条路径到达<code>(x3, m - x3)</code>时的最大权值和。</p>
<ul>
<li>初始条件：<code>f[0][0][0][0] = a[0][0]</code></li>
<li>转移：<code>f[m][x1][x2][x3] = max(f[m - 1][x1 - dx[i1]][x2 - dx[i2]][x3 - dx[i3]]) + value</code></li>
<li>答案：<code>max(f[2(n-1)][i][j][k])</code></li>
</ul>
<p>这种方法的空间复杂度降低到了<code>O(n^4)</code>。</p>
<p>当然，上述两种方法都要注意边界条件。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line">LL g[<span class="number">55</span>][<span class="number">55</span>];</span><br><span class="line">LL f[<span class="number">105</span>][<span class="number">55</span>][<span class="number">55</span>][<span class="number">55</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; g[i][j];</span><br><span class="line">    <span class="comment">// 共需走2(n-1)步</span></span><br><span class="line">    <span class="comment">// f[m][x1][x2][x3]：当都走了m步，且1向下走了x1步，2向下走了x2步，3向下走了x3步时的最大的和</span></span><br><span class="line">    LL maxSum = <span class="number">-1</span>;</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = g[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> m = <span class="number">1</span>; m &lt;= <span class="number">2</span> * (n<span class="number">-1</span>); m++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= min(m, n<span class="number">-1</span>); i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= min(m, n<span class="number">-1</span>); j++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt;= min(m, n<span class="number">-1</span>); k++) &#123;</span><br><span class="line">                    f[m][i][j][k] = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> i1 = max(<span class="number">0</span>, i<span class="number">-1</span>); i1 &lt;= min(i, m<span class="number">-1</span>); i1++)</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> j1 = max(<span class="number">0</span>, j<span class="number">-1</span>); j1 &lt;= min(j, m<span class="number">-1</span>); j1++)</span><br><span class="line">                            <span class="keyword">for</span> (<span class="keyword">int</span> k1 = max(<span class="number">0</span>, k<span class="number">-1</span>); k1 &lt;= min(k, m<span class="number">-1</span>); k1++)</span><br><span class="line">                                f[m][i][j][k] = max(f[m][i][j][k], f[m<span class="number">-1</span>][i1][j1][k1]);</span><br><span class="line"></span><br><span class="line">                    f[m][i][j][k] += g[i][m - i] + g[j][m - j] + g[k][m - k];</span><br><span class="line">                    <span class="keyword">if</span> (i == j) f[m][i][j][k] -= g[i][m-i];</span><br><span class="line">                    <span class="keyword">if</span> (i == k) f[m][i][j][k] -= g[i][m-i];</span><br><span class="line">                    <span class="keyword">if</span> (j == k) f[m][i][j][k] -= g[k][m-k];</span><br><span class="line">                    <span class="keyword">if</span> (i == j &amp;&amp; j == k) f[m][i][j][k] += g[i][m-i];</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (m == <span class="number">2</span> * (n<span class="number">-1</span>)) maxSum = max(maxSum, f[m][i][j][k]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; maxSum &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>上述描述参考了<a href="http://ac.ssast.org/blogof/ycdfwzy/blog/14" target="_blank" rel="noopener">《小w的耳机》解题报告</a>（仍然需要内网） <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/alg-Dynamic-Programming/"><i class="fas fa-hashtag fa-fw"></i>alg:Dynamic Programming</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/serenity-prayer-translation/">
              
                  宁静祷文（Serenity Prayer）翻译
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-08
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <!--
祝wenj生日快乐。愿你每日都能获得内心的宁静，真正地负责，真正地接纳。
-->
<p>宁静祷文（Serenity Prayer）是神学家<a href="https://en.wikipedia.org/wiki/Reinhold_Niebuhr" target="_blank" rel="noopener">莱因霍尔德·尼布尔</a>所作的一篇祷告，最初通过尼布尔的讲道和教会团体传播，后来因<a href="http://www.aa-beijing.org/" target="_blank" rel="noopener">嗜酒者无名会</a>（<a href="https://en.wikipedia.org/wiki/Alcoholics_Anonymous" target="_blank" rel="noopener">Alcoholics Anonymous</a>）等组织将其用于<a href="https://zh.wikipedia.org/wiki/%E5%8D%81%E4%BA%8C%E6%AD%A5%E9%A1%B9%E7%9B%AE" target="_blank" rel="noopener">十二步项目</a>（<a href="https://en.wikipedia.org/wiki/Twelve-step_program" target="_blank" rel="noopener">Twelve-step program</a>）而广为流传。</p>
<h2 id="最常见的版本"><a class="markdownIt-Anchor" href="#最常见的版本"></a> 最常见的版本</h2>
<blockquote>
<p>God, give me grace to accept with serenity<br>
the things that cannot be changed,<br>
Courage to change the things<br>
which should be changed,<br>
and the Wisdom to distinguish<br>
the one from the other.</p>
<p>Living one day at a time,<br>
Enjoying one moment at a time,<br>
Accepting hardship as a pathway to peace,<br>
Taking, as Jesus did,<br>
This sinful world as it is,<br>
Not as I would have it,<br>
Trusting that You will make all things right,<br>
If I surrender to Your will,<br>
So that I may be reasonably happy in this life,<br>
And supremely happy with You forever in the next.</p>
<p>Amen.<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
</blockquote>
<table>
<thead>
<tr>
<th>原文</th>
<th>翻译</th>
</tr>
</thead>
<tbody>
<tr>
<td>God, give me grace to accept with serenity</td>
<td>上帝，请赐我恩典，以宁静之心</td>
</tr>
<tr>
<td>the things that cannot be changed,</td>
<td>接受那些无法改变的，</td>
</tr>
<tr>
<td>Courage to change the things</td>
<td>以勇气</td>
</tr>
<tr>
<td>which should be changed,</td>
<td>改变那些应当改变的，</td>
</tr>
<tr>
<td>and the Wisdom to distinguish</td>
<td>并以智慧</td>
</tr>
<tr>
<td>the one from the other.</td>
<td>分辨两者之差异。</td>
</tr>
<tr>
<td>Living one day at a time,</td>
<td>每日只活在每日的生活里，</td>
</tr>
<tr>
<td>Enjoying one moment at a time,</td>
<td>每时只享受当下的这一刻，</td>
</tr>
<tr>
<td>Accepting hardship as a pathway to peace,</td>
<td>接纳困苦为通向平安之路，</td>
</tr>
<tr>
<td>Taking, as Jesus did,</td>
<td>效法耶稣，</td>
</tr>
<tr>
<td>This sinful world as it is,</td>
<td>接受这罪恶世界的本相，</td>
</tr>
<tr>
<td>Not as I would have it,</td>
<td>而非只看见心中的愿景，</td>
</tr>
<tr>
<td>Trusting that You will make all things right,</td>
<td>坚信你必将万事安排妥帖，</td>
</tr>
<tr>
<td>If I surrender to Your will,</td>
<td>若我顺从你的意志，</td>
</tr>
<tr>
<td>So that I may be reasonably happy in this life,</td>
<td>我将在此生得到适度的欢欣，</td>
</tr>
<tr>
<td>And supremely happy with You forever in the next.</td>
<td>并于彼世在你身边享受永久的喜乐。</td>
</tr>
<tr>
<td>Amen.</td>
<td>阿门。</td>
</tr>
</tbody>
</table>
<p>上述翻译参考了<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>和<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>。</p>
<h2 id="另一版本"><a class="markdownIt-Anchor" href="#另一版本"></a> 另一版本</h2>
<p>在这一版本中，祷文中增加了“责任”，并且尝试在这种主动的责任感和深刻的接纳感之间进行平衡。这里的祷文形式是“祝福”（“May I …”），但很容易修改为“祈祷”（“God grant me the …”）。当然上一个版本也是这样的。<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></p>
<blockquote>
<p>May I take deep responsibility for all the consequence of my actions, both intentional and unintentional.<br>
May I take deep responsibility for my emotional states.<br>
May I take deep responsibility for everything I control and everything over which I have some sort of influence.</p>
<p>May I accept complete surrender in all those aspects of life in which I have absolutely no control or influence.<br>
May I cultivate tremendous trust and acceptance wherever my control and influence end.<br>
May I relax into the deep vulnerability of human life.</p>
<p>And between what I control and what I do not, what I influence and what I do not, may I have the wisdom, the courage, and the insight to know the difference.</p>
</blockquote>
<table>
<thead>
<tr>
<th>原文</th>
<th>翻译</th>
</tr>
</thead>
<tbody>
<tr>
<td>May I take deep responsibility for all the consequence of my actions, both intentional and unintentional.</td>
<td>愿我为自己行为的一切后果真正负责，无论是有意的还是无意的。</td>
</tr>
<tr>
<td>May I take deep responsibility for my emotional states.</td>
<td>愿我为自身的情绪状态真正负责。</td>
</tr>
<tr>
<td>May I take deep responsibility for everything I control and everything over which I have some sort of influence.</td>
<td>愿我为自己可控的一切真正负责，以及那些我能够施加一定影响的。</td>
</tr>
<tr>
<td>May I accept complete surrender in all those aspects of life in which I have absolutely no control or influence.</td>
<td>愿我彻底顺从于我完全无法控制和影响的一切。</td>
</tr>
<tr>
<td>May I cultivate tremendous trust and acceptance wherever my control and influence end.</td>
<td>在我无法控制和影响之处，愿我培育出无穷的信任和接纳。</td>
</tr>
<tr>
<td>May I relax into the deep vulnerability of human life.</td>
<td>愿我轻松地接受人类生命深切的脆弱。</td>
</tr>
<tr>
<td>And between what I control and what I do not, what I influence and what I do not, may I have the wisdom, the courage, and the insight to know the difference.</td>
<td>在我能够控制和不能之间，能够影响和不能之间，愿我有智慧、勇气和洞见分辨其区别。</td>
</tr>
</tbody>
</table>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://en.wikipedia.org/wiki/Serenity_Prayer" target="_blank" rel="noopener">Serenity Prayer</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="http://preciousmoment.pixnet.net/blog/post/20540412-%E5%AF%A7%E9%9D%9C%E7%A6%B1%E5%91%8A-serenity-prayer--" target="_blank" rel="noopener">寧靜禱告 Serenity Prayer</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p><a href="https://zhuanlan.zhihu.com/p/19732343" target="_blank" rel="noopener">The Serenity Prayer 宁静之祷</a> <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn4" class="footnote-item"><p><a href="http://healingcollective.org/the-serenity-prayer/" target="_blank" rel="noopener">The Serenity Prayer</a> <a href="#fnref4" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Counseling/"><i class="fas fa-hashtag fa-fw"></i>Counseling</a>
                
                    <a href="/tags/Psychology/"><i class="fas fa-hashtag fa-fw"></i>Psychology</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/codeforces-1038d-slime/">
              
                  Codeforces 1038D. Slime（贪心）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-08
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="http://codeforces.com/contest/1038/problem/D" target="_blank" rel="noopener">http://codeforces.com/contest/1038/problem/D</a></p>
<p>提交次数：1/2</p>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>给定一个长度为<code>n</code>的数组，可以将数组内任意两个相邻的数<code>x</code>和<code>y</code>合并，合并结果是<code>x - y</code>。问将数组中的数全部合并为一个数之后，得到的数的最大值。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>比赛的时候我没有做这个题。后来看了看题解，发现实际上非常简单。</p>
<hr>
<p>我们不妨对数组中的元素<code>a[i]</code>做这样的标记：如果在最后的和里，它是被加上的，则令<code>sign[i] = &quot;+&quot;</code>；如果是被减去的，则令<code>sign[i] = &quot;-&quot;</code>。比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, -1]</span><br><span class="line">sum = 2 - 1 - (-1) = 2</span><br></pre></td></tr></table></figure>
<p>则将元素标记为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sign = [&quot;-&quot;, &quot;+&quot;, &quot;-&quot;]</span><br></pre></td></tr></table></figure>
<p>一个事实是，当<code>a.length &gt;= 2</code>时，<code>sign</code>数组中非全<code>&quot;-&quot;</code>和非全<code>&quot;+&quot;</code>的任何组合都是可以得到的，也就是说，几乎所有加减组合都是可以实现的。对于任一符合上述要求的组合，可以给出一个粗略的构造方法：</p>
<ol>
<li>从数组中选出一个<code>&quot;+&quot;</code>，使得它的左右两边至少各有一个<code>&quot;-&quot;</code>；或者这个数在边上，左边或右边是空的，另一边有至少一个<code>&quot;-&quot;</code>的数。此时数组看起来是这样的：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;+1&quot; &quot;+2&quot; &quot;-3&quot; &quot;-4&quot; &quot;+5&quot; &quot;+6&quot;* &quot;+7&quot; &quot;-8&quot; &quot;-9&quot;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>对于所有的<code>&quot;-&quot;</code>的数，令它“吸收”（也就是减去并合并）所有左右两边的连续的<code>&quot;+&quot;</code>的数（当然，不要重复“吸收”同一个数）。次数数组看起来是这样的：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&quot;-3&quot; - &quot;+1&quot; - &quot;+2&quot;)  (&quot;-4&quot; - &quot;+5&quot;) &quot;+6&quot;* (&quot;-8&quot; - &quot;+7&quot;) &quot;-9&quot;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>此时，令之前选出来的<code>&quot;+&quot;</code>吸收剩下所有的数，于是我们得到：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;+6&quot;* - (&quot;-3&quot; - &quot;+1&quot; - &quot;+2&quot;) - (&quot;-4&quot; - &quot;+5&quot;) - (&quot;-8&quot; - &quot;+7&quot;) - &quot;-9&quot;</span><br><span class="line">= &quot;+6&quot;* - &quot;-3&quot; + &quot;+1&quot; + &quot;+2&quot; - &quot;-4&quot; + &quot;+5&quot; - &quot;-8&quot; + &quot;+7&quot; - &quot;-9&quot;</span><br></pre></td></tr></table></figure>
<p>显然我们此时已经构造出了这样的和。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<p>以及我们可以通过数学归纳法证明为什么全<code>&quot;+&quot;</code>和全<code>&quot;-&quot;</code>的组合不可能实现。对于任何一个通过加减得到的数，其中必然包含至少一个被减去的<code>a[i]</code>和一个被加上的<code>a[j]</code>。在第一次加减的时候，我们会得到<code>a[j] - a[i]</code>。这之后，无论这个数是减去别的数（<code>a[j] - a[i]</code>），还是被别的数减去（<code>a[i] - a[j]</code>），得到的结果中仍然至少包含一个被减去的数和一个被加上的数。</p>
<p>此时就很容易得出最终的算法了。令<code>sum</code>表示数组中所有元素绝对值的和，则：</p>
<ul>
<li>如果数组长度为<code>1</code>，则<code>ans = a[1]</code>（显然此时不可能进行任何合并和组合。我在这里WA了一次）</li>
<li>如果数组元素全为正，则<code>ans = sum - 2 * minValue</code>（<code>minValue</code>在最后的结果中是减去的，其他数都是加上的）</li>
<li>如果数组元素全为负，则<code>ans = sum + 2 * maxValue</code>（<code>maxValue</code>在最后的结果中是加上的，其他数都是减去的）</li>
<li>如果数组元素有正有负，则<code>ans = sum</code>（令正数被加上，负数被减去即可）</li>
</ul>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n, a[<span class="number">500005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>); <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>); <span class="built_in">cout</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; a[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 然而这是一个特判</span></span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; a[<span class="number">0</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> sum = <span class="built_in">abs</span>(a[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">int</span> maxn = a[<span class="number">0</span>], minn = a[<span class="number">0</span>], hasPos = a[<span class="number">0</span>] &gt; <span class="number">0</span>, hasNeg = a[<span class="number">0</span>] &lt; <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">        maxn = max(maxn, a[i]);</span><br><span class="line">        minn = min(minn, a[i]);</span><br><span class="line">        hasPos = hasPos ? hasPos : a[i] &gt; <span class="number">0</span>;</span><br><span class="line">        hasNeg = hasNeg ? hasNeg : a[i] &lt; <span class="number">0</span>;</span><br><span class="line">        sum += <span class="built_in">abs</span>(a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (hasPos &amp;&amp; !hasNeg) sum -= <span class="number">2</span> * minn;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!hasPos &amp;&amp; hasNeg) sum += <span class="number">2</span> * maxn;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; sum &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>这一构造方法参考了<a href="https://codeforces.com/blog/entry/61692?#comment-456711" target="_blank" rel="noopener">MahmoudAlio’s Comment</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Codeforces/"><i class="fas fa-hashtag fa-fw"></i>Codeforces</a>
                
                    <a href="/tags/Codeforces-Contest/"><i class="fas fa-hashtag fa-fw"></i>Codeforces Contest</a>
                
                    <a href="/tags/alg-Greedy/"><i class="fas fa-hashtag fa-fw"></i>alg:Greedy</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/codeforces-1038c-gambling/">
              
                  Codeforces 1038C. Gambling（贪心）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-08
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="http://codeforces.com/contest/1038/problem/C" target="_blank" rel="noopener">http://codeforces.com/contest/1038/problem/C</a></p>
<p>提交次数：1/1</p>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>有两个玩家<code>A</code>和<code>B</code>，他们各有一个长度相等的数组<code>a</code>和<code>b</code>，A和B轮流进行以下操作之一：</p>
<ul>
<li>从自己的数组中删除一个数，将这个数加到自己的<code>sum</code>中；</li>
<li>从对方的数组中删除一个数</li>
</ul>
<p>每个人的目标都是最大化自己的<code>sum</code>和对方的<code>sum</code>的差（不是绝对值）。问如果两人都以最优策略行动，<code>sum_A - sum_B</code>会是多少？</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>这道题看起来有点像博弈论的问题，但实际上关系好像没有那么大，和贪心关系更大一些。或者说，每个人的最优策略都是贪心策略。</p>
<p>令<code>sum_A' = sum(a[1]/2 + ... + a[n]/2)</code>，<code>sum_B' = sum(b[1]/2 + ... + b[n]/2)</code>，将<code>a</code>和<code>b</code>转换成：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a&apos; = &#123;a[1]/2, ..., a[n]/2&#125;</span><br><span class="line">b&apos; = &#123;b[1]/2, ..., b[n]/2&#125;</span><br></pre></td></tr></table></figure>
<p>此时，若玩家<code>A</code>选择<code>a'</code>中的元素（不妨设为<code>a[1]</code>）并删除，则<code>sum_A' += a[1]/2</code>；若玩家<code>A</code>选择<code>b'</code>中的元素（不妨设为<code>b[1]</code>）并删除，则<code>sum_B' -= b[1]/2</code>。当<code>A</code>和<code>B</code>的操作删除完所有元素之后，<code>sum_A'</code>和<code>sum_B'</code>就会变成合法的<code>sum</code>结果。显然，无论<code>A</code>选择的是<code>a'</code>还是<code>b'</code>中的元素，<code>sum_A' - sum_B'</code>都会同样增加该元素的值（<code>a[1]/2</code>或<code>b[1]/2</code>）。这说明对于某个玩家，选择<code>A</code>中的元素和<code>B</code>中的元素本质上是相同的。所以最优解就是不断选择<code>a</code>和<code>b</code>中最大的元素并删除（不管元素是不是自己的）。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<hr>
<p>我感觉这不是一个严格的证明。虽然这确实说明了对于每个玩家当前的最优（贪心）策略是什么，但并没有回答最优子结构的问题。不过我猜这个问题的答案是显然的。</p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 因为上述等价性，实际上把两个数组放在一起排序也是合理的，但看起来好像麻烦一些</span></span><br><span class="line"><span class="comment">// https://codeforces.com/contest/1038/submission/42562135</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">2</span>][<span class="number">100005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>); <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>); <span class="built_in">cout</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">int</span> n, m[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> sum[<span class="number">2</span>];</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="built_in">cin</span> &gt;&gt; a[<span class="number">0</span>][i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="built_in">cin</span> &gt;&gt; a[<span class="number">1</span>][i];</span><br><span class="line">    sort(a[<span class="number">0</span>], a[<span class="number">0</span>] + n);</span><br><span class="line">    sort(a[<span class="number">1</span>], a[<span class="number">1</span>] + n);</span><br><span class="line">    m[<span class="number">0</span>] = m[<span class="number">1</span>] = n - <span class="number">1</span>;</span><br><span class="line">    sum[<span class="number">0</span>] = sum[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (m[<span class="number">0</span>] &gt;= <span class="number">0</span> || m[<span class="number">1</span>] &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> j = (i + <span class="number">1</span>) % <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (m[i] &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (m[j] &lt; <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">                m[j]--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (m[j] &lt; <span class="number">0</span>)</span><br><span class="line">                    sum[i] += a[i][m[i]--];</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (a[i][m[i]] &lt; a[j][m[j]]) m[j]--;</span><br><span class="line">                    <span class="keyword">else</span> sum[i] += a[i][m[i]--];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; sum[<span class="number">0</span>] - sum[<span class="number">1</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://codeforces.com/blog/entry/61692?#comment-456714" target="_blank" rel="noopener">MahmoudAlio’s Excellent Comment on Editorial</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Codeforces/"><i class="fas fa-hashtag fa-fw"></i>Codeforces</a>
                
                    <a href="/tags/Codeforces-Contest/"><i class="fas fa-hashtag fa-fw"></i>Codeforces Contest</a>
                
                    <a href="/tags/alg-Greedy/"><i class="fas fa-hashtag fa-fw"></i>alg:Greedy</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/codeforces-1038b-non-coprime-partition/">
              
                  Codeforces 1038B. Non-Coprime Partition（数学）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-07
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="http://codeforces.com/contest/1038/problem/B" target="_blank" rel="noopener">http://codeforces.com/contest/1038/problem/B</a></p>
<p>提交次数：1/2</p>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>给定正整数<code>n</code>，要求将<code>1</code>到<code>n</code>的数分成两个各自非空的集合<code>S1</code>和<code>S2</code>，且<code>gcd(sum(S1), sum(S2)) &gt; 1</code>。任意合法的解均可接受。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>这道题是个水题。但我一开始根本就没看清输出要求（要先输出集合的大小，再输出集合中的元素），所以WA了一次。</p>
<hr>
<p>很显然有很多种分法，所以一个直觉是，对于一般的<code>n</code>，必然存在一组合法的解。由于<code>1 + 2 + ... + n = n*(n+1) / 2</code>，不妨这样构造：</p>
<ul>
<li>当<code>n = 1, 2</code>时，显然没有合法的分法。</li>
<li>当<code>n</code>为大于1的奇数时，<code>n</code>必然是<code>n*(n+1) / 2</code>的约数，那么不妨把<code>n</code>分成一组（<code>S1</code>），其他数分成另一组，此时<code>sum(S2) = 1 + 2 + ... + (n-1) = (n-1)*n / 2</code>，<code>gcd(sum(S1), sum(S2)) = n</code>。</li>
<li>当<code>n</code>为大于2的偶数时，<code>n / 2</code>必然是<code>n*(n+1) / 2</code>的约数，那么不妨把<code>n / 2</code>分为一组，其他数分为另一组，同理可得此时<code>gcd(sum(S1), sum(S2)) = n / 2</code>。</li>
</ul>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"No"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Yes"</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; n &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; n - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; i;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Yes"</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; n / <span class="number">2</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; n - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">if</span> (i != n / <span class="number">2</span>)</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; i;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Codeforces/"><i class="fas fa-hashtag fa-fw"></i>Codeforces</a>
                
                    <a href="/tags/Codeforces-Contest/"><i class="fas fa-hashtag fa-fw"></i>Codeforces Contest</a>
                
                    <a href="/tags/alg-Math/"><i class="fas fa-hashtag fa-fw"></i>alg:Math</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
      

  </section>






  
      <br>
      <div class="prev-next">
          <div class="prev-next">
              
                  <a class="prev" rel="prev" href="/archives/2018/09/page/2/">
                      <section class="post prev">
                          <i class="fas fa-chevron-left" aria-hidden="true"></i>&nbsp;上一页&nbsp;
                      </section>
                  </a>
              
              <p class="current">
                  3 / 7
              </p>
              
                  <a class="next" rel="next" href="/archives/2018/09/page/4/">
                      <section class="post next">
                          &nbsp;下一页&nbsp;<i class="fas fa-chevron-right" aria-hidden="true"></i>
                      </section>
                  </a>
              

          </div>
      </div>

  

  <!-- 根据主题中的设置决定是否在archive中针对摘要部分的MathJax公式加载mathjax.js文件 -->
  

  
    <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX","TeX"],
      linebreaks: { automatic:true },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" },
      noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
      Macros: { href: "{}" }
    },
    messageStyle: "none"
  });
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += (all[i].SourceElement().parentNode.className ? ' ' : '') + 'has-jax';
    }
    console.log("mathjax did loaded!");
  });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

  





<!-- 根据主题中的设置决定是否在archive中针对摘要部分的MathJax公式加载mathjax.js文件 -->



    <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX","TeX"],
      linebreaks: { automatic:true },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" },
      noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
      Macros: { href: "{}" }
    },
    messageStyle: "none"
  });
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += (all[i].SourceElement().parentNode.className ? ' ' : '') + 'has-jax';
    }
    console.log("mathjax did loaded!");
  });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>



        </div>
        <aside class='l_side'>
            
  
  
    
      
      
        <section class="author">
  <div class="content pure">
    
    
    
      <div class="social-wrapper">
        
          
            <a href="mailto:zhanghuimeng1997@gmail.com" class="social flat-btn" target="_blank" rel="external"><i class="social fas fa-envelope" aria-hidden="true"></i></a>
          
        
          
            <a href="https://github.com/zhanghuimeng" class="social flat-btn" target="_blank" rel="external"><i class="social fab fa-github" aria-hidden="true"></i></a>
          
        
          
            <a href="https://music.163.com/#/user/home?id=261028414" class="social flat-btn" target="_blank" rel="external"><i class="social fas fa-music" aria-hidden="true"></i></a>
          
        
      </div>
    
  </div>
</section>

      
    
  
    
      
      
        

      
    
  
    
      
      
        
  <section class="category">
    
<header class="pure">
  <div><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;所有分类</div>
  
</header>

    <div class="content pure">
      <ul class="entry">
        
          <li><a class="flat-box" title="/categories/Codeforces/" href="/categories/Codeforces/"><div class="name">Codeforces</div><div class="badge">(3)</div></a></li>
        
          <li><a class="flat-box" title="/categories/Leetcode/" href="/categories/Leetcode/"><div class="name">Leetcode</div><div class="badge">(9)</div></a></li>
        
          <li><a class="flat-box" title="/categories/USACO/" href="/categories/USACO/"><div class="name">USACO</div><div class="badge">(1)</div></a></li>
        
      </ul>
    </div>
  </section>


      
    
  
    
      
      
        
  <section class="tagcloud">
    
<header class="pure">
  <div><i class="fas fa-fire fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;热门标签</div>
  
</header>

    <div class="content pure">
      <a href="/tags/A-Munday/" style="font-size: 14px; color: #999">A.Munday</a> <a href="/tags/Blogging/" style="font-size: 14px; color: #999">Blogging</a> <a href="/tags/C-Marlowe/" style="font-size: 14px; color: #999">C.Marlowe</a> <a href="/tags/CSP/" style="font-size: 15.11px; color: #919191">CSP</a> <a href="/tags/Codeforces/" style="font-size: 19.56px; color: #737373">Codeforces</a> <a href="/tags/Codeforces-Contest/" style="font-size: 19.19px; color: #767676">Codeforces Contest</a> <a href="/tags/Counseling/" style="font-size: 14px; color: #999">Counseling</a> <a href="/tags/Cryptography/" style="font-size: 14px; color: #999">Cryptography</a> <a href="/tags/D-Drayton/" style="font-size: 14px; color: #999">D.Drayton</a> <a href="/tags/Deep-Learning/" style="font-size: 14px; color: #999">Deep Learning</a> <a href="/tags/Depth-first-Search/" style="font-size: 14px; color: #999">Depth-first Search</a> <a href="/tags/DigitCircuit/" style="font-size: 14px; color: #999">DigitCircuit</a> <a href="/tags/E-Vere/" style="font-size: 14px; color: #999">E. Vere</a> <a href="/tags/E-Spencer/" style="font-size: 14px; color: #999">E.Spencer</a> <a href="/tags/Essay/" style="font-size: 14.37px; color: #969696">Essay</a> <a href="/tags/Github/" style="font-size: 14.74px; color: #949494">Github</a> <a href="/tags/GoldenTreasury/" style="font-size: 23.26px; color: #5a5a5a">GoldenTreasury</a> <a href="/tags/H-Constable/" style="font-size: 14px; color: #999">H.Constable</a> <a href="/tags/J-Donne/" style="font-size: 14px; color: #999">J.Donne</a> <a href="/tags/J-Lyly/" style="font-size: 14px; color: #999">J.Lyly</a> <a href="/tags/J-Sylvester/" style="font-size: 14px; color: #999">J.Sylvester</a> <a href="/tags/J-Webster/" style="font-size: 14px; color: #999">J.Webster</a> <a href="/tags/Leetcode/" style="font-size: 24px; color: #555">Leetcode</a> <a href="/tags/Leetcode-Contest/" style="font-size: 23.63px; color: #585858">Leetcode Contest</a> <a href="/tags/Lyric/" style="font-size: 17.33px; color: #828282">Lyric</a> <a href="/tags/Machine-Learning/" style="font-size: 15.11px; color: #919191">Machine Learning</a> <a href="/tags/Machine-Translation/" style="font-size: 16.59px; color: #878787">Machine Translation</a> <a href="/tags/Natural-Language-Processing/" style="font-size: 17.33px; color: #828282">Natural Language Processing</a> <a href="/tags/OS/" style="font-size: 21.78px; color: #646464">OS</a> <a href="/tags/OSTEP/" style="font-size: 18.07px; color: #7d7d7d">OSTEP</a> <a href="/tags/OldBlog/" style="font-size: 15.11px; color: #919191">OldBlog</a> <a href="/tags/P-Sidney/" style="font-size: 14px; color: #999">P.Sidney</a> <a href="/tags/Paper/" style="font-size: 16.59px; color: #878787">Paper</a> <a href="/tags/Paul-Simon/" style="font-size: 14px; color: #999">Paul Simon</a> <a href="/tags/PhysicsExperiment/" style="font-size: 14.37px; color: #969696">PhysicsExperiment</a> <a href="/tags/Psychology/" style="font-size: 14px; color: #999">Psychology</a> <a href="/tags/Quality-Estimation/" style="font-size: 15.48px; color: #8f8f8f">Quality Estimation</a> <a href="/tags/R-Barnfield/" style="font-size: 14px; color: #999">R.Barnfield</a> <a href="/tags/Raspberry-Pi/" style="font-size: 14px; color: #999">Raspberry Pi</a> <a href="/tags/Reading-Report/" style="font-size: 17.7px; color: #808080">Reading Report</a> <a href="/tags/S-Daniel/" style="font-size: 14px; color: #999">S.Daniel</a> <a href="/tags/SGU/" style="font-size: 14.37px; color: #969696">SGU</a> <a href="/tags/Sonnet/" style="font-size: 20.67px; color: #6c6c6c">Sonnet</a> <a href="/tags/Spokes/" style="font-size: 14.74px; color: #949494">Spokes</a> <a href="/tags/SystemAnalysis-Control/" style="font-size: 14px; color: #999">SystemAnalysis&Control</a> <a href="/tags/T-Dekker/" style="font-size: 14px; color: #999">T.Dekker</a> <a href="/tags/T-Heywood/" style="font-size: 14px; color: #999">T.Heywood</a> <a href="/tags/T-Lodge/" style="font-size: 14px; color: #999">T.Lodge</a> <a href="/tags/T-Nashe/" style="font-size: 14px; color: #999">T.Nashe</a> <a href="/tags/T-Wyatt/" style="font-size: 14px; color: #999">T.Wyatt</a> <a href="/tags/THUMT/" style="font-size: 14.37px; color: #969696">THUMT</a> <a href="/tags/TensorFlow/" style="font-size: 15.11px; color: #919191">TensorFlow</a> <a href="/tags/Translation/" style="font-size: 18.44px; color: #7b7b7b">Translation</a> <a href="/tags/Tree/" style="font-size: 14px; color: #999">Tree</a> <a href="/tags/USACO/" style="font-size: 22.52px; color: #5f5f5f">USACO</a> <a href="/tags/W-Alexander/" style="font-size: 14px; color: #999">W.Alexander</a> <a href="/tags/W-Drummond/" style="font-size: 15.11px; color: #919191">W.Drummond</a> <a href="/tags/W-Shakespeare/" style="font-size: 22.15px; color: #626262">W.Shakespeare</a> <a href="/tags/object-Object/" style="font-size: 14px; color: #999">[object Object]</a> <a href="/tags/alg-Array/" style="font-size: 21.04px; color: #696969">alg:Array</a> <a href="/tags/alg-Automata/" style="font-size: 14px; color: #999">alg:Automata</a> <a href="/tags/alg-Backtracking/" style="font-size: 15.85px; color: #8c8c8c">alg:Backtracking</a> <a href="/tags/alg-Binary-Indexed-Tree/" style="font-size: 14px; color: #999">alg:Binary Indexed Tree</a> <a href="/tags/alg-Binary-Search/" style="font-size: 15.48px; color: #8f8f8f">alg:Binary Search</a> <a href="/tags/alg-Binary-Search-Tree/" style="font-size: 16.59px; color: #878787">alg:Binary Search Tree</a> <a href="/tags/alg-Binray-Search/" style="font-size: 14px; color: #999">alg:Binray Search</a> <a href="/tags/alg-Bit-Manipulation/" style="font-size: 15.48px; color: #8f8f8f">alg:Bit Manipulation</a> <a href="/tags/alg-Bitmasks/" style="font-size: 14px; color: #999">alg:Bitmasks</a> <a href="/tags/alg-Breadth-first-Search/" style="font-size: 17.33px; color: #828282">alg:Breadth-first Search</a> <a href="/tags/alg-Breadth-firth-Search/" style="font-size: 14.37px; color: #969696">alg:Breadth-firth Search</a> <a href="/tags/alg-Brute-Force/" style="font-size: 16.96px; color: #858585">alg:Brute Force</a> <a href="/tags/alg-Centroid-Decomposition/" style="font-size: 14px; color: #999">alg:Centroid Decomposition</a> <a href="/tags/alg-Depth-first-Search/" style="font-size: 20.3px; color: #6e6e6e">alg:Depth-first Search</a> <a href="/tags/alg-Divide-and-Conquer/" style="font-size: 14px; color: #999">alg:Divide and Conquer</a> <a href="/tags/alg-Dynamic-Porgramming/" style="font-size: 14px; color: #999">alg:Dynamic Porgramming</a> <a href="/tags/alg-Dynamic-Programming/" style="font-size: 21.04px; color: #696969">alg:Dynamic Programming</a> <a href="/tags/alg-Games/" style="font-size: 14px; color: #999">alg:Games</a> <a href="/tags/alg-Geometry/" style="font-size: 14px; color: #999">alg:Geometry</a> <a href="/tags/alg-Graph/" style="font-size: 15.48px; color: #8f8f8f">alg:Graph</a> <a href="/tags/alg-Greedy/" style="font-size: 21.41px; color: #676767">alg:Greedy</a> <a href="/tags/alg-Hash-Table/" style="font-size: 20.67px; color: #6c6c6c">alg:Hash Table</a> <a href="/tags/alg-Heap/" style="font-size: 15.11px; color: #919191">alg:Heap</a> <a href="/tags/alg-In-Order-Traversal/" style="font-size: 14.37px; color: #969696">alg:In-Order Traversal</a> <a href="/tags/alg-Linked-List/" style="font-size: 15.48px; color: #8f8f8f">alg:Linked List</a> <a href="/tags/alg-Math/" style="font-size: 22.89px; color: #5d5d5d">alg:Math</a> <a href="/tags/alg-Matrix/" style="font-size: 14px; color: #999">alg:Matrix</a> <a href="/tags/alg-Meet-in-the-Middle/" style="font-size: 14.37px; color: #969696">alg:Meet in the Middle</a> <a href="/tags/alg-Minimax/" style="font-size: 14px; color: #999">alg:Minimax</a> <a href="/tags/alg-Monotonic-Stack/" style="font-size: 15.48px; color: #8f8f8f">alg:Monotonic Stack</a> <a href="/tags/alg-Priority-Queue/" style="font-size: 14px; color: #999">alg:Priority Queue</a> <a href="/tags/alg-Queue/" style="font-size: 14.74px; color: #949494">alg:Queue</a> <a href="/tags/alg-Random/" style="font-size: 14.74px; color: #949494">alg:Random</a> <a href="/tags/alg-Recursion/" style="font-size: 15.48px; color: #8f8f8f">alg:Recursion</a> <a href="/tags/alg-Recursive/" style="font-size: 14.37px; color: #969696">alg:Recursive</a> <a href="/tags/alg-Rejection-Sampling/" style="font-size: 14px; color: #999">alg:Rejection Sampling</a> <a href="/tags/alg-Reservoir-Sampling/" style="font-size: 14px; color: #999">alg:Reservoir Sampling</a> <a href="/tags/alg-Segmentation-Tree/" style="font-size: 14px; color: #999">alg:Segmentation Tree</a> <a href="/tags/alg-Set/" style="font-size: 14px; color: #999">alg:Set</a> <a href="/tags/alg-Sort/" style="font-size: 14.74px; color: #949494">alg:Sort</a> <a href="/tags/alg-Stack/" style="font-size: 18.44px; color: #7b7b7b">alg:Stack</a> <a href="/tags/alg-String/" style="font-size: 18.81px; color: #787878">alg:String</a> <a href="/tags/alg-Topological-Sort/" style="font-size: 14px; color: #999">alg:Topological Sort</a> <a href="/tags/alg-Tree/" style="font-size: 19.93px; color: #717171">alg:Tree</a> <a href="/tags/alg-Trie/" style="font-size: 14px; color: #999">alg:Trie</a> <a href="/tags/alg-Two-Pointers/" style="font-size: 18.07px; color: #7d7d7d">alg:Two Pointers</a> <a href="/tags/alg-Union-find-Forest/" style="font-size: 15.48px; color: #8f8f8f">alg:Union-find Forest</a> <a href="/tags/artist-Ceremony/" style="font-size: 14px; color: #999">artist:Ceremony</a> <a href="/tags/artist-Cruel-Hand/" style="font-size: 14.37px; color: #969696">artist:Cruel Hand</a> <a href="/tags/artist-Have-Heart/" style="font-size: 14px; color: #999">artist:Have Heart</a> <a href="/tags/artist-Johnny-Cash/" style="font-size: 14px; color: #999">artist:Johnny Cash</a> <a href="/tags/artist-Touche-Amore/" style="font-size: 14px; color: #999">artist:Touche Amore</a> <a href="/tags/artist-Wir-Sind-Helden/" style="font-size: 14.74px; color: #949494">artist:Wir Sind Helden</a> <a href="/tags/translation/" style="font-size: 14px; color: #999">translation</a> <a href="/tags/ucore/" style="font-size: 14px; color: #999">ucore</a> <a href="/tags/付勇林/" style="font-size: 15.85px; color: #8c8c8c">付勇林</a> <a href="/tags/卞之琳/" style="font-size: 14px; color: #999">卞之琳</a> <a href="/tags/屠岸/" style="font-size: 16.22px; color: #8a8a8a">屠岸</a> <a href="/tags/戴镏龄/" style="font-size: 15.85px; color: #8c8c8c">戴镏龄</a> <a href="/tags/曹明伦/" style="font-size: 15.48px; color: #8f8f8f">曹明伦</a> <a href="/tags/朱生豪/" style="font-size: 17.7px; color: #808080">朱生豪</a> <a href="/tags/李霁野/" style="font-size: 15.11px; color: #919191">李霁野</a> <a href="/tags/杨熙龄/" style="font-size: 14px; color: #999">杨熙龄</a> <a href="/tags/林天斗/" style="font-size: 14px; color: #999">林天斗</a> <a href="/tags/梁宗岱/" style="font-size: 16.96px; color: #858585">梁宗岱</a> <a href="/tags/梁葆成/" style="font-size: 14px; color: #999">梁葆成</a> <a href="/tags/袁广达/" style="font-size: 14px; color: #999">袁广达</a> <a href="/tags/郭沫若/" style="font-size: 14px; color: #999">郭沫若</a> <a href="/tags/黄新渠/" style="font-size: 14px; color: #999">黄新渠</a>
    </div>
  </section>


      
    
  
    
      
      
        <section class="list">
  
<header class="pure">
  <div><i class="fas fa-link fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;特别链接</div>
  
</header>

  <div class="content pure">
    <ul class="entry">
      
        <li><a class="flat-box" title="https://wenj.github.io/" href="https://wenj.github.io/">
          <div class="name">
            
              <i class="fas fa-comment-dots fa-fw" aria-hidden="true"></i>
            
            &nbsp;&nbsp;wenj
          </div>
          
        </a></li>
      
        <li><a class="flat-box" title="http://bellasong.site/" href="http://bellasong.site/">
          <div class="name">
            
              <i class="fas fa-comment-dots fa-fw" aria-hidden="true"></i>
            
            &nbsp;&nbsp;ssh
          </div>
          
        </a></li>
      
    </ul>
  </div>
</section>

      
    
  


        </aside>
        <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
    </div>
    <footer id="footer" class="clearfix">
  
  
    <div class="social-wrapper">
      
        
          <a href="mailto:zhanghuimeng1997@gmail.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external"></a>
        
      
        
          <a href="https://github.com/zhanghuimeng" class="social fab fa-github flat-btn" target="_blank" rel="external"></a>
        
      
        
          <a href="https://music.163.com/#/user/home?id=261028414" class="social fas fa-music flat-btn" target="_blank" rel="external"></a>
        
      
    </div>
  
  <br>
  <div><p>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
  <div>本站使用 <a href="https://xaoxuu.com/wiki/material-x/" target="_blank" class="codename">Material X</a> 作为主题，总访问量为 <span id="busuanzi_value_site_pv"><i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span> 次。
  </div>
</footer>

    <script>setLoadingBarProgress(80);</script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>

  <script>
    var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
    var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
    var ALGOLIA_API_KEY = "";
    var ALGOLIA_APP_ID = "";
    var ALGOLIA_INDEX_NAME = "";
    var AZURE_SERVICE_NAME = "";
    var AZURE_INDEX_NAME = "";
    var AZURE_QUERY_KEY = "";
    var BAIDU_API_ID = "";
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/"||"/";
    if(!ROOT.endsWith('/'))ROOT += '/';
  </script>


  
    <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.5/dist/scrollreveal.min.js"></script>
    <script type="text/javascript">
      $(function() {
        const $reveal = $('.reveal');
    		if ($reveal.length === 0) return;
    		const sr = ScrollReveal({ distance: 0 });
    		sr.reveal('.reveal');
      });
    </script>
  
  
    <script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>
    <script type="text/javascript">
      $(function() {
        Waves.attach('.flat-btn', ['waves-button']);
        Waves.attach('.float-btn', ['waves-button', 'waves-float']);
        Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
        Waves.attach('.flat-box', ['waves-block']);
        Waves.attach('.float-box', ['waves-block', 'waves-float']);
        Waves.attach('.waves-image');
        Waves.init();
      });
    </script>
  
  
    <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>
  
  
  


  
  
  
    
  
  
    <script src="/js/app.js"></script>
<script src="/js/search.js"></script>
  








    <script>setLoadingBarProgress(100);</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>

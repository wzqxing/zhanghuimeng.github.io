<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>Archives: 2018/9 | 张慕晖的博客</title>
  
  

  <link rel="alternate" href="/atom.xml" title="张慕晖的博客">

  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- meta -->
  
  <!-- link -->
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.6.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.1/katex.min.css">

  
  
  <link rel="undefined" href>
  
  

  


  
  <link rel="stylesheet" href="/style.css">
  

  



  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
    <!-- ga -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-119345306-1', 'https://zhanghuimeng.github.io/');
      ga('send', 'pageview');
    </script><!-- hexo-inject:begin --><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css'><!-- hexo-inject:end -->
  
  
</head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="loading-bar-wrapper">
  <div id="loading-bar" class="pure"></div>
</div>

    <script>setLoadingBarProgress(20)</script>
    <header class="l_header pure">
	<div class="wrapper">
		<div class="nav-main container container--flex">
      <a class="logo flat-box" href="/">
        
          张慕晖的博客
        
      </a>
			<div class="menu">
				<ul class="h-list">
          
  					
  						<li>
								<a id="https:zhanghuimeng.github.io" class="nav flat-box" href="https://zhanghuimeng.github.io/">
									<i class="fas fa-home fa-fw"></i>&nbsp;主页
								</a>
							</li>
      			
  						<li>
								<a id="tags" class="nav flat-box" href="/tags/">
									<i class="fas fa-rss fa-fw"></i>&nbsp;标签
								</a>
							</li>
      			
  						<li>
								<a id="archives" class="nav flat-box" href="/archives/">
									<i class="fas fa-archive fa-fw"></i>&nbsp;归档
								</a>
							</li>
      			
  						<li>
								<a id="categories" class="nav flat-box" href="/categories/">
									<i class="fas fa-users fa-fw"></i>&nbsp;分类
								</a>
							</li>
      			
      		
				</ul>
			</div>

			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="搜索">
						<span class="icon"><i class="fas fa-search fa-fw"></i></span>
					</form>
				</div>
			
			<ul class="switcher h-list">
				
					<li class="s-search"><a class="fas fa-search fa-fw" href="javascript:void(0)"></a></li>
				
				<li class="s-menu"><a class="fas fa-bars fa-fw" href="javascript:void(0)"></a></li>
			</ul>
		</div>

		<div class="nav-sub container container--flex">
			<a class="logo flat-box"></a>
			<ul class="switcher h-list">
				<li class="s-comment"><a class="flat-btn fas fa-comments fa-fw" href="javascript:void(0)"></a></li>
				<li class="s-toc"><a class="flat-btn fas fa-list fa-fw" href="javascript:void(0)"></a></li>
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone">
    <header>
		<nav class="menu">
      <ul>
          
              
                  <li>
										<a id="https:zhanghuimeng.github.io" class="nav flat-box" href="https://zhanghuimeng.github.io/">
											<i class="fas fa-home fa-fw"></i>&nbsp;主页
										</a>
                  </li>
              
                  <li>
										<a id="tags" class="nav flat-box" href="/tags/">
											<i class="fas fa-rss fa-fw"></i>&nbsp;标签
										</a>
                  </li>
              
                  <li>
										<a id="archives" class="nav flat-box" href="/archives/">
											<i class="fas fa-archive fa-fw"></i>&nbsp;归档
										</a>
                  </li>
              
                  <li>
										<a id="categories" class="nav flat-box" href="/categories/">
											<i class="fas fa-users fa-fw"></i>&nbsp;分类
										</a>
                  </li>
              
       
      </ul>
		</nav>
    </header>
	</aside>

    <script>setLoadingBarProgress(40);</script>
    <div class="l_body">
    <div class='container clearfix'>
        <div class='l_main'>
            
	
    <script>
        window.subData= { title:'year : 2018.9'}
    </script>




  <section class="post-list">
      



      

      

      
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/leetcode-903-valid-permutations-for-di-sequence/">
              
                  Leetcode 903. Valid Permutations for DI Sequence（DP）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-23
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="https://leetcode.com/problems/valid-permutations-for-di-sequence/description/" target="_blank" rel="noopener">https://leetcode.com/problems/valid-permutations-for-di-sequence/description/</a></p>
<p>标记难度：Hard</p>
<p>提交次数：2/3</p>
<p>代码效率：</p>
<ul>
<li>O(N^2) DP：79.78%</li>
<li>O(N^3) DP：14.07%</li>
</ul>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>给定<code>n</code>，求所有数字满足一定上升和下降规律的<code>n</code>的排列。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>比赛的时候看到这道题，我心里是十分懵逼的，觉得应当用搜索的方法去做，但又感觉复杂度太高，即使剪枝也很离谱。显然，我根本没有怎么接触过这个类型的题。所以比赛之后我仍然很懵逼。</p>
<hr>
<p>事实上这是一道动态规划题。但是递推的方式并不好想。令<code>dp[i][j]</code>表示长度为<code>i</code>且结尾为<code>j</code>的符合DI序列的排列数量。（在这里，长度为<code>i</code>也就意味着，是从1到<code>i</code>的数字的排列。）下一个问题是如何进行递推。如果我们之前已经得到了一个<code>1~i</code>的排列，如何把<code>j</code>合理地添加进去，使得这个排列变成<code>1~i+1</code>的排列，仍然满足原有的DI序列，且结尾是<code>j</code>？</p>
<p>这个想法无疑十分巧妙：把比<code>j</code>更大的数都加上1，然后把j附在排列的最后。这样就可以得到一个仍然合法且合理的排列了。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<p><img src="visualization.gif" alt="图示：为何对部分数值的+1操作不会破坏DI性质"></p>
<p>如果DI序列当前的值为<code>D</code>，则<code>dp[i][j] = dp[i-1][j] + ... + dp[i-1][N]</code>；如果当前的值为<code>I</code>，则<code>dp[i][j] = dp[i-1][1] + ... + dp[i-1][j-1]</code>。</p>
<p>如果不进行优化，则这是一个<code>O(N^3)</code>的算法。但是实际上可以非常迅速地用前缀和数组的方法加以改进，这样就变成了一个<code>O(N^2)</code>的算法。<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p>
<p>除此之外，还有一种比较好的思考方法：先构思一种自顶向下的回溯法，再把这种方法逐渐转换为DP。不过具体内容我不是很想看了。<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p>
<hr>
<p>最后一个有趣的问题是：是否对于任何DI序列，都存在合法的排列？我觉得可以用和动态规划类似的方法进行推导。令函数<code>f(str)</code>表示DI序列<code>str</code>所对应的所有可能末尾元素的集合。</p>
<ul>
<li>当<code>str.length = 1</code>时，显然<code>f(&quot;D&quot;) = {1}, f(&quot;I&quot;) = {2}</code>，集合均非空</li>
<li>当<code>str.length = N, N &gt;= 2</code>时，对于某一<code>str</code>，由归纳假设，有<code>f(str[0:-1])</code>非空。
<ul>
<li>当<code>str[-1] = 'I'</code>时，从<code>f(str[0:-1])</code>中任取元素，直接将<code>N</code>附在该元素对应的排列后，即可构造出新的合法排列</li>
<li>当<code>str[-1] = 'D'</code>时，从<code>f(str[0:-1])</code>中任取元素，记该元素为<code>j</code>，将对应排列中<code>&gt;= j</code>的元素均增加1，并把<code>j</code>附在排列最后，即可构造出新的合法排列</li>
</ul>
</li>
</ul>
<p>所以对于任意长度的任意DI序列，<code>f(str)</code>都不为空，得证。</p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<h3 id="on3-dp"><a class="markdownIt-Anchor" href="#on3-dp"></a> O(N^3) DP</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numPermsDISequence</span><span class="params">(<span class="built_in">string</span> S)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = S.length() + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> MOD = <span class="number">1000000007</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> dp[N+<span class="number">1</span>][N+<span class="number">1</span>];  <span class="comment">// length i, ends with j</span></span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">        dp[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= N; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (S[i<span class="number">-2</span>] == <span class="string">'D'</span>) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> k = j; k &lt;= N; k++)</span><br><span class="line">                        dp[i][j] = (dp[i][j] + dp[i<span class="number">-1</span>][k]) % MOD;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt; j; k++)</span><br><span class="line">                        dp[i][j] = (dp[i][j] + dp[i<span class="number">-1</span>][k]) % MOD;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (i == N)</span><br><span class="line">                    ans = (ans + dp[i][j]) % MOD;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="on2-dp"><a class="markdownIt-Anchor" href="#on2-dp"></a> O(N^2) DP</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numPermsDISequence</span><span class="params">(<span class="built_in">string</span> S)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = S.length() + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> MOD = <span class="number">1000000007</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> dp[N+<span class="number">1</span>][N+<span class="number">1</span>];  <span class="comment">// length i, ends with j</span></span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> g[N+<span class="number">1</span>][N+<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">        <span class="built_in">memset</span>(g, <span class="number">0</span>, <span class="keyword">sizeof</span>(g));</span><br><span class="line">        dp[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line">            g[<span class="number">1</span>][i] = g[<span class="number">1</span>][i<span class="number">-1</span>] + dp[<span class="number">1</span>][i];</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= N; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (S[i<span class="number">-2</span>] == <span class="string">'D'</span>) &#123;</span><br><span class="line">                    <span class="comment">// [j, N]</span></span><br><span class="line">                    dp[i][j] = (g[i<span class="number">-1</span>][N] - g[i<span class="number">-1</span>][j<span class="number">-1</span>] + MOD) % MOD;</span><br><span class="line">                    <span class="comment">// beware of mod subtraction...</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// [1, j-1]</span></span><br><span class="line">                    dp[i][j] = g[i<span class="number">-1</span>][j<span class="number">-1</span>] % MOD;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (i == N)</span><br><span class="line">                    ans = (ans + dp[i][j]) % MOD;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= N; j++)</span><br><span class="line">                g[i][j] = (g[i][j<span class="number">-1</span>] + dp[i][j]) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://leetcode.com/problems/valid-permutations-for-di-sequence/discuss/169126/Visualization-Key-to-the-DP-solution:-imagine-cutting-a-piece-of-paper-and-separating-the-halves" target="_blank" rel="noopener">[Visualization] Key to the DP solution: imagine cutting a piece of paper and separating the halves</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://leetcode.com/problems/valid-permutations-for-di-sequence/discuss/168289/Share-my-O%28N3%29-greater-O%28N2%29-C++-DP-solution.-Including-the-thoughts-of-improvement." target="_blank" rel="noopener">Share my O(N^3) =&gt; O(N^2) C++ DP solution. Including the thoughts of improvement.</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p><a href="https://leetcode.com/problems/valid-permutations-for-di-sequence/discuss/168612/Top-down-with-Memo-greater-Bottom-up-DP-greater-N3-DP-greater-N2-DP-greater-O%28N%29-space" target="_blank" rel="noopener">Top-down with Memo -&gt; Bottom-up DP -&gt; N^3 DP -&gt; N^2 DP -&gt; O(N) space</a> <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Leetcode/"><i class="fas fa-hashtag fa-fw"></i>Leetcode</a>
                
                    <a href="/tags/alg-Dynamic-Programming/"><i class="fas fa-hashtag fa-fw"></i>alg:Dynamic Programming</a>
                
                    <a href="/tags/Leetcode-Contest/"><i class="fas fa-hashtag fa-fw"></i>Leetcode Contest</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/leetcode-404-sum-of-left-leaves/">
              
                  Leetcode 404. Sum of Left Leaves（树）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-23
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="https://leetcode.com/problems/sum-of-left-leaves/description/" target="_blank" rel="noopener">https://leetcode.com/problems/sum-of-left-leaves/description/</a></p>
<p>标记难度：Easy</p>
<p>提交次数：1/1</p>
<p>代码效率：1.40%</p>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>给定一棵二叉树，计算树中所有左侧叶结点的值之和。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>水题……</p>
<p>当然，仍然至少有三种策略：递归DFS，用栈模拟DFS，以及BFS。我在代码中明确给出了<code>left</code>和<code>right</code>的标记，用来识别当前结点是父结点的左子结点还是右子结点；当然，这并不是必要的。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(TreeNode* root, <span class="keyword">bool</span> isLeft)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (root-&gt;left == <span class="literal">nullptr</span> &amp;&amp; root-&gt;right == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isLeft) <span class="keyword">return</span> root-&gt;val;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dfs(root-&gt;left, <span class="literal">true</span>) + dfs(root-&gt;right, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">sumOfLeftLeaves</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dfs(root, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://leetcode.com/problems/sum-of-left-leaves/discuss/88950/Java-iterative-and-recursive-solutions" target="_blank" rel="noopener">Java iterative and recursive solutions</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Leetcode/"><i class="fas fa-hashtag fa-fw"></i>Leetcode</a>
                
                    <a href="/tags/alg-Tree/"><i class="fas fa-hashtag fa-fw"></i>alg:Tree</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/machine-learning-crash-course-1-construct-a-simple-linear-model/">
              
                  机器学习速成课程（1）：构建一个简单的线性模型
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-21
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>课：<a href="https://developers.google.com/machine-learning/crash-course/?hl=zh-cn" target="_blank" rel="noopener">机器学习速成课程</a></p>
<h2 id="课程内容"><a class="markdownIt-Anchor" href="#课程内容"></a> 课程内容</h2>
<h3 id="基本概念"><a class="markdownIt-Anchor" href="#基本概念"></a> 基本概念</h3>
<p>首先介绍了监督式机器学习的概念并给出了一些定义。</p>
<p><strong>标签</strong>：我们要预测的事物（简单线性回归中的y变量）</p>
<p><strong>特征</strong>：表示数据的方式，用于描述数据的输入变量。</p>
<p><strong>样本</strong>：数据的特定实例，分为有标签和无标签两类。</p>
<p>创建模型即从数据中学习规律的过程。</p>
<p>模型生命周期的两个阶段：</p>
<ul>
<li>训练：创建模型，让模型逐渐学习特征与标签之间的关系</li>
<li>推断：将训练后的模型应用于无标签样本</li>
</ul>
<p>模型的一种分类方法：</p>
<ul>
<li>回归模型：预测连续值</li>
<li>分类模型：预测离散值</li>
</ul>
<p>然后介绍了关于线性回归模型（和通用模型）的一些基本概念。线性回归模型用一条直线对样本的标签进行推断，即</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>=</mo><mi>w</mi><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">y = wx + b
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span></span></span></span></span></p>
<p><strong>损失</strong>：对单个样本而言模型预测的准确程度。</p>
<p>给定样本的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">L_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>损失（平方误差）：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mtext>观察值</mtext><mo>−</mo><mtext>预测值</mtext><msup><mo>)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">(\text{观察值} - \text{预测值})^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord text"><span class="mord cjk_fallback">观察值</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord cjk_fallback">预测值</span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></p>
<p>数据集上的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">L_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>损失：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mn>2</mn></msub><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><msub><mo>∑</mo><mrow><mo>(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo>)</mo><mo>∈</mo><mi>D</mi></mrow></msub><mo>(</mo><mi>y</mi><mo>−</mo><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>(</mo><mi>x</mi><mo>)</mo><msup><mo>)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">L_2 loss = \sum_{(x, y) \in D} (y - prediction(x))^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.22471em;vertical-align:-0.47471em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.22528999999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mclose mtight">)</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.47471em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">d</span><span class="mord mathdefault">i</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></p>
<p><strong>均方误差</strong>（MSE，Mean Squared Error）：每个样本的平均平方损失</p>
<p>在监督式学习中，机器学习算法通过以下方式构建模型：检查多个样本并尝试找出可最大限度地减少损失的模型；这一过程称为经验风险最小化。</p>
<h3 id="减少损失"><a class="markdownIt-Anchor" href="#减少损失"></a> 减少损失</h3>
<p>下一个问题就是如何选择合适的模型参数以减小误差。</p>
<p>常用的方法是，通过计算梯度获得与模型参数相关的误差函数的导数，并沿着梯度指出的方向前进。这可以视为一种迭代法。</p>
<p>迭代法有几个需要考虑的问题。一个问题是沿着这一方向需要前进多少，这被称为学习速率（learning rate）。这是一个超参数。我们需要找到一个合适的学习速率，使得梯度下降过程高效收敛，但又不会高到使该过程永远无法收敛。</p>
<p>另一个问题是起始的位置。对于凸形问题，任意起始位置都是可取的；但很多问题（如神经网络）并不是凸形问题。它们有很多可能的极小值，其中一些比其他更优。</p>
<p>最后一个问题是如何计算梯度。为了得到正确的梯度方向，需要对数据集中所有样本的梯度进行计算。但是一般来说样本量太大，这样计算复杂度太高。所以可以转而计算小型样本的梯度，有两种方法：</p>
<ul>
<li>随机梯度下降法（SGD，Stochastic Gradient Descent）：每次只抽取一个样本计算梯度。这一方法最终会收敛，但可能速度太慢，且过程比较杂乱</li>
<li>小批量梯度下降法（small batch SGD）：每批包含10-1000个样本，可以减少杂乱的过程</li>
</ul>
<p>训练模型是一个迭代的过程：将特征输入当前的模型，返回一个预测作为输出，计算输出的损失，生成新的参数值。当总体损失不再变化或变化极其缓慢时，我们称模型收敛。</p>
<p>梯度是偏导数的矢量，具有两个特征：方向和大小。梯度指向函数增长速度最快的方向，负梯度指向函数下降速度最快的方向。</p>
<p>梯度下降法用梯度乘以一个称为学习速率（步长）的标量，以确定下一个点的位置。如果学习速率过小，则会花费过长的学习时间；否则可能无法收敛。合适的学习速率取决于损失函数的平坦程度。</p>
<p>理想的学习速率：</p>
<ul>
<li>一维空间：理想学习速率是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>f</mi><mo>(</mo><mi>x</mi><msup><mo>)</mo><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup></mrow><annotation encoding="application/x-tex">1 / f(x)&#x27;&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></li>
<li>二维或多维空间：理想学习速率是1 / Hessian矩阵</li>
<li>广义凸函数：很难确定</li>
</ul>
<h2 id="编码练习使用linearregressor构建模型"><a class="markdownIt-Anchor" href="#编码练习使用linearregressor构建模型"></a> 编码练习：使用LinearRegressor构建模型</h2>
<p>我参照<a href="https://colab.research.google.com/notebooks/mlcc/first_steps_with_tensor_flow.ipynb?utm_source=mlcc&amp;utm_campaign=colab-external&amp;utm_medium=referral&amp;utm_content=firststeps-colab&amp;hl=zh-cn#scrollTo=Bd2Zkk1LE2Zr" target="_blank" rel="noopener">first_steps_with_tensor_flow.ipynb</a>中的内容在本地写了一遍并运行了一下。</p>
<p>我大概从这一过程中学到了：</p>
<ul>
<li>PyCharm的安装和使用，以及venv虚拟环境的使用</li>
<li>用Estimator API构建和训练模型的基本步骤：
<ul>
<li>定义<code>optimizer</code>和<code>feature_columns</code></li>
<li>定义数据输入函数</li>
<li>用数据输入函数对模型进行若干步训练</li>
<li>用预测数据输入函数对模型进行测试</li>
</ul>
</li>
<li><code>pandas.Dataframe</code>的基本使用方法和它与<code>numpy</code>如何联合使用</li>
<li>用<code>describe</code>、直方图等方法观察数据的分布，寻找离群值</li>
<li>用<code>matplotlib.pyplot</code>对数据特征和训练过程中的RMSE变化进行可视化表示</li>
</ul>
<p>下一个问题是如何调整超参数。简单来说，不同超参数的效果取决于数据。因此没有必须遵循的规则，需要对自己的数据进行测试。不过，仍然有一些经验法则：</p>
<ul>
<li>训练误差应该稳步减小；开始时急剧减小，最终应随着训练收敛达到平稳状态。</li>
<li>如果训练没有收敛，尝试运行更长的时间。</li>
<li>如果训练误差减小速度过慢，则提高学习速率可能有助于加快其减小速度。
<ul>
<li>但有时如果学习速率过高，训练误差的减小速度反而会变慢。</li>
<li>如果训练误差变化很大，尝试降低学习速率。</li>
<li>较低的学习速率和较大的步数/较大的批量大小通常是不错的组合</li>
</ul>
</li>
<li>批量大小过小也会导致不稳定情况。不妨先尝试100或1000等较大的值，然后逐渐减小值的大小，直到出现性能降低的情况。</li>
</ul>
<p>以及在代码中：</p>
<ul>
<li>steps：指训练迭代的总次数。一步计算一批样本产生的损失，然后使用该值修改模型的权重一次。</li>
<li>batch size：是指单步的样本数量（随机选择）。例如，SGD的批量大小为1。</li>
</ul>
<p>总被训练样本数 = batch size * steps</p>
<ul>
<li>periods：控制报告的粒度。例如，如果periods设为7且steps设为70，则练习将每10步（共输出7次）输出一次损失值。</li>
</ul>
<p>每period被训练的样本数 = batch size * steps / periods</p>
<p>我随便调了几组参数。我觉得目前这不是重点，所以就不写了。</p>
<p>完整代码见<a href="https://github.com/zhanghuimeng/learnTensorFlow/blob/master/first_linear_regression/first_steps.py" target="_blank" rel="noopener">learnTensorFlow/first_linear_regression/first_steps.py</a>。</p>
<script src="http://gist-it.appspot.com/https://github.com/zhanghuimeng/learnTensorFlow/blob/master/first_linear_regression/first_steps.py"></script>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Machine-Learning/"><i class="fas fa-hashtag fa-fw"></i>Machine Learning</a>
                
                    <a href="/tags/TensorFlow/"><i class="fas fa-hashtag fa-fw"></i>TensorFlow</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/reading-report-tensorflow-in-depth-ch-1-tensorflow-summary/">
              
                  读书笔记：《深入理解TensorFlow》第1章：TensorFlow系统概述
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-18
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>书：<a href="https://github.com/DjangoPeng/tensorflow-in-depth" target="_blank" rel="noopener">深入理解TensorFlow架构设计与实现原理</a></p>
<hr>
<p>本章对TensorFlow进行了一些非常基本的介绍，主要包括以下内容：</p>
<ul>
<li>TensorFlow的发展过程和优缺点</li>
<li>TensorFlow的设计目标和独特性</li>
<li>TensorFlow的基本架构</li>
</ul>
<p>由于我现在对TensorFlow其实还没有太多的了解，前两部分我只是粗略地看了一下。</p>
<h2 id="tensorflow的发展过程和优缺点"><a class="markdownIt-Anchor" href="#tensorflow的发展过程和优缺点"></a> TensorFlow的发展过程和优缺点</h2>
<p>TensorFlow是Google出的。其他发展过程略。</p>
<p>TensorFlow的优点：</p>
<p>• 线性代数编译器XLA；可针对不同软硬件环境优化配置<br>
• 框架设计通用：提供高层封装API和底层元素API<br>
• 支持生产环境部署<br>
• 语言接口丰富：核心层是C++，应用层使用SWIG等技术封装<br>
• 端云协同计算</p>
<p>以及丰富的算子库和教学资料。</p>
<p>TensorFlow的缺点：</p>
<ul>
<li>API太丰富，太灵活，学习成本过高。</li>
<li>需要进行一些特殊配置才能使TensorFlow达到最高性能。</li>
</ul>
<h2 id="tensorflow的设计目标和独特性"><a class="markdownIt-Anchor" href="#tensorflow的设计目标和独特性"></a> TensorFlow的设计目标和独特性</h2>
<p>TensorFlow的设计目标：面向多种应用场景和编程范式、支持异构计算平台、具备优异性能与可伸缩性的通用人工智能引擎。</p>
<p>TensorFlow的独特性：</p>
<ul>
<li>灵活性</li>
<li>端云协同计算</li>
<li>高性能的基础平台软件</li>
</ul>
<p>（上述内容我看不太懂，因为没有什么了解。）</p>
<h2 id="tensorflow的基本架构"><a class="markdownIt-Anchor" href="#tensorflow的基本架构"></a> TensorFlow的基本架构</h2>
<p>一般来说，平台设计模式有两种主要形态：</p>
<ul>
<li>库模式：平台层软件以静态或动态开发库形式存在，应用层开发者需要编写程序调用这些软件；程序入口和整体流程控制权把握在开发者手中</li>
<li>框架模式：平台层软件以可执行文件的形式存在，并以前端交互式程序或后端守护进程方式独立运行。应用层开发者需要遵守接口约束，开发子程序。程序入口和整体流程控制权由框架把握。</li>
</ul>
<p>TensorFlow采用的是库模式。</p>
<p><img src="infrastructure.png" alt="TensorFlow的组件结构示意图"></p>
<p>上图中的“TensorFlow运行时核心库”就是平时所说的TensorFlow库。这个库是C++编写的，主要分为以下三个层次：</p>
<ul>
<li>公共运行时：实现了数据流图计算的基本逻辑</li>
<li>分布式运行时：实现了数据流图的跨进程协同计算逻辑</li>
<li>算子核函数：包含图上具体操作结点的算法实现代码</li>
</ul>
<p>在运行时核心库之上是API层，它对用户屏蔽了核心库的动态链接逻辑。</p>
<p>运行时核心库的底层依赖包括计算库和通信库，其中有些是外部组件（如Eigen），有些是内部集成（如StreamExecutor）。</p>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Reading-Report/"><i class="fas fa-hashtag fa-fw"></i>Reading Report</a>
                
                    <a href="/tags/TensorFlow/"><i class="fas fa-hashtag fa-fw"></i>TensorFlow</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/leetcode-906-super-palindromes/">
              
                  Leetcode 906. Super Palindromes（数学）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-16
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="https://leetcode.com/problems/super-palindromes/description/" target="_blank" rel="noopener">https://leetcode.com/problems/super-palindromes/description/</a></p>
<p>标记难度：Hard</p>
<p>提交次数：1/1</p>
<p>代码效率：</p>
<ul>
<li>穷举法：552ms</li>
<li>构造法：4ms（82.91%）</li>
</ul>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>统计<code>[L, R]</code>区间内“超级回文数”的个数。“超级回文数”的定义是，它是一个回文数，且也是一个回文数的平方。保证<code>L &lt;= R &lt;= 10^18</code>。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<h3 id="穷举法"><a class="markdownIt-Anchor" href="#穷举法"></a> 穷举法</h3>
<p>显然，一个事实是，我们可以通过穷举<code>[1, 10^9]</code>内的回文数并判断其平方是否为回文数，来穷举<code>[1, 10^18]</code>内的超级回文数。而且，通过回文数的特性，我们可以通过穷举<code>[1, 10^4.5]</code>内的数并把它反过来拼成一个回文数（当然有两种拼法）来穷举<code>[1, 10^9]</code>内的回文数。所以我们得到了一个<code>O(U^0.25) (U = upper limit)</code>的算法。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<h3 id="构造法"><a class="markdownIt-Anchor" href="#构造法"></a> 构造法</h3>
<p>很快就可以发现，超级回文数是相当稀疏的，在<code>[1, 10^18]</code>的范围内，总共只有70个。（<a href="https://oeis.org/A002779" target="_blank" rel="noopener">OEIS A002779</a>中收录了平方回文数的数列，但似乎还并没有“超级回文数”。）所以这就导向了一种采用构造法的可能性，可以大大降低时间复杂度。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1, 4, 9, 121, 484, 10201, 12321, 14641, 40804, 44944, 1002001, 1234321, 4008004,</span><br><span class="line">100020001, 102030201, 104060401, 121242121, 123454321, 125686521, 400080004,</span><br><span class="line">404090404, 10000200001, 10221412201, 12102420121, 12345654321, 40000800004,</span><br><span class="line">1000002000001, 1002003002001, 1004006004001, 1020304030201, 1022325232201,</span><br><span class="line">1024348434201, 1210024200121, 1212225222121, 1214428244121, 1232346432321,</span><br><span class="line">1234567654321, 4000008000004, 4004009004004, 100000020000001, 100220141022001,</span><br><span class="line">102012040210201, 102234363432201, 121000242000121, 121242363242121, 123212464212321,</span><br><span class="line">123456787654321, 400000080000004, 10000000200000001, 10002000300020001,</span><br><span class="line">10004000600040001, 10020210401202001, 10022212521222001, 10024214841242001,</span><br><span class="line">10201020402010201, 10203040504030201, 10205060806050201, 10221432623412201,</span><br><span class="line">10223454745432201, 12100002420000121, 12102202520220121, 12104402820440121,</span><br><span class="line">12122232623222121, 12124434743442121, 12321024642012321, 12323244744232321,</span><br><span class="line">12343456865434321, 12345678987654321, 40000000800000004, 40004000900040004</span><br></pre></td></tr></table></figure>
<p>从上面的列表中可以发现，所有超级回文数的长度都是奇数。这并不是巧合。证明如下：假设<code>A = a^2</code>，且<code>A</code>和<code>a</code>都是回文数。显然，只有在<code>a * a</code>时首位发生进位的情况下，<code>A</code>的长度才有可能变成偶数。为了使首位发生进位，需要<code>a</code>的首位<code>&gt;= 3</code>。</p>
<p>假定<code>a = a[n-1] a[n-2] a[n-3] ... a[0]</code>，则<code>a * a</code>的竖式可以表示为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">                                                  a[n-1]   a[n-2]   a[n-3] ...</span><br><span class="line">                                                  a[n-1]   a[n-2]   a[n-3] ...</span><br><span class="line"> ×</span><br><span class="line">--------------------------------------------------</span><br><span class="line">                  a[n-1]*a[n-2]   a[n-2]*a[n-3] ...</span><br><span class="line">  a[n-1]*a[n-1]   a[n-1]*a[n-2] ...</span><br></pre></td></tr></table></figure>
<p>当<code>a[n-1] = 2</code>时，即使<code>[n-2] = 9</code>，<code>2*a[n-1]*a[n-2]</code>加上进位最大只可能为45，计算出的第一位最大为8，不会发生进位。所以要求<code>a[n-1] &gt;= 3</code>。</p>
<p>下面可以根据<code>a[n-1]</code>分类讨论：</p>
<ul>
<li>当<code>a[n-1] = 3</code>时，<code>A</code>的前两位必在10和15之间；但由于<code>a</code>是回文数，因此<code>a</code>的末位也为3，此时<code>A</code>的末位必为9，所以<code>A</code>不是回文数</li>
<li>当<code>a[n-1] = 4</code>时，<code>A</code>的前两位必在16和24之间；但由于<code>a</code>是回文数，因此<code>a</code>的末位也为4，此时<code>A</code>的末位必为6，所以<code>A</code>不是回文数</li>
<li>当<code>a[n-1] = 5</code>时，<code>A</code>的前两位必在25和35之间；但由于<code>a</code>是回文数，因此<code>a</code>的末位也为5，此时<code>A</code>的末位必为5，所以<code>A</code>不是回文数</li>
<li>当<code>a[n-1] = 6</code>时，<code>A</code>的前两位必在36和48之间；但由于<code>a</code>是回文数，因此<code>a</code>的末位也为6，此时<code>A</code>的末位必为6，所以<code>A</code>不是回文数</li>
<li>当<code>a[n-1] = 7</code>时，<code>A</code>的前两位必在49和63之间；但由于<code>a</code>是回文数，因此<code>a</code>的末位也为7，此时<code>A</code>的末位必为9，所以<code>A</code>不是回文数</li>
<li>当<code>a[n-1] = 8</code>时，<code>A</code>的前两位必在64和80之间；但由于<code>a</code>是回文数，因此<code>a</code>的末位也为8，此时<code>A</code>的末位必为4，所以<code>A</code>不是回文数</li>
<li>当<code>a[n-1] = 9</code>时，<code>A</code>的前两位必在81和99之间；但由于<code>a</code>是回文数，因此<code>a</code>的末位也为9，此时<code>A</code>的末位必为1，所以<code>A</code>不是回文数</li>
</ul>
<p>假定<code>a</code>的长度为<code>n</code>，则<code>A</code>的长度必为<code>2*n - 1</code>。此时，由于<code>a * a</code>的首位（即使加上进位也）不会进位，说明<code>a * a</code>的末位也必然不会进位（因为<code>a</code>是回文数）；所以<code>A</code>的倒数第二位没有被进位；又由于<code>A</code>是回文数，所以<code>A</code>的正数第二位也没有被进位。以此类推，可以用数学归纳法证明，回文数<code>a * a</code>能产生超级回文数，当且仅当<code>a * a</code>的过程中没有发生过任何进位。<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p>
<p>此时，我们可以开始尝试枚举<code>&lt;= 10^9</code>且不会发生进位的所有回文数。由于要求每一位都不能进位，显然回文数的数字只能包括<code>{0, 1, 2, 3}</code>。所以我们仍然可以采取类似于之前的枚举的方法：枚举回文数的一半（最大5位），然后扩展出回文数的下一半。而且，在这一情况下，我们可以尝试直接推导乘法应有的计算结果。</p>
<p>对于扩展出奇数长度的回文数的情形：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">n = 9,</span><br><span class="line">a = a[8] a[7] a[6] a[5] a[4] a[3] a[2] a[1] a[0]</span><br><span class="line">  = a[0] a[1] a[2] a[3] a[4] a[3] a[2] a[1] a[0]</span><br><span class="line"></span><br><span class="line">A[0] = a[0]^2</span><br><span class="line">A[1] = 2*a[0]*a[1]</span><br><span class="line">A[2] = 2*a[0]*a[2] + a[1]^2</span><br><span class="line">A[3] = 2*a[0]*a[3] + 2*a[1]*a[2]</span><br><span class="line">A[4] = 2*a[0]*a[4] + 2*a[1]*a[3] + a[2]^2</span><br><span class="line">A[5] = 2*a[0]*a[3] + 2*a[1]*a[4] + 2*a[2]*a[3]</span><br><span class="line">A[6] = 2*a[0]*a[2] + 2*a[1]*a[4] + 2*a[2]*a[4] + a[3]^2</span><br><span class="line">A[7] = 2*a[0]*a[1] + 2*a[1]*a[3] + 2*a[2]*a[3] + 2*a[3]*a[4]</span><br><span class="line">A[8] = 2*a[0]^2 + 2*a[1]^2 + 2*a[2]^2 + 2*a[3]^2 + a[4]^2</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>显然<code>A[8]</code>是其中最大的数位。</p>
<p>对于扩展出偶数长度的回文数的情形：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">n = 10,</span><br><span class="line">a = a[9] a[8] a[7] a[6] a[5] a[4] a[3] a[2] a[1] a[0]</span><br><span class="line">  = a[0] a[1] a[2] a[3] a[4] a[4] a[3] a[2] a[1] a[0]</span><br><span class="line"></span><br><span class="line">A[0] = a[0]^2</span><br><span class="line">A[1] = 2*a[0]*a[1]</span><br><span class="line">A[2] = 2*a[0]*a[2] + a[1]^2</span><br><span class="line">A[3] = 2*a[0]*a[3] + 2*a[1]*a[2]</span><br><span class="line">A[4] = 2*a[0]*a[4] + 2*a[1]*a[3] + a[2]^2</span><br><span class="line">A[5] = 2*a[0]*a[5] + 2*a[1]*a[4] + 2*a[2]*a[3]</span><br><span class="line">A[6] = 2*a[0]*a[3] + 2*a[1]*a[4] + 2*a[2]*a[4] + a[3]^2</span><br><span class="line">A[7] = 2*a[0]*a[2] + 2*a[1]*a[3] + 2*a[2]*a[4] + 2*a[3]*a[4]</span><br><span class="line">A[8] = 2*a[0]*a[1] + 2*a[1]*a[2] + 2*a[2]*a[3] + 2*a[3]*a[4] + a[4]^2</span><br><span class="line">A[9] = 2*a[0]*a[0] + 2*a[1]*a[1] + 2*a[2]*a[2] + 2*a[3]*a[3] + 2*a[4]*a[4]</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>显然<code>A[9]</code>是其中最大的数位。</p>
<p>这样我们就可以直接判断这个最大的数位是否会发生进位了。</p>
<p>然后复杂度分析我实在没看懂……<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<h3 id="穷举法-2"><a class="markdownIt-Anchor" href="#穷举法-2"></a> 穷举法</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">string</span> str = to_string(x);</span><br><span class="line">        <span class="keyword">int</span> n = str.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - i - <span class="number">1</span>; i++)</span><br><span class="line">            <span class="keyword">if</span> (str[i] != str[n - i - <span class="number">1</span>])</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">stol</span><span class="params">(<span class="built_in">string</span> str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> x = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> ch: str)</span><br><span class="line">            x = x * <span class="number">10</span> + ch - <span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">superpalindromesInRange</span><span class="params">(<span class="built_in">string</span> L, <span class="built_in">string</span> R)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> l = stol(L), r = stol(R);</span><br><span class="line">        <span class="comment">// 31623约为10^4.5</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> i = <span class="number">1</span>; i &lt;= <span class="number">31623</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// 按拼成的回文数的长度的奇偶性分出的两种算法</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">1</span>; j++) &#123;</span><br><span class="line">                <span class="built_in">string</span> str = to_string(i);</span><br><span class="line">                <span class="keyword">int</span> n = str.length();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = n - j - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">                    str += str[i];</span><br><span class="line">                <span class="keyword">long</span> <span class="keyword">long</span> p1 = stol(str);</span><br><span class="line">                <span class="keyword">long</span> <span class="keyword">long</span> p2 = p1 * p1;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (l &lt;= p2 &amp;&amp; p2 &lt;= r &amp;&amp; isPalindrome(p2)) &#123;</span><br><span class="line">                    ans++;</span><br><span class="line">                    <span class="comment">// cout &lt;&lt; p1 &lt;&lt; ' ' &lt;&lt; p2 &lt;&lt; endl;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="构造法-2"><a class="markdownIt-Anchor" href="#构造法-2"></a> 构造法</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">string</span> str = to_string(x);</span><br><span class="line">        <span class="keyword">int</span> n = str.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - i - <span class="number">1</span>; i++)</span><br><span class="line">            <span class="keyword">if</span> (str[i] != str[n - i - <span class="number">1</span>])</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">stol</span><span class="params">(<span class="built_in">string</span> str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> x = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> ch: str)</span><br><span class="line">            x = x * <span class="number">10</span> + ch - <span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">superpalindromesInRange</span><span class="params">(<span class="built_in">string</span> L, <span class="built_in">string</span> R)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> l = stol(L), r = stol(R);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> a0 = <span class="number">0</span>; a0 &lt;= <span class="number">3</span>; a0++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> a1 = <span class="number">0</span>; a1 &lt;= <span class="number">3</span>; a1++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> a2 = <span class="number">0</span>; a2 &lt;= <span class="number">3</span>; a2++) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> a3 = <span class="number">0</span>; a3 &lt;= <span class="number">3</span>; a3++) &#123;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> a4 = <span class="number">0</span>; a4 &lt;= <span class="number">3</span>; a4++) &#123;</span><br><span class="line">                            <span class="comment">// 回文数a长度为奇数</span></span><br><span class="line">                            <span class="keyword">if</span> (<span class="number">2</span>*a0*a0 + <span class="number">2</span>*a1*a1 + <span class="number">2</span>*a2*a2 + <span class="number">2</span>*a3*a3 + a4*a4 &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                                <span class="built_in">string</span> str = to_string(a0) + to_string(a1) + to_string(a2) + to_string(a3) + to_string(a4);</span><br><span class="line">                                <span class="keyword">int</span> left = stoi(str);</span><br><span class="line">                                <span class="keyword">if</span> (left != <span class="number">0</span>) &#123;</span><br><span class="line">                                    <span class="comment">// 这一转换是为了消除前导0</span></span><br><span class="line">                                    <span class="built_in">string</span> numStr = str = to_string(left);</span><br><span class="line">                                    reverse(numStr.begin(), numStr.end());</span><br><span class="line">                                    numStr = str.substr(<span class="number">0</span>, str.length() - <span class="number">1</span>) + numStr;</span><br><span class="line">                                    <span class="keyword">long</span> <span class="keyword">long</span> num = stol(numStr);</span><br><span class="line">                                    num = num * num;</span><br><span class="line">                                    <span class="keyword">if</span> (l &lt;= num &amp;&amp; num &lt;= r &amp;&amp; isPalindrome(num))</span><br><span class="line">                                        sum++;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">// 回文数a长度为偶数</span></span><br><span class="line">                            <span class="keyword">if</span> (<span class="number">2</span>*a0*a0 + <span class="number">2</span>*a1*a1 + <span class="number">2</span>*a2*a2 + <span class="number">2</span>*a3*a3 + <span class="number">2</span>*a4*a4 &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                                <span class="built_in">string</span> str = to_string(a0) + to_string(a1) + to_string(a2) + to_string(a3) + to_string(a4);</span><br><span class="line">                                <span class="keyword">int</span> left = stoi(str);</span><br><span class="line">                                <span class="keyword">if</span> (left != <span class="number">0</span>) &#123;</span><br><span class="line">                                    <span class="built_in">string</span> numStr = str = to_string(left);</span><br><span class="line">                                    reverse(numStr.begin(), numStr.end());</span><br><span class="line">                                    numStr = str + numStr;</span><br><span class="line">                                    <span class="keyword">long</span> <span class="keyword">long</span> num = stol(numStr);</span><br><span class="line">                                    num = num * num;</span><br><span class="line">                                    <span class="keyword">if</span> (l &lt;= num &amp;&amp; num &lt;= r &amp;&amp; isPalindrome(num))</span><br><span class="line">                                        sum++;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://leetcode.com/problems/super-palindromes/solution/" target="_blank" rel="noopener">Leetcode 905 Solution</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://leetcode.com/problems/super-palindromes/discuss/170792/Python-O%2845%29-solution.-No-cheating.-Generate-all-super-palindromes-directly./176657" target="_blank" rel="noopener">Explanation For the Math behind Generating All Super Palindromes</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p><a href="https://leetcode.com/problems/super-palindromes/discuss/170792/Python-O%2845%29-solution.-No-cheating.-Generate-all-super-palindromes-directly." target="_blank" rel="noopener">Python O(4^5) solution. No cheating. Generate all super-palindromes directly. </a> <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Leetcode/"><i class="fas fa-hashtag fa-fw"></i>Leetcode</a>
                
                    <a href="/tags/alg-Math/"><i class="fas fa-hashtag fa-fw"></i>alg:Math</a>
                
                    <a href="/tags/Leetcode-Contest/"><i class="fas fa-hashtag fa-fw"></i>Leetcode Contest</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/leetcode-907-sum-of-subarray-minimums/">
              
                  Leetcode 907. Sum of Subarray Minimums（栈）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-16
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="https://leetcode.com/problems/sum-of-subarray-minimums/description/" target="_blank" rel="noopener">https://leetcode.com/problems/sum-of-subarray-minimums/description/</a></p>
<p>标记难度：Medium</p>
<p>提交次数：3/5</p>
<p>代码效率：</p>
<ul>
<li>BST：304ms</li>
<li>2 Stacks：60ms</li>
<li>1 Stack：84ms</li>
</ul>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>给定正整数数组<code>A</code>，求出<code>A</code>中所有连续子序列的最小值之和<code>mod (10^9 + 7)</code>。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>比赛后再看到题解时，我的内心是震惊的。没错，这道题又是一道和<a href="/post/leetcode-901-online-stock-span">Leetcode 901</a>一样的题。比赛期间我使用了原来想到的那种<code>O(n * log(n))</code>的BST方法，完全没有意识到这道题和前一晚上学习的题解的相似性。于是我对自己的学习情况表示了深切的怀疑。</p>
<hr>
<p>显然一种较好的思路是，对于<code>A</code>中的每一个值<code>A[i]</code>，寻找以它为最小值的子序列的数量。也就是说，我们需要寻找<code>A[i]</code>左侧第一个比它大的值的位置，以及右侧第一个比它大的值的位置。然后就可以计算对应的子序列的数量了。</p>
<p>显然这个寻找的过程和刚才说到的题是一样的，因此就不多写了。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<p>这个过程可以简化为使用一个栈。对于被某个数从栈中弹出的数而言，它右侧第一个比它小的数就是这个数。所以我们可以对所有被弹出的数得到左侧的区间范围和右侧的区间范围。我觉得这是一种非常聪明的做法。<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<h3 id="bst"><a class="markdownIt-Anchor" href="#bst"></a> BST</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">sumSubarrayMins</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; loc;</span><br><span class="line">        <span class="keyword">int</span> n = A.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            loc.emplace_back(A[i], i);</span><br><span class="line">        sort(loc.begin(), loc.end());</span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; locSet;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> index = loc[i].second;</span><br><span class="line">            <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> val = loc[i].first;</span><br><span class="line">            <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> right = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">auto</span> it = locSet.lower_bound(index);</span><br><span class="line">            <span class="keyword">if</span> (it != locSet.begin()) &#123;</span><br><span class="line">                --it;</span><br><span class="line">                left = index - *it - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                left = index;</span><br><span class="line"></span><br><span class="line">            it = locSet.upper_bound(index);</span><br><span class="line">            <span class="keyword">if</span> (it != locSet.end()) &#123;</span><br><span class="line">                right = *it - index - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                right = n - index - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            sum += val * (left + <span class="number">1</span>) * (right + <span class="number">1</span>) % <span class="number">1000000007</span>;</span><br><span class="line">            sum %= <span class="number">1000000007</span>;</span><br><span class="line">            locSet.insert(index);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="2-stacks"><a class="markdownIt-Anchor" href="#2-stacks"></a> 2 Stacks</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">sumSubarrayMins</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">stack</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; leftStack, rightStack;</span><br><span class="line">        <span class="keyword">int</span> n = A.size();</span><br><span class="line">        <span class="keyword">int</span> left[n], right[n];</span><br><span class="line"></span><br><span class="line">        leftStack.emplace(<span class="number">-1</span>, <span class="number">-1</span>);  <span class="comment">// val, idx</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!leftStack.empty() &amp;&amp; leftStack.top().first &gt;= A[i])</span><br><span class="line">                leftStack.pop();</span><br><span class="line">            <span class="keyword">if</span> (leftStack.top().second == <span class="number">-1</span>)</span><br><span class="line">                left[i] = i;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                left[i] = i - leftStack.top().second - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            leftStack.emplace(A[i], i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        rightStack.emplace(<span class="number">-1</span>, <span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">// 对于leftStack，此处写的是&gt;=</span></span><br><span class="line">            <span class="comment">// 这意味着对于同一子序列中有多个最小元素的情况，</span></span><br><span class="line">            <span class="comment">// 我们选择把这种情况的值最右侧的最小元素中计算。</span></span><br><span class="line">            <span class="comment">// （防止重复计算）</span></span><br><span class="line">            <span class="keyword">while</span> (!rightStack.empty() &amp;&amp; rightStack.top().first &gt; A[i])</span><br><span class="line">                rightStack.pop();</span><br><span class="line">            <span class="keyword">if</span> (rightStack.top().second == <span class="number">-1</span>)</span><br><span class="line">                right[i] = n - i - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                right[i] = rightStack.top().second - i - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            rightStack.emplace(A[i], i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            sum += (left[i] + <span class="number">1</span>) * (right[i] + <span class="number">1</span>) * (<span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span>) A[i] % <span class="number">1000000007</span>;</span><br><span class="line">            sum %= <span class="number">1000000007</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="1-stack"><a class="markdownIt-Anchor" href="#1-stack"></a> 1 Stack</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">sumSubarrayMins</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">stack</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; s;  <span class="comment">// (ele, idx)</span></span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = A.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="comment">// 我经常想不清楚这个地方的符号。不过，当A[i] &gt; 已有元素时，</span></span><br><span class="line">            <span class="comment">// 并不会影响那些元素作为最小值。这样想比较容易。</span></span><br><span class="line">            <span class="keyword">if</span> (s.empty() || i &lt; n &amp;&amp; s.top().first &lt;= A[i])</span><br><span class="line">                s.emplace(A[i], i);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (!s.empty() &amp;&amp; (i == n || s.top().first &gt; A[i])) &#123;</span><br><span class="line">                    <span class="keyword">int</span> val = s.top().first;</span><br><span class="line">                    <span class="keyword">int</span> idx = s.top().second;</span><br><span class="line">                    s.pop();</span><br><span class="line">                    <span class="keyword">int</span> left, right;</span><br><span class="line">                    <span class="keyword">if</span> (s.empty()) left = idx;</span><br><span class="line">                    <span class="keyword">else</span> left = idx - s.top().second - <span class="number">1</span>;</span><br><span class="line">                    right = i - idx - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">                    sum += (<span class="keyword">long</span> <span class="keyword">long</span>) (left + <span class="number">1</span>) * (right + <span class="number">1</span>) * val % <span class="number">1000000007</span>;</span><br><span class="line">                    sum %= <span class="number">1000000007</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                s.emplace(A[i], i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://leetcode.com/problems/sum-of-subarray-minimums/discuss/170750/C++JavaPython-Stack-Solution" target="_blank" rel="noopener">[C++/Java/Python] Stack Solution</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://leetcode.com/problems/sum-of-subarray-minimums/discuss/170857/One-stack-solution" target="_blank" rel="noopener">One stack solution</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Leetcode/"><i class="fas fa-hashtag fa-fw"></i>Leetcode</a>
                
                    <a href="/tags/alg-Stack/"><i class="fas fa-hashtag fa-fw"></i>alg:Stack</a>
                
                    <a href="/tags/Leetcode-Contest/"><i class="fas fa-hashtag fa-fw"></i>Leetcode Contest</a>
                
                    <a href="/tags/alg-Monotonic-Stack/"><i class="fas fa-hashtag fa-fw"></i>alg:Monotonic Stack</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/leetcode-904-fruit-into-baskets/">
              
                  Leetcode 904. Fruit Into Baskets
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-16
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="https://leetcode.com/problems/fruit-into-baskets/description/" target="_blank" rel="noopener">https://leetcode.com/problems/fruit-into-baskets/description/</a></p>
<p>标记难度：Medium</p>
<p>提交次数：2/2</p>
<p>代码效率：</p>
<ul>
<li>分块扫描：148ms</li>
<li>滑动窗口：192ms</li>
</ul>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>给定数组<code>tree</code>，求其中最长的只包含两种元素的连续子序列的长度。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<h3 id="分块扫描"><a class="markdownIt-Anchor" href="#分块扫描"></a> 分块扫描</h3>
<p>比赛的时候我就是这么写的。</p>
<hr>
<p>首先显然可以把这个数组按连续相同的元素分块。这样，相邻的两块所表示的元素必然就是不同的了。然后再考虑怎么求这种子序列。</p>
<p>以样例中的序列<code>[3,3,3,1,2,1,1,2,3,3,4]</code>为例，分块之后，即可得到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[(3, 3), (1, 1), (2, 1), (1, 2), (2, 1), (3, 2), (4, 1)]</span><br></pre></td></tr></table></figure>
<p>首先尝试从<code>(3, 3)</code>开始寻找最长子序列。显然我们能够找到的是<code>[(3, 3), (1, 1)]</code>。此时下一个块对应的元素必然既不是3也不是1（或者也可能没有下一个块）。一个事实是，如果从这个最长子序列中的任意非最后一个元素开始寻找最长子序列，都必然会结束在当前的最后一个元素。所以下一次搜寻只需从当前最长子序列的最后一个元素开始。</p>
<p>于是之后从<code>(1, 1)</code>开始寻找，找到了<code>[(1, 1), (2, 1), (1, 2), (2, 1)]</code>；再从<code>(2, 1)</code>开始寻找，找到了<code>[(2, 1), (3, 2)]</code>；从<code>(3, 2)</code>开始寻找，找到了<code>[(3, 2), (4, 1)]</code>；最后找到了<code>[(4, 1)]</code>。其中最长的子序列是从<code>(1, 1)</code>开始的。</p>
<h3 id="滑动窗口"><a class="markdownIt-Anchor" href="#滑动窗口"></a> 滑动窗口</h3>
<p>看了题解之后，我反而觉得这种想法更容易想。简单来说，令<code>opt(j)</code>表示以<code>j</code>结尾的最长合法子序列的首位坐标，则显然<code>opt(j)</code>是随<code>j</code>单调递增的。也就是说，<code>[opt(j), j]</code>形成了一个滑动窗口。</p>
<p>因此我们可以在遍历<code>j</code>的同时维护滑动窗口中各元素的数量，当元素种类超过2时，则将窗口下沿向前滑，并相应地删除元素，直到元素种类回到2。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<h3 id="分块扫描-2"><a class="markdownIt-Anchor" href="#分块扫描-2"></a> 分块扫描</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">totalFruit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; tree)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 分块</span></span><br><span class="line">        <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; subs;  <span class="comment">// cnt, ele</span></span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tree.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i != <span class="number">0</span> &amp;&amp; tree[i - <span class="number">1</span>] != tree[i]) &#123;</span><br><span class="line">                subs.emplace_back(cnt, tree[i - <span class="number">1</span>]);</span><br><span class="line">                cnt = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cnt != <span class="number">0</span>)</span><br><span class="line">            subs.emplace_back(cnt, tree.back());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 进行扫描</span></span><br><span class="line">        <span class="comment">// eleSet中存储的是当前找到的元素</span></span><br><span class="line">        <span class="built_in">unordered_set</span>&lt;<span class="keyword">int</span>&gt; eleSet;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> curSum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; subs.size()) &#123;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; subs.size() &amp;&amp; eleSet.size() &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> cnt = subs[i].first;</span><br><span class="line">                <span class="keyword">int</span> ele = subs[i].second;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (eleSet.find(ele) == eleSet.end() &amp;&amp; eleSet.size() == <span class="number">2</span>)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span> (eleSet.find(ele) == eleSet.end())</span><br><span class="line">                    eleSet.insert(ele);</span><br><span class="line">                curSum += cnt;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = max(ans, curSum);</span><br><span class="line">            curSum = <span class="number">0</span>;</span><br><span class="line">            eleSet.clear();</span><br><span class="line">            <span class="comment">// 如果扫描已经完成则不再回退</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt;= subs.size())</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="comment">// 回退1，重新开始扫描</span></span><br><span class="line">            i--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="滑动窗口-2"><a class="markdownIt-Anchor" href="#滑动窗口-2"></a> 滑动窗口</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">totalFruit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; tree)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;  <span class="comment">// 窗口前沿</span></span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; cntMap;</span><br><span class="line">        <span class="keyword">int</span> maxn = <span class="number">-1</span>;</span><br><span class="line">        <span class="comment">// 遍历窗口后沿</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tree.size(); i++) &#123;</span><br><span class="line">            cntMap[tree[i]]++;</span><br><span class="line">            <span class="comment">// 维护窗口中元素种类</span></span><br><span class="line">            <span class="keyword">while</span> (cntMap.size() &gt; <span class="number">2</span>) &#123;</span><br><span class="line">                cntMap[tree[start]]--;</span><br><span class="line">                <span class="keyword">if</span> (cntMap[tree[start]] == <span class="number">0</span>)</span><br><span class="line">                    cntMap.erase(tree[start]);</span><br><span class="line">                start++;</span><br><span class="line">            &#125;</span><br><span class="line">            maxn = max(maxn, i - start + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxn;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://leetcode.com/problems/fruit-into-baskets/solution/" target="_blank" rel="noopener">Leetcode 904 Solution</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Leetcode/"><i class="fas fa-hashtag fa-fw"></i>Leetcode</a>
                
                    <a href="/tags/alg-Greedy/"><i class="fas fa-hashtag fa-fw"></i>alg:Greedy</a>
                
                    <a href="/tags/alg-Two-Pointers/"><i class="fas fa-hashtag fa-fw"></i>alg:Two Pointers</a>
                
                    <a href="/tags/Leetcode-Contest/"><i class="fas fa-hashtag fa-fw"></i>Leetcode Contest</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/leetcode-905-sort-array-by-parity-and-weekly-contest-102/">
              
                  Leetcode 905. Sort Array By Parity，及周赛（102）总结
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-16
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="https://leetcode.com/problems/sort-array-by-parity/description/" target="_blank" rel="noopener">https://leetcode.com/problems/sort-array-by-parity/description/</a></p>
<p>标记难度：Easy</p>
<p>提交次数：3/3</p>
<p>代码效率：</p>
<ul>
<li>平凡的遍历：44ms</li>
<li>平凡的排序：36ms</li>
<li>不平凡的双指针：28ms</li>
</ul>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>给定整数数组<code>A</code>，要求将<code>A</code>中元素重排，使得所有偶数元素在前，奇数元素在后。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>这次比赛的题目整体又比较简单。所以我的排名又变高了，变成了271 / 4385（最近几次比赛人好像越来越多了，是错觉吗？）。做出来三道题；最后一题我也想出了几乎正确的做法，就是懒得写了。</p>
<hr>
<h3 id="一种平凡的做法两次遍历"><a class="markdownIt-Anchor" href="#一种平凡的做法两次遍历"></a> 一种平凡的做法：两次遍历</h3>
<p>比赛的时候我就是这么写的。新开一个<code>vector</code>，先遍历<code>A</code>一次，把偶数元素都插入到里面；再遍历<code>A</code>一次，这次只插入奇数元素。时间复杂度是<code>O(n)</code>，额外空间复杂度是<code>O(n)</code>。</p>
<h3 id="另一种平凡的做法重写排序比较器"><a class="markdownIt-Anchor" href="#另一种平凡的做法重写排序比较器"></a> 另一种平凡的做法：重写排序比较器</h3>
<p>好吧，这种做法倒也没有那么平凡。重写一个排序的比较器，使得偶数都小于奇数，而偶数之间都相等。然后就可以直接把<code>A</code>排序了。时间复杂度是<code>O(n * log(n))</code>，额外空间复杂度是<code>O(1)</code>。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<h3 id="不太平凡的做法双指针"><a class="markdownIt-Anchor" href="#不太平凡的做法双指针"></a> 不太平凡的做法：双指针</h3>
<p>仍然和快排的想法是类似的。不过我的代码里似乎仍然写了太多的特判，还是这份代码比较好。<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<h3 id="遍历"><a class="markdownIt-Anchor" href="#遍历"></a> 遍历</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sortArrayByParity(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> x: A)</span><br><span class="line">            <span class="keyword">if</span> (x % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">                ans.push_back(x);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> x: A)</span><br><span class="line">            <span class="keyword">if</span> (x % <span class="number">2</span> != <span class="number">0</span>)</span><br><span class="line">                ans.push_back(x);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="排序"><a class="markdownIt-Anchor" href="#排序"></a> 排序</h3>
<p>再一次回到了如何使用自己的比较器进行<code>std::sort</code>的这个问题中。此时你不止需要一个函数，还需要一个函数对象，把这个函数放到重载的<code>()</code>运算符中。<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span>&amp; x, <span class="keyword">const</span> <span class="keyword">int</span>&amp; y)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> x % <span class="number">2</span> &lt; y % <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; Cmp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sortArrayByParity(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A) &#123;</span><br><span class="line">        <span class="comment">// https://en.cppreference.com/w/cpp/algorithm/sort</span></span><br><span class="line">        sort(A.begin(), A.end(), Cmp);</span><br><span class="line">        <span class="keyword">return</span> A;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="双指针"><a class="markdownIt-Anchor" href="#双指针"></a> 双指针</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sortArrayByParity(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A) &#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = A.size();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (i &lt; n &amp;&amp; A[i] % <span class="number">2</span> == <span class="number">0</span>) i++;</span><br><span class="line">        j = i;</span><br><span class="line">        <span class="keyword">while</span> (j &lt; n &amp;&amp; A[j] % <span class="number">2</span> != <span class="number">0</span>) j++;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (i &lt; n &amp;&amp; j &lt; n) &#123;</span><br><span class="line">            swap(A[i], A[j]);</span><br><span class="line">            <span class="keyword">while</span> (i &lt; n &amp;&amp; A[i] % <span class="number">2</span> == <span class="number">0</span>) i++;</span><br><span class="line">            <span class="keyword">while</span> (j &lt; n &amp;&amp; A[j] % <span class="number">2</span> != <span class="number">0</span>) j++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> A;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://leetcode.com/problems/sort-array-by-parity/solution/" target="_blank" rel="noopener">Leetcode 905 Solution</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://leetcode.com/problems/sort-array-by-parity/discuss/170734/C++Java-In-Place-Swap" target="_blank" rel="noopener">[C++/Java] In Place Swap</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p><a href="https://en.cppreference.com/w/cpp/algorithm/sort" target="_blank" rel="noopener">Cpp Reference: std::sort</a> <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Leetcode/"><i class="fas fa-hashtag fa-fw"></i>Leetcode</a>
                
                    <a href="/tags/alg-Two-Pointers/"><i class="fas fa-hashtag fa-fw"></i>alg:Two Pointers</a>
                
                    <a href="/tags/Leetcode-Contest/"><i class="fas fa-hashtag fa-fw"></i>Leetcode Contest</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/leetcode-902-numbers-at-most-n-given-digit-set/">
              
                  Leetcode 902. Numbers At Most N Given Digit Set（DP）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-16
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="https://leetcode.com/problems/numbers-at-most-n-given-digit-set/description/" target="_blank" rel="noopener">https://leetcode.com/problems/numbers-at-most-n-given-digit-set/description/</a></p>
<p>标记难度：Hard</p>
<p>提交次数：1/1</p>
<p>代码效率：</p>
<ul>
<li>递推：47.81%</li>
<li>数学：100.00%</li>
</ul>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>给定数字集合<code>D</code>（即<code>D</code>是集合<code>{'1','2','3','4','5','6','7','8','9'}</code>的子集）和正整数<code>N</code>，问用这些数字共能组成多少<code>&lt;=N</code>的数。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>我想，第一个问题是，这到底是一个统计问题，还是一个计算问题。考虑到<code>N</code>的范围，显然不能直接遍历所有数进行统计，而是需要进行某种程度的计算。也许会涉及到组合数。（虽然事实是没有）</p>
<p>第二个问题是正着做还是反着做——计算<strong>只</strong>包含这些数字的数的个数，还是计算<strong>不只</strong>包含这些数字的数的个数？显然我比赛的时候完全没有想清楚这一点，但就这道题来说，大概计算<strong>包含</strong>更简单一点。</p>
<p>最后一个问题是怎么算。显然我比赛的时候懵逼了，没想出来。“包含X数字的数”也许不算是一种常见的题型，但用非统计的方法计算在某个范围内符合某条件的数的数量似乎还挺常见的（如<a href="https://leetcode.com/problems/prime-palindrome/description/" target="_blank" rel="noopener">Leetcode 866</a>）。但我觉得这些题目之间的共性并不大。</p>
<hr>
<h3 id="递推方法"><a class="markdownIt-Anchor" href="#递推方法"></a> 递推方法</h3>
<p>如何寻找<code>&lt;=N</code>的合法的数？显然可以根据数的长度进行分类讨论。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>对于长度小于<code>len(N)</code>的那些，显然<code>D</code>中数字的任意组合均是合法的（这一点我之前居然没有意识到……）；对于长度和<code>len(N)</code>相等的那些，则需要分类讨论：</p>
<ul>
<li>如果该数首位比<code>N</code>的首位小，则之后的数字可以任意组合；如果该数首位和<code>N</code>的首位相等（当然前提是<code>N</code>的首位也是一个合法数字），则需要继续讨论第2位</li>
<li>如果该数第2位比<code>N</code>的第2位小，则之后的数字可以任意组合；如果该数第2位和<code>N</code>的第2位相等（当然前提是<code>N</code>的第2位也是一个合法数字），则需要继续讨论第3位</li>
<li>以此类推……</li>
</ul>
<p>于是我们就得到了一个递推算法：令<code>f[i]</code>表示<code>&lt;= N[i:]</code>的数的数量（<code>i</code>从1开始编号），则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f[i] = (number of digits &lt; N[i]) * (D.size)^(len - i) + (N[i] in D) * f[i + 1]</span><br></pre></td></tr></table></figure>
<p>且最终的结果为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f[1] + (D.size)^(len - 1) + (D.size)^(len - 2) + ... + D.size</span><br></pre></td></tr></table></figure>
<h3 id="数学方法"><a class="markdownIt-Anchor" href="#数学方法"></a> 数学方法</h3>
<p>这是一种很神奇的方法。我们不妨把<code>D</code>中的数字看成是一种新的进位表示。比如，当<code>D = {1, 3, 5}</code>时，就可以把<code>[11, 13, 51, 53]</code>这类的数写成<code>[11, 12, 31, 32]</code>。如果能够知道<code>&lt;= N</code>的最大的这种进位表示，就可以直接计算合法的数的数量了。所以剩下的问题就是怎么找到这个进位表示。</p>
<p>一种方法是根据<code>N</code>的位，从高位到低位分别进行讨论。令<code>B</code>表示所需的进位表示，<code>1 &lt;= B[i] &lt;= D.size, 1 &lt;= i &lt;= len(N)</code>：</p>
<ul>
<li>如果<code>N[i] in D &amp;&amp; N[i] = D[j]</code>，则<code>B[i] = j</code></li>
<li>如果<code>N[i] &gt; min(D)</code>，则<code>B[i] = lower_bound(D, N[i])</code>，<code>B[i+1:] = len(D)</code>，结束</li>
<li>如果<code>N[i] &lt; min(D)</code>，则<code>B[i] = 0</code>，并对之前的数执行类似于退位的操作，<code>B[i+1:] = len(D)</code>，结束</li>
</ul>
<p>其他情况是比较显然的。一个需要退位的例子：<code>D = {2, 4, 6, 8}</code>，<code>N = 41265</code></p>
<ol>
<li><code>B[1] = 2, &quot;4&quot;</code></li>
<li><code>B[2] = 0</code>；执行退位操作后，<code>B[1] = 1, B[2] = 4, B[3:5] = 4, &quot;28888&quot;</code></li>
</ol>
<p>找到这个进位表示之后就可以直接计算出比它小的数的数量了。事实上这种表示方法类似于<a href="/post/leetcode-171-excel-sheet-column-number/">Leetcode 171</a>，同样没有0的位置。<sup class="footnote-ref"><a href="#fn1" id="fnref1:1">[1:1]</a></sup></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<h3 id="递推"><a class="markdownIt-Anchor" href="#递推"></a> 递推</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// 递归快速幂</span></span><br><span class="line">    <span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">quickpow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> a, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> b = quickpow(a, x &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> x % <span class="number">2</span> == <span class="number">0</span> ? b * b : b * b * a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">atMostNGivenDigitSet</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; D, <span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">bool</span> valid[<span class="number">10</span>];</span><br><span class="line">        <span class="built_in">memset</span>(valid, <span class="number">0</span>, <span class="keyword">sizeof</span>(valid));</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">string</span> str: D)</span><br><span class="line">            valid[str[<span class="number">0</span>] - <span class="string">'0'</span>] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">            <span class="keyword">if</span> (valid[i]) x++;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 递推过程</span></span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> digits = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (N &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!valid[N % <span class="number">10</span>])</span><br><span class="line">                f = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> y = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N % <span class="number">10</span>; i++)</span><br><span class="line">                <span class="keyword">if</span> (valid[i]) y++;</span><br><span class="line">            f += y * quickpow(x, digits);</span><br><span class="line"></span><br><span class="line">            N /= <span class="number">10</span>;</span><br><span class="line">            digits++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; digits; i++)</span><br><span class="line">            f += quickpow(x, i);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="数学"><a class="markdownIt-Anchor" href="#数学"></a> 数学</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">atMostNGivenDigitSet</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; D, <span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; digits;</span><br><span class="line">        <span class="keyword">while</span> (N &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            digits.push_back(N % <span class="number">10</span>);</span><br><span class="line">            N /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        reverse(digits.begin(), digits.end());</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; digSet;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">string</span> str: D)</span><br><span class="line">            digSet.push_back(stoi(str));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> n = digits.size();</span><br><span class="line">        <span class="keyword">int</span> B = D.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; b(n, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; digits.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> k;</span><br><span class="line">            <span class="comment">// 本来用的是set，后来我实在搞不明白lower_bound和distance那套理论了</span></span><br><span class="line">            <span class="comment">// 反正数据量比较小……</span></span><br><span class="line">            <span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; digSet.size(); k++)</span><br><span class="line">                <span class="keyword">if</span> (digits[i] &lt; digSet[k])</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// digit[i] &lt; min(D)</span></span><br><span class="line">            <span class="keyword">if</span> (k == <span class="number">0</span>) &#123;</span><br><span class="line">                b[i] = <span class="number">0</span>;</span><br><span class="line">                <span class="comment">// 退位</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt; <span class="number">0</span>; j--) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (b[j] == <span class="number">0</span>) &#123;</span><br><span class="line">                        b[j<span class="number">-1</span>]--;</span><br><span class="line">                        b[j] = B;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; j++)</span><br><span class="line">                    b[j] = B;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// digit[i] &gt; min(D) with no match</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (digSet[k - <span class="number">1</span>] &lt; digits[i]) &#123;</span><br><span class="line">                b[i] = k;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; j++)</span><br><span class="line">                    b[j] = B;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// find match</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (digSet[k - <span class="number">1</span>] == digits[i])</span><br><span class="line">                b[i] = k;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> d: b) &#123;</span><br><span class="line">            cnt = cnt * B + d;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://leetcode.com/problems/numbers-at-most-n-given-digit-set/solution/" target="_blank" rel="noopener">Leetcode 902 Solution</a> <a href="#fnref1" class="footnote-backref">↩︎</a> <a href="#fnref1:1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Leetcode/"><i class="fas fa-hashtag fa-fw"></i>Leetcode</a>
                
                    <a href="/tags/alg-Math/"><i class="fas fa-hashtag fa-fw"></i>alg:Math</a>
                
                    <a href="/tags/Leetcode-Contest/"><i class="fas fa-hashtag fa-fw"></i>Leetcode Contest</a>
                
                    <a href="/tags/alg-Recursive/"><i class="fas fa-hashtag fa-fw"></i>alg:Recursive</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
          
            <div class="post-wrapper">
              <article class="post reveal ">
    
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      <h2 class="title">
          <a href="/post/leetcode-739-daily-temperatures/">
              
                  Leetcode 739. Daily Temperatures（栈）
              
          </a>
      </h2>
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="https://zhanghuimeng.github.io">
            <i class="fas fa-user" aria-hidden="true"></i>
            张慕晖
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
            2018-09-15
          </a>
        </div>
      
      
        
      
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
        <p>题目来源：<a href="https://leetcode.com/problems/daily-temperatures/description/" target="_blank" rel="noopener">https://leetcode.com/problems/daily-temperatures/description/</a></p>
<p>标记难度：Medium</p>
<p>提交次数：3/6</p>
<p>代码效率：</p>
<ul>
<li>排序+BST：14.41%</li>
<li>栈：58.54%</li>
<li>暴力：48.92%</li>
</ul>
<h2 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h2>
<p>和<a href="/post/leetcode-901-online-stock-span">Leetcode 901</a>差不多，不过顺序正好相反。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>因为是几乎一样的所以没什么好分析的。但是在这道题中，因为数据范围比较小（<code>[30, 100]</code>），所以可以从右往左扫描，维护每个温度出现的最左侧的位置，然后对当前的温度，遍历比它高的所有温度，找出其中位于最左侧的。这大概是一种暴力算法吧。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<h3 id="离线算法排序bst"><a class="markdownIt-Anchor" href="#离线算法排序bst"></a> 离线算法：排序+BST</h3>
<p>虽然写了计数排序，但这个算法仍然超时了。一般来说，<code>30000</code>规模的数据用<code>O(n * log(n))</code>的算法没有什么太大的问题，此处不知道是因为用的STL太多了，Leetcode太面向对象了，还是Leetcode的评测机太渣了。既然如此，纯递归的算法更没有写的必要……</p>
<p>2018.9.16 UPDATE：我错怪Leetcode了，实际上是我自己没用对<code>set.lower_bound</code>，结果变成了<code>O(n^2)</code>的算法。现在这个算法是能过的了……</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Pair</span> &#123;</span></span><br><span class="line">        <span class="keyword">int</span> val;</span><br><span class="line">        <span class="keyword">int</span> index;</span><br><span class="line"></span><br><span class="line">        Pair(<span class="keyword">int</span> v, <span class="keyword">int</span> i) &#123;</span><br><span class="line">            val = v;</span><br><span class="line">            index = i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Pair&amp; x, <span class="keyword">const</span> Pair&amp; y) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x.val != y.val) <span class="keyword">return</span> x.val &lt; y.val;</span><br><span class="line">            <span class="keyword">return</span> x.index &gt; y.index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">bucketSort</span><span class="params">(<span class="built_in">vector</span>&lt;Pair&gt;&amp; a)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">list</span>&lt;Pair&gt; bucket[<span class="number">105</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.size(); i++) &#123;</span><br><span class="line">            bucket[a[i].val].push_front(a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">30</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> j = bucket[i].begin(); j != bucket[i].end(); j++)&#123;</span><br><span class="line">                a[n++] = *j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dailyTemperatures(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; temperatures) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;Pair&gt; loc;</span><br><span class="line">        <span class="keyword">int</span> n = temperatures.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans(n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            loc.emplace_back(temperatures[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// sort(loc.begin(), loc.end());</span></span><br><span class="line">        bucketSort(loc);</span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; indSet;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">// auto it = lower_bound(indSet.begin(), indSet.end(), loc[i].index);</span></span><br><span class="line">            <span class="comment">// 上面那个写法是错误的，因为std::lower_bound函数并不知道set的内部结构</span></span><br><span class="line">            <span class="comment">// 下面使用std::set::lower_bound才是正确的</span></span><br><span class="line">            <span class="keyword">auto</span> it = indSet.lower_bound(loc[i].index);</span><br><span class="line">            <span class="keyword">if</span> (it == indSet.end())</span><br><span class="line">                ans[loc[i].index] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                ans[loc[i].index] = *it - loc[i].index;</span><br><span class="line">            indSet.insert(loc[i].index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="在线算法栈"><a class="markdownIt-Anchor" href="#在线算法栈"></a> 在线算法：栈</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dailyTemperatures(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; temperatures) &#123;</span><br><span class="line">        <span class="built_in">stack</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; s;</span><br><span class="line">        <span class="keyword">int</span> n = temperatures.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans(n);</span><br><span class="line">        s.emplace(<span class="number">1000</span>, <span class="number">-1</span>);  <span class="comment">// 一个哨兵</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!s.empty() &amp;&amp; s.top().first &lt;= temperatures[i])</span><br><span class="line">                s.pop();</span><br><span class="line">            <span class="keyword">if</span> (s.top().second == <span class="number">-1</span>) ans[i] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> ans[i] = s.top().second - i;</span><br><span class="line">            s.emplace(temperatures[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="在线算法暴力"><a class="markdownIt-Anchor" href="#在线算法暴力"></a> 在线算法：暴力</h3>
<p>如果要求在线，数据从右向左提供，则显然暴力算法是可以在线的。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dailyTemperatures(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; temperatures) &#123;</span><br><span class="line">        <span class="keyword">int</span> n = temperatures.size();</span><br><span class="line">        <span class="keyword">int</span> lastIdx[<span class="number">105</span>];</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans(n, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">105</span>; i++)</span><br><span class="line">            lastIdx[i] = n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">int</span> minn = n;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = temperatures[i] + <span class="number">1</span>; j &lt;= <span class="number">100</span>; j++)</span><br><span class="line">                minn = min(minn, lastIdx[j]);</span><br><span class="line">            <span class="keyword">if</span> (minn == n)</span><br><span class="line">                ans[i] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                ans[i] = minn - i;</span><br><span class="line">            lastIdx[temperatures[i]] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://leetcode.com/problems/daily-temperatures/solution/" target="_blank" rel="noopener">Leetcode 739 Solution</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        

        
            <div class="full-width auto-padding tags">
                
                    <a href="/tags/Leetcode/"><i class="fas fa-hashtag fa-fw"></i>Leetcode</a>
                
                    <a href="/tags/alg-Stack/"><i class="fas fa-hashtag fa-fw"></i>alg:Stack</a>
                
                    <a href="/tags/alg-Monotonic-Stack/"><i class="fas fa-hashtag fa-fw"></i>alg:Monotonic Stack</a>
                
            </div>
        
    </section>
</article>

            </div>
          
        
      

  </section>






  
      <br>
      <div class="prev-next">
          <div class="prev-next">
              
                  <a class="prev" rel="prev" href="/archives/2018/09/">
                      <section class="post prev">
                          <i class="fas fa-chevron-left" aria-hidden="true"></i>&nbsp;上一页&nbsp;
                      </section>
                  </a>
              
              <p class="current">
                  2 / 7
              </p>
              
                  <a class="next" rel="next" href="/archives/2018/09/page/3/">
                      <section class="post next">
                          &nbsp;下一页&nbsp;<i class="fas fa-chevron-right" aria-hidden="true"></i>
                      </section>
                  </a>
              

          </div>
      </div>

  

  <!-- 根据主题中的设置决定是否在archive中针对摘要部分的MathJax公式加载mathjax.js文件 -->
  

  
    <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX","TeX"],
      linebreaks: { automatic:true },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" },
      noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
      Macros: { href: "{}" }
    },
    messageStyle: "none"
  });
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += (all[i].SourceElement().parentNode.className ? ' ' : '') + 'has-jax';
    }
    console.log("mathjax did loaded!");
  });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

  





<!-- 根据主题中的设置决定是否在archive中针对摘要部分的MathJax公式加载mathjax.js文件 -->



    <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX","TeX"],
      linebreaks: { automatic:true },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" },
      noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
      Macros: { href: "{}" }
    },
    messageStyle: "none"
  });
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += (all[i].SourceElement().parentNode.className ? ' ' : '') + 'has-jax';
    }
    console.log("mathjax did loaded!");
  });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>



        </div>
        <aside class='l_side'>
            
  
  
    
      
      
        <section class="author">
  <div class="content pure">
    
    
    
      <div class="social-wrapper">
        
          
            <a href="mailto:zhanghuimeng1997@gmail.com" class="social flat-btn" target="_blank" rel="external"><i class="social fas fa-envelope" aria-hidden="true"></i></a>
          
        
          
            <a href="https://github.com/zhanghuimeng" class="social flat-btn" target="_blank" rel="external"><i class="social fab fa-github" aria-hidden="true"></i></a>
          
        
          
            <a href="https://music.163.com/#/user/home?id=261028414" class="social flat-btn" target="_blank" rel="external"><i class="social fas fa-music" aria-hidden="true"></i></a>
          
        
      </div>
    
  </div>
</section>

      
    
  
    
      
      
        

      
    
  
    
      
      
        
  <section class="category">
    
<header class="pure">
  <div><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;所有分类</div>
  
</header>

    <div class="content pure">
      <ul class="entry">
        
          <li><a class="flat-box" title="/categories/Codeforces/" href="/categories/Codeforces/"><div class="name">Codeforces</div><div class="badge">(3)</div></a></li>
        
          <li><a class="flat-box" title="/categories/Leetcode/" href="/categories/Leetcode/"><div class="name">Leetcode</div><div class="badge">(9)</div></a></li>
        
          <li><a class="flat-box" title="/categories/USACO/" href="/categories/USACO/"><div class="name">USACO</div><div class="badge">(1)</div></a></li>
        
      </ul>
    </div>
  </section>


      
    
  
    
      
      
        
  <section class="tagcloud">
    
<header class="pure">
  <div><i class="fas fa-fire fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;热门标签</div>
  
</header>

    <div class="content pure">
      <a href="/tags/A-Munday/" style="font-size: 14px; color: #999">A.Munday</a> <a href="/tags/Blogging/" style="font-size: 14px; color: #999">Blogging</a> <a href="/tags/C-Marlowe/" style="font-size: 14px; color: #999">C.Marlowe</a> <a href="/tags/CSP/" style="font-size: 15.11px; color: #919191">CSP</a> <a href="/tags/Codeforces/" style="font-size: 19.56px; color: #737373">Codeforces</a> <a href="/tags/Codeforces-Contest/" style="font-size: 19.19px; color: #767676">Codeforces Contest</a> <a href="/tags/Counseling/" style="font-size: 14px; color: #999">Counseling</a> <a href="/tags/Cryptography/" style="font-size: 14px; color: #999">Cryptography</a> <a href="/tags/D-Drayton/" style="font-size: 14px; color: #999">D.Drayton</a> <a href="/tags/Deep-Learning/" style="font-size: 14px; color: #999">Deep Learning</a> <a href="/tags/Depth-first-Search/" style="font-size: 14px; color: #999">Depth-first Search</a> <a href="/tags/DigitCircuit/" style="font-size: 14px; color: #999">DigitCircuit</a> <a href="/tags/E-Vere/" style="font-size: 14px; color: #999">E. Vere</a> <a href="/tags/E-Spencer/" style="font-size: 14px; color: #999">E.Spencer</a> <a href="/tags/Essay/" style="font-size: 14.37px; color: #969696">Essay</a> <a href="/tags/Github/" style="font-size: 14.74px; color: #949494">Github</a> <a href="/tags/GoldenTreasury/" style="font-size: 23.26px; color: #5a5a5a">GoldenTreasury</a> <a href="/tags/H-Constable/" style="font-size: 14px; color: #999">H.Constable</a> <a href="/tags/J-Donne/" style="font-size: 14px; color: #999">J.Donne</a> <a href="/tags/J-Lyly/" style="font-size: 14px; color: #999">J.Lyly</a> <a href="/tags/J-Sylvester/" style="font-size: 14px; color: #999">J.Sylvester</a> <a href="/tags/J-Webster/" style="font-size: 14px; color: #999">J.Webster</a> <a href="/tags/Leetcode/" style="font-size: 24px; color: #555">Leetcode</a> <a href="/tags/Leetcode-Contest/" style="font-size: 23.63px; color: #585858">Leetcode Contest</a> <a href="/tags/Lyric/" style="font-size: 17.33px; color: #828282">Lyric</a> <a href="/tags/Machine-Learning/" style="font-size: 15.11px; color: #919191">Machine Learning</a> <a href="/tags/Machine-Translation/" style="font-size: 16.59px; color: #878787">Machine Translation</a> <a href="/tags/Natural-Language-Processing/" style="font-size: 17.33px; color: #828282">Natural Language Processing</a> <a href="/tags/OS/" style="font-size: 21.78px; color: #646464">OS</a> <a href="/tags/OSTEP/" style="font-size: 18.07px; color: #7d7d7d">OSTEP</a> <a href="/tags/OldBlog/" style="font-size: 15.11px; color: #919191">OldBlog</a> <a href="/tags/P-Sidney/" style="font-size: 14px; color: #999">P.Sidney</a> <a href="/tags/Paper/" style="font-size: 16.59px; color: #878787">Paper</a> <a href="/tags/Paul-Simon/" style="font-size: 14px; color: #999">Paul Simon</a> <a href="/tags/PhysicsExperiment/" style="font-size: 14.37px; color: #969696">PhysicsExperiment</a> <a href="/tags/Psychology/" style="font-size: 14px; color: #999">Psychology</a> <a href="/tags/Quality-Estimation/" style="font-size: 15.48px; color: #8f8f8f">Quality Estimation</a> <a href="/tags/R-Barnfield/" style="font-size: 14px; color: #999">R.Barnfield</a> <a href="/tags/Raspberry-Pi/" style="font-size: 14px; color: #999">Raspberry Pi</a> <a href="/tags/Reading-Report/" style="font-size: 17.7px; color: #808080">Reading Report</a> <a href="/tags/S-Daniel/" style="font-size: 14px; color: #999">S.Daniel</a> <a href="/tags/SGU/" style="font-size: 14.37px; color: #969696">SGU</a> <a href="/tags/Sonnet/" style="font-size: 20.67px; color: #6c6c6c">Sonnet</a> <a href="/tags/Spokes/" style="font-size: 14.74px; color: #949494">Spokes</a> <a href="/tags/SystemAnalysis-Control/" style="font-size: 14px; color: #999">SystemAnalysis&Control</a> <a href="/tags/T-Dekker/" style="font-size: 14px; color: #999">T.Dekker</a> <a href="/tags/T-Heywood/" style="font-size: 14px; color: #999">T.Heywood</a> <a href="/tags/T-Lodge/" style="font-size: 14px; color: #999">T.Lodge</a> <a href="/tags/T-Nashe/" style="font-size: 14px; color: #999">T.Nashe</a> <a href="/tags/T-Wyatt/" style="font-size: 14px; color: #999">T.Wyatt</a> <a href="/tags/THUMT/" style="font-size: 14.37px; color: #969696">THUMT</a> <a href="/tags/TensorFlow/" style="font-size: 15.11px; color: #919191">TensorFlow</a> <a href="/tags/Translation/" style="font-size: 18.44px; color: #7b7b7b">Translation</a> <a href="/tags/Tree/" style="font-size: 14px; color: #999">Tree</a> <a href="/tags/USACO/" style="font-size: 22.52px; color: #5f5f5f">USACO</a> <a href="/tags/W-Alexander/" style="font-size: 14px; color: #999">W.Alexander</a> <a href="/tags/W-Drummond/" style="font-size: 15.11px; color: #919191">W.Drummond</a> <a href="/tags/W-Shakespeare/" style="font-size: 22.15px; color: #626262">W.Shakespeare</a> <a href="/tags/object-Object/" style="font-size: 14px; color: #999">[object Object]</a> <a href="/tags/alg-Array/" style="font-size: 21.04px; color: #696969">alg:Array</a> <a href="/tags/alg-Automata/" style="font-size: 14px; color: #999">alg:Automata</a> <a href="/tags/alg-Backtracking/" style="font-size: 15.85px; color: #8c8c8c">alg:Backtracking</a> <a href="/tags/alg-Binary-Indexed-Tree/" style="font-size: 14px; color: #999">alg:Binary Indexed Tree</a> <a href="/tags/alg-Binary-Search/" style="font-size: 15.48px; color: #8f8f8f">alg:Binary Search</a> <a href="/tags/alg-Binary-Search-Tree/" style="font-size: 16.59px; color: #878787">alg:Binary Search Tree</a> <a href="/tags/alg-Binray-Search/" style="font-size: 14px; color: #999">alg:Binray Search</a> <a href="/tags/alg-Bit-Manipulation/" style="font-size: 15.48px; color: #8f8f8f">alg:Bit Manipulation</a> <a href="/tags/alg-Bitmasks/" style="font-size: 14px; color: #999">alg:Bitmasks</a> <a href="/tags/alg-Breadth-first-Search/" style="font-size: 17.33px; color: #828282">alg:Breadth-first Search</a> <a href="/tags/alg-Breadth-firth-Search/" style="font-size: 14.37px; color: #969696">alg:Breadth-firth Search</a> <a href="/tags/alg-Brute-Force/" style="font-size: 16.96px; color: #858585">alg:Brute Force</a> <a href="/tags/alg-Centroid-Decomposition/" style="font-size: 14px; color: #999">alg:Centroid Decomposition</a> <a href="/tags/alg-Depth-first-Search/" style="font-size: 20.3px; color: #6e6e6e">alg:Depth-first Search</a> <a href="/tags/alg-Divide-and-Conquer/" style="font-size: 14px; color: #999">alg:Divide and Conquer</a> <a href="/tags/alg-Dynamic-Porgramming/" style="font-size: 14px; color: #999">alg:Dynamic Porgramming</a> <a href="/tags/alg-Dynamic-Programming/" style="font-size: 21.04px; color: #696969">alg:Dynamic Programming</a> <a href="/tags/alg-Games/" style="font-size: 14px; color: #999">alg:Games</a> <a href="/tags/alg-Geometry/" style="font-size: 14px; color: #999">alg:Geometry</a> <a href="/tags/alg-Graph/" style="font-size: 15.48px; color: #8f8f8f">alg:Graph</a> <a href="/tags/alg-Greedy/" style="font-size: 21.41px; color: #676767">alg:Greedy</a> <a href="/tags/alg-Hash-Table/" style="font-size: 20.67px; color: #6c6c6c">alg:Hash Table</a> <a href="/tags/alg-Heap/" style="font-size: 15.11px; color: #919191">alg:Heap</a> <a href="/tags/alg-In-Order-Traversal/" style="font-size: 14.37px; color: #969696">alg:In-Order Traversal</a> <a href="/tags/alg-Linked-List/" style="font-size: 15.48px; color: #8f8f8f">alg:Linked List</a> <a href="/tags/alg-Math/" style="font-size: 22.89px; color: #5d5d5d">alg:Math</a> <a href="/tags/alg-Matrix/" style="font-size: 14px; color: #999">alg:Matrix</a> <a href="/tags/alg-Meet-in-the-Middle/" style="font-size: 14.37px; color: #969696">alg:Meet in the Middle</a> <a href="/tags/alg-Minimax/" style="font-size: 14px; color: #999">alg:Minimax</a> <a href="/tags/alg-Monotonic-Stack/" style="font-size: 15.48px; color: #8f8f8f">alg:Monotonic Stack</a> <a href="/tags/alg-Priority-Queue/" style="font-size: 14px; color: #999">alg:Priority Queue</a> <a href="/tags/alg-Queue/" style="font-size: 14.74px; color: #949494">alg:Queue</a> <a href="/tags/alg-Random/" style="font-size: 14.74px; color: #949494">alg:Random</a> <a href="/tags/alg-Recursion/" style="font-size: 15.48px; color: #8f8f8f">alg:Recursion</a> <a href="/tags/alg-Recursive/" style="font-size: 14.37px; color: #969696">alg:Recursive</a> <a href="/tags/alg-Rejection-Sampling/" style="font-size: 14px; color: #999">alg:Rejection Sampling</a> <a href="/tags/alg-Reservoir-Sampling/" style="font-size: 14px; color: #999">alg:Reservoir Sampling</a> <a href="/tags/alg-Segmentation-Tree/" style="font-size: 14px; color: #999">alg:Segmentation Tree</a> <a href="/tags/alg-Set/" style="font-size: 14px; color: #999">alg:Set</a> <a href="/tags/alg-Sort/" style="font-size: 14.74px; color: #949494">alg:Sort</a> <a href="/tags/alg-Stack/" style="font-size: 18.44px; color: #7b7b7b">alg:Stack</a> <a href="/tags/alg-String/" style="font-size: 18.81px; color: #787878">alg:String</a> <a href="/tags/alg-Topological-Sort/" style="font-size: 14px; color: #999">alg:Topological Sort</a> <a href="/tags/alg-Tree/" style="font-size: 19.93px; color: #717171">alg:Tree</a> <a href="/tags/alg-Trie/" style="font-size: 14px; color: #999">alg:Trie</a> <a href="/tags/alg-Two-Pointers/" style="font-size: 18.07px; color: #7d7d7d">alg:Two Pointers</a> <a href="/tags/alg-Union-find-Forest/" style="font-size: 15.48px; color: #8f8f8f">alg:Union-find Forest</a> <a href="/tags/artist-Ceremony/" style="font-size: 14px; color: #999">artist:Ceremony</a> <a href="/tags/artist-Cruel-Hand/" style="font-size: 14.37px; color: #969696">artist:Cruel Hand</a> <a href="/tags/artist-Have-Heart/" style="font-size: 14px; color: #999">artist:Have Heart</a> <a href="/tags/artist-Johnny-Cash/" style="font-size: 14px; color: #999">artist:Johnny Cash</a> <a href="/tags/artist-Touche-Amore/" style="font-size: 14px; color: #999">artist:Touche Amore</a> <a href="/tags/artist-Wir-Sind-Helden/" style="font-size: 14.74px; color: #949494">artist:Wir Sind Helden</a> <a href="/tags/translation/" style="font-size: 14px; color: #999">translation</a> <a href="/tags/ucore/" style="font-size: 14px; color: #999">ucore</a> <a href="/tags/付勇林/" style="font-size: 15.85px; color: #8c8c8c">付勇林</a> <a href="/tags/卞之琳/" style="font-size: 14px; color: #999">卞之琳</a> <a href="/tags/屠岸/" style="font-size: 16.22px; color: #8a8a8a">屠岸</a> <a href="/tags/戴镏龄/" style="font-size: 15.85px; color: #8c8c8c">戴镏龄</a> <a href="/tags/曹明伦/" style="font-size: 15.48px; color: #8f8f8f">曹明伦</a> <a href="/tags/朱生豪/" style="font-size: 17.7px; color: #808080">朱生豪</a> <a href="/tags/李霁野/" style="font-size: 15.11px; color: #919191">李霁野</a> <a href="/tags/杨熙龄/" style="font-size: 14px; color: #999">杨熙龄</a> <a href="/tags/林天斗/" style="font-size: 14px; color: #999">林天斗</a> <a href="/tags/梁宗岱/" style="font-size: 16.96px; color: #858585">梁宗岱</a> <a href="/tags/梁葆成/" style="font-size: 14px; color: #999">梁葆成</a> <a href="/tags/袁广达/" style="font-size: 14px; color: #999">袁广达</a> <a href="/tags/郭沫若/" style="font-size: 14px; color: #999">郭沫若</a> <a href="/tags/黄新渠/" style="font-size: 14px; color: #999">黄新渠</a>
    </div>
  </section>


      
    
  
    
      
      
        <section class="list">
  
<header class="pure">
  <div><i class="fas fa-link fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;特别链接</div>
  
</header>

  <div class="content pure">
    <ul class="entry">
      
        <li><a class="flat-box" title="https://wenj.github.io/" href="https://wenj.github.io/">
          <div class="name">
            
              <i class="fas fa-comment-dots fa-fw" aria-hidden="true"></i>
            
            &nbsp;&nbsp;wenj
          </div>
          
        </a></li>
      
        <li><a class="flat-box" title="http://bellasong.site/" href="http://bellasong.site/">
          <div class="name">
            
              <i class="fas fa-comment-dots fa-fw" aria-hidden="true"></i>
            
            &nbsp;&nbsp;ssh
          </div>
          
        </a></li>
      
    </ul>
  </div>
</section>

      
    
  


        </aside>
        <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
    </div>
    <footer id="footer" class="clearfix">
  
  
    <div class="social-wrapper">
      
        
          <a href="mailto:zhanghuimeng1997@gmail.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external"></a>
        
      
        
          <a href="https://github.com/zhanghuimeng" class="social fab fa-github flat-btn" target="_blank" rel="external"></a>
        
      
        
          <a href="https://music.163.com/#/user/home?id=261028414" class="social fas fa-music flat-btn" target="_blank" rel="external"></a>
        
      
    </div>
  
  <br>
  <div><p>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
  <div>本站使用 <a href="https://xaoxuu.com/wiki/material-x/" target="_blank" class="codename">Material X</a> 作为主题，总访问量为 <span id="busuanzi_value_site_pv"><i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span> 次。
  </div>
</footer>

    <script>setLoadingBarProgress(80);</script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>

  <script>
    var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
    var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
    var ALGOLIA_API_KEY = "";
    var ALGOLIA_APP_ID = "";
    var ALGOLIA_INDEX_NAME = "";
    var AZURE_SERVICE_NAME = "";
    var AZURE_INDEX_NAME = "";
    var AZURE_QUERY_KEY = "";
    var BAIDU_API_ID = "";
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/"||"/";
    if(!ROOT.endsWith('/'))ROOT += '/';
  </script>


  
    <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.5/dist/scrollreveal.min.js"></script>
    <script type="text/javascript">
      $(function() {
        const $reveal = $('.reveal');
    		if ($reveal.length === 0) return;
    		const sr = ScrollReveal({ distance: 0 });
    		sr.reveal('.reveal');
      });
    </script>
  
  
    <script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>
    <script type="text/javascript">
      $(function() {
        Waves.attach('.flat-btn', ['waves-button']);
        Waves.attach('.float-btn', ['waves-button', 'waves-float']);
        Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
        Waves.attach('.flat-box', ['waves-block']);
        Waves.attach('.float-box', ['waves-block', 'waves-float']);
        Waves.attach('.waves-image');
        Waves.init();
      });
    </script>
  
  
    <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>
  
  
  


  
  
  
    
  
  
    <script src="/js/app.js"></script>
<script src="/js/search.js"></script>
  








    <script>setLoadingBarProgress(100);</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
